import{a as n,j as e,E as j,l as v,i as N}from"./react-core-BBz5Yun4.js";import{a as w,t as y}from"./forms-B1yeTFPE.js";import{u as E,N as L,L as u,F as S,b as k,q as T}from"./index-Ck76omkK.js";import{u as F,F as q,B as x}from"./ui-components-FQNmLPaU.js";import{F as p}from"./form-input-D6NnL4lT.js";import{S as C}from"./social-login-CYdfH5x_.js";import{o as I,s as h}from"./validation-D376FIhw.js";import"./react-dom-DRcJuq73.js";import"./i18n-DPcvudMq.js";import"./tanstack-DqR0zzLe.js";import"./radix-ui-C8kiJ3Dp.js";const R=I({email:h().email("Introduce un email válido"),password:h().min(1,"La contraseña es requerida")});function D(){const[,f]=E(),[c,d]=n.useState(!1),[a,g]=n.useState(!1),[r,i]=n.useState(null),{toast:m}=F(),o=w({resolver:y(R),defaultValues:{email:"",password:""}});n.useEffect(()=>{if(r){const l=setTimeout(()=>i(null),5e3);return()=>clearTimeout(l)}},[r]);const b=async l=>{d(!0),i(null);try{(await(await k("POST","/api/auth/login",l)).json()).success&&(await T.refetchQueries({queryKey:["/api/auth/user"]}),m({title:"Bienvenido de nuevo",description:"Nos alegra verte otra vez"}),f("/dashboard"))}catch(s){let t="Error al iniciar sesión";s.message?.includes("401")?t="Email o contraseña incorrectos":s.message?.includes("404")?t="Usuario no encontrado":s.message&&(t=s.message),i(t),m({title:"No hemos podido iniciar sesión",description:"Revisa tu email o contraseña",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background bg-green-gradient-subtle font-sans",children:[e.jsx(L,{}),e.jsx("main",{className:"pt-20 md:pt-24 pb-12 md:pb-16 px-4 sm:px-6 flex flex-col items-center justify-center min-h-[80vh]",children:e.jsxs("div",{className:"w-full max-w-sm md:max-w-md",children:[e.jsxs("div",{className:"text-center mb-6 md:mb-8 flex flex-col items-center justify-center w-full",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black tracking-tight text-center w-full",children:[e.jsx("span",{className:"text-foreground",children:"Iniciar"})," ",e.jsx("span",{className:"text-accent",children:"sesión"})]}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm md:text-base text-center max-w-xs md:max-w-sm",children:"Accede a tu espacio personal y gestiona tu LLC con total tranquilidad"})]}),r&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-destructive/10 border border-destructive/20 rounded-xl text-center",children:e.jsx("p",{className:"text-destructive font-medium text-xs md:text-sm",children:r})}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl md:rounded-3xl p-5 md:p-8 border border-border shadow-sm",children:[e.jsx(q,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(b),className:"space-y-4 md:space-y-5",children:[e.jsx(p,{control:o.control,name:"email",label:"Email",placeholder:"Tu correo electrónico",type:"email",inputMode:"email"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{control:o.control,name:"password",label:"Contraseña",placeholder:"Tu contraseña segura",type:a?"text":"password"}),e.jsx(x,{type:"button",variant:"ghost",size:"icon",onClick:()=>g(!a),className:"absolute right-3 bottom-[6px] h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":a?"Ocultar":"Mostrar","data-testid":"button-toggle-password",children:a?e.jsx(j,{className:"w-4 h-4"}):e.jsx(v,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-center",children:e.jsx(u,{href:"/auth/forgot-password",children:e.jsxs("div",{className:"text-accent hover:underline cursor-pointer","data-testid":"link-forgot-password",children:[e.jsx("p",{className:"text-xs md:text-sm font-bold",children:"¿Has olvidado tu contraseña?"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Recupérala fácilmente"})]})})}),e.jsx(x,{type:"submit",disabled:c,className:"w-full bg-accent text-accent-foreground font-black rounded-full h-11 md:h-12 text-sm md:text-base shadow-lg shadow-accent/20","data-testid":"button-login",children:c?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"animate-spin mr-2 w-4 h-4"}),"Entrando..."]}):"Entrar a mi cuenta"})]})}),e.jsx("div",{className:"mt-6 pt-5 border-t border-border",children:e.jsx(C,{mode:"login"})}),e.jsx("div",{className:"mt-6 pt-5 border-t border-border text-center",children:e.jsx(u,{href:"/auth/register",children:e.jsxs("div",{className:"hover:underline cursor-pointer","data-testid":"link-register",children:[e.jsx("p",{className:"text-foreground text-xs md:text-sm font-bold",children:"¿Todavía no tienes cuenta?"}),e.jsx("p",{className:"text-accent text-[10px] md:text-xs",children:"Crea tu cuenta gratis en unos segundos"})]})})})]})]})}),e.jsx(S,{})]})}export{D as default};
