import{j as e,m as R,A as Ca}from"./vendor-DoqeAWLV.js";import{e as M,f as Sa,u as Pa,b as Ea,c as Xe,g as v,a as L,N as Da,L as ee,B as i,C as u,h as y,d as j,q as P,i as A,j as T,k as Aa,I as p,F as Ta}from"./index-rgVOsQxd.js";import{a as n,u as Ye,e as La,c as Ma,P as Ze,g as Fa,W as Ia,Y as Ra,Z as qa,_ as $a,$ as za,a0 as Je,a1 as Oa,X as _a,a2 as ea,a3 as aa,a4 as sa,a5 as Ua,a6 as ve,M as ye,a7 as H,K as He,U as Ka,a8 as Va,a9 as Ha,H as we,t as Be,aa as Ba,z as ke,ab as B,w as Ce,ac as Qe,ad as Qa,ae as Ge,af as Ga,ag as Wa,ah as Xa,ai as Ya,aj as We,T as Se,ak as Za,s as Pe}from"./ui-DQs5cT5J.js";import{L as w}from"./label-rwusmafG.js";import{T as Q}from"./textarea-Bz5MHlpw.js";import{S as ae,a as se,b as te,c as ie,d as b}from"./select-CRsbkGTE.js";var re="Switch",[Ja]=Ma(re),[es,as]=Ja(re),ta=n.forwardRef((r,s)=>{const{__scopeSwitch:l,name:N,checked:d,defaultChecked:_,required:c,disabled:E,value:x="on",onCheckedChange:h,form:g,...F}=r,[I,$]=n.useState(null),o=Ye(s,C=>$(C)),m=n.useRef(!1),D=I?g||!!I.closest("form"):!0,[k,z]=La({prop:d,defaultProp:_??!1,onChange:h,caller:re});return e.jsxs(es,{scope:l,checked:k,disabled:E,children:[e.jsx(Ze.button,{type:"button",role:"switch","aria-checked":k,"aria-required":c,"data-state":ra(k),"data-disabled":E?"":void 0,disabled:E,value:x,...F,ref:o,onClick:Fa(r.onClick,C=>{z(K=>!K),D&&(m.current=C.isPropagationStopped(),m.current||C.stopPropagation())})}),D&&e.jsx(la,{control:I,bubbles:!m.current,name:N,value:x,checked:k,required:c,disabled:E,form:g,style:{transform:"translateX(-100%)"}})]})});ta.displayName=re;var ia="SwitchThumb",na=n.forwardRef((r,s)=>{const{__scopeSwitch:l,...N}=r,d=as(ia,l);return e.jsx(Ze.span,{"data-state":ra(d.checked),"data-disabled":d.disabled?"":void 0,...N,ref:s})});na.displayName=ia;var ss="SwitchBubbleInput",la=n.forwardRef(({__scopeSwitch:r,control:s,checked:l,bubbles:N=!0,...d},_)=>{const c=n.useRef(null),E=Ye(c,_),x=Ia(l),h=Ra(s);return n.useEffect(()=>{const g=c.current;if(!g)return;const F=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(F,"checked").set;if(x!==l&&$){const o=new Event("click",{bubbles:N});$.call(g,l),g.dispatchEvent(o)}},[x,l,N]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...d,tabIndex:-1,ref:E,style:{...d.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});la.displayName=ss;function ra(r){return r?"checked":"unchecked"}var da=ta,ts=na;const ca=n.forwardRef(({className:r,...s},l)=>e.jsx(da,{className:M("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-accent data-[state=unchecked]:bg-input",r),...s,ref:l,children:e.jsx(ts,{className:M("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ca.displayName=da.displayName;const ne=qa,is=$a,ns=za,oa=n.forwardRef(({className:r,...s},l)=>e.jsx(sa,{ref:l,className:M("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s}));oa.displayName=sa.displayName;const G=n.forwardRef(({className:r,children:s,...l},N)=>e.jsxs(ns,{children:[e.jsx(oa,{}),e.jsxs(Je,{ref:N,className:M("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[s,e.jsxs(Oa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));G.displayName=Je.displayName;const W=({className:r,...s})=>e.jsx("div",{className:M("flex flex-col space-y-1.5 text-center sm:text-left",r),...s});W.displayName="DialogHeader";const X=({className:r,...s})=>e.jsx("div",{className:M("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...s});X.displayName="DialogFooter";const Y=n.forwardRef(({className:r,...s},l)=>e.jsx(ea,{ref:l,className:M("text-lg font-semibold leading-none tracking-tight",r),...s}));Y.displayName=ea.displayName;const le=n.forwardRef(({className:r,...s},l)=>e.jsx(aa,{ref:l,className:M("text-sm text-muted-foreground",r),...s}));le.displayName=aa.displayName;const ls=Sa("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-accent text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function q({className:r,variant:s,...l}){return e.jsx("div",{className:M(ls({variant:s}),r),...l})}function rs(){const{toast:r}=Xe(),{data:s,isLoading:l}=L({queryKey:["/api/newsletter/status"]}),N=v({mutationFn:async d=>{await j("POST",d?"/api/newsletter/subscribe":"/api/newsletter/unsubscribe",d?{email:void 0}:void 0)},onSuccess:()=>{P.invalidateQueries({queryKey:["/api/newsletter/status"]}),r({title:"Preferencia actualizada",description:"Tu suscripción ha sido actualizada correctamente."})}});return l?e.jsx("div",{className:"w-10 h-6 bg-gray-100 animate-pulse rounded-full"}):e.jsx(ca,{checked:s?.isSubscribed,onCheckedChange:d=>N.mutate(d),disabled:N.isPending})}function ps(){const[,r]=Pa(),{user:s,isAuthenticated:l,isLoading:N}=Ea(),[d,_]=n.useState("services"),[c,E]=n.useState(!1),[x,h]=n.useState({firstName:"",lastName:"",phone:"",businessActivity:"",address:"",streetType:"",city:"",province:"",postalCode:"",country:"",idNumber:"",idType:"",birthDate:""}),[g,F]=n.useState({current:"",newPassword:"",confirm:""}),[I,$]=n.useState(!1),{toast:o}=Xe(),[m,D]=n.useState(null),[k,z]=n.useState({open:!1,user:null}),[C,K]=n.useState({open:!1,user:null}),[de,Ee]=n.useState(""),[ce,De]=n.useState(""),[oe,Ae]=n.useState(""),[Te,Le]=n.useState(""),[S,me]=n.useState({open:!1,user:null}),[xe,Me]=n.useState(""),[ue,Fe]=n.useState(""),[Ie,Re]=n.useState("info"),[U,ma]=n.useState("orders");n.useEffect(()=>{s&&h({firstName:s.firstName||"",lastName:s.lastName||"",phone:s.phone||"",businessActivity:s.businessActivity||"",address:s.address||"",streetType:s.streetType||"",city:s.city||"",province:s.province||"",postalCode:s.postalCode||"",country:s.country||"",idNumber:s.idNumber||"",idType:s.idType||"",birthDate:s.birthDate||""})},[s]);const qe=v({mutationFn:async a=>{await j("PATCH","/api/user/profile",a)},onSuccess:()=>{P.invalidateQueries({queryKey:["/api/auth/user"]}),E(!1),o({title:"Perfil actualizado"})}});n.useEffect(()=>{!N&&!l&&r("/login")},[l,N,r]);const{data:f,isLoading:xa}=L({queryKey:["/api/orders"],enabled:l,refetchInterval:3e4}),{data:pe,isLoading:ua}=L({queryKey:["/api/messages"],enabled:l}),[$e,pa]=n.useState(null),[he,ze]=n.useState(""),Oe=f?.[0]?.id,{data:Z}=L({queryKey:["/api/orders",Oe,"events"],enabled:!!Oe}),_e=v({mutationFn:async a=>{await j("POST",`/api/messages/${a}/reply`,{content:he})},onSuccess:()=>{ze(""),P.invalidateQueries({queryKey:["/api/messages"]}),o({title:"Respuesta enviada",description:"Tu mensaje ha sido registrado."})}}),{data:Ue,isLoading:ha}=L({queryKey:["/api/user/notifications"],enabled:l,refetchInterval:3e4}),ge=v({mutationFn:async()=>{await j("POST","/api/user/change-password",{currentPassword:g.current,newPassword:g.newPassword})},onSuccess:()=>{F({current:"",newPassword:"",confirm:""}),$(!1),o({title:"Contraseña cambiada",description:"Tu nueva contraseña está activa."})},onError:a=>{o({title:"Error",description:a.message||"No se pudo cambiar la contraseña",variant:"destructive"})}}),ga=v({mutationFn:async()=>{await j("DELETE","/api/user/account")},onSuccess:()=>{r("/")}}),fa=v({mutationFn:async a=>{await j("PATCH",`/api/user/notifications/${a}/read`)},onSuccess:()=>{P.invalidateQueries({queryKey:["/api/user/notifications"]})}}),{data:V}=L({queryKey:["/api/admin/orders"],enabled:!!s?.isAdmin,refetchInterval:3e4}),{data:Ke}=L({queryKey:["/api/admin/users"],enabled:!!s?.isAdmin,refetchInterval:6e4}),{data:J}=L({queryKey:["/api/admin/newsletter"],enabled:!!s?.isAdmin}),{data:Ve}=L({queryKey:["/api/admin/messages"],enabled:!!s?.isAdmin}),ba=v({mutationFn:async({id:a,status:t})=>(await j("PATCH",`/api/admin/orders/${a}/status`,{status:t})).json(),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/admin/orders"]}),o({title:"Estado actualizado"})}}),fe=v({mutationFn:async({id:a,data:t})=>(await j("PATCH",`/api/admin/users/${a}`,t)).json(),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/admin/users"]}),o({title:"Usuario actualizado"}),D(null)}}),ja=v({mutationFn:async a=>{await j("DELETE",`/api/admin/users/${a}`)},onSuccess:()=>{P.invalidateQueries({queryKey:["/api/admin/users"]}),o({title:"Usuario eliminado",variant:"destructive"})}}),Na=v({mutationFn:async a=>{await j("DELETE",`/api/admin/newsletter/${a}`)},onSuccess:()=>{P.invalidateQueries({queryKey:["/api/admin/newsletter"]}),o({title:"Suscriptor eliminado"})}}),be=v({mutationFn:async({to:a,subject:t,message:O})=>{await j("POST","/api/admin/send-email",{to:a,subject:t,message:O})},onSuccess:()=>{o({title:"Email enviado"}),z({open:!1,user:null}),Ee(""),De("")}}),je=v({mutationFn:async({email:a,documentType:t,message:O})=>{await j("POST","/api/admin/request-document",{email:a,documentType:t,message:O})},onSuccess:()=>{o({title:"Solicitud enviada"}),K({open:!1,user:null}),Ae(""),Le("")}}),Ne=v({mutationFn:async({userId:a,email:t,title:O,message:wa,type:ka})=>{await j("POST","/api/admin/send-note",{userId:a,email:t,title:O,message:wa,type:ka,sendEmail:!0})},onSuccess:()=>{o({title:"Nota enviada al cliente"}),me({open:!1,user:null}),Me(""),Fe(""),Re("info")}}),va=v({mutationFn:async a=>{await j("PATCH",`/api/admin/messages/${a}/status`,{status:"archived"})},onSuccess:()=>{P.invalidateQueries({queryKey:["/api/admin/messages"]}),o({title:"Mensaje archivado"})}});if(N||!l)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"w-10 h-10 border-2 border-accent border-t-transparent rounded-full animate-spin"})});const ya=[{id:"services",label:"Mis Servicios",icon:Ua,mobileLabel:"Servicios"},{id:"notifications",label:"Notificaciones",icon:ve,mobileLabel:"Alertas"},{id:"messages",label:"Mensajes",icon:ye,mobileLabel:"Msgs"},{id:"documents",label:"Documentos",icon:H,mobileLabel:"Docs"},{id:"payments",label:"Pagos y Facturas",icon:He,mobileLabel:"Pagos"},{id:"profile",label:"Mi Perfil",icon:Ka,mobileLabel:"Perfil"},...s?.isAdmin?[{id:"admin",label:"Administración",icon:Va,mobileLabel:"Admin"}]:[]];return e.jsxs("div",{className:"min-h-screen bg-[#F7F7F5] font-sans",children:[e.jsx(Da,{}),e.jsxs("main",{className:"pt-24 pb-16 px-4 md:px-8 max-w-7xl mx-auto",children:[e.jsx("header",{className:"mb-8 md:mb-12",children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent font-black  tracking-widest text-[10px] md:text-sm mb-1 md:mb-2",children:"Área de Clientes"}),e.jsx("h1",{className:"text-3xl md:text-5xl font-black text-primary  tracking-tighter leading-tight md:leading-none",children:s?.firstName?`Hola, ${s.firstName}`:"Mi Panel"})]}),e.jsx(ee,{href:"/servicios#pricing",children:e.jsxs(i,{className:"w-full md:w-auto bg-accent text-primary font-black rounded-full px-6 md:px-8 py-5 md:py-6 transition-all shadow-xl shadow-primary/20 flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx(Ha,{className:"w-5 h-5"})," Nueva LLC"]})})]})}),e.jsx("div",{className:"flex overflow-x-auto pb-4 mb-8 gap-2 no-scrollbar -mx-4 px-4 md:mx-0 md:px-0",children:ya.map(a=>e.jsxs(i,{variant:d===a.id?"default":"outline",onClick:()=>_(a.id),className:`flex items-center gap-2 rounded-full font-black text-xs md:text-sm tracking-tight whitespace-nowrap shrink-0 ${d===a.id?"bg-accent text-primary shadow-lg shadow-accent/20":"bg-white text-muted-foreground border-0"}`,"data-testid":`button-tab-${a.id}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a.label}),e.jsx("span",{className:"sm:hidden",children:a.mobileLabel})]},a.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-2 order-2 lg:order-1",children:e.jsxs(Ca,{mode:"wait",children:[d==="services"&&e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[e.jsxs(u,{className:"rounded-3xl border-0 shadow-sm p-6 bg-white",children:[e.jsx("p",{className:"text-[10px] font-black  tracking-widest text-muted-foreground mb-1",children:"Actividad de Cuenta"}),e.jsx("h4",{className:"text-2xl font-black text-primary",children:f?.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Servicios totales contratados"})]}),e.jsxs(u,{className:"rounded-3xl border-0 shadow-sm p-6 bg-white",children:[e.jsx("p",{className:"text-[10px] font-black  tracking-widest text-muted-foreground mb-1",children:"Estado Global"}),e.jsx("h4",{className:"text-2xl font-black text-accent ",children:f?.some(a=>a.status==="pending")?"Pendiente":"Al día"}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Situación de tus trámites"})]})]}),e.jsx("h2",{className:"text-xl md:text-2xl font-black text-primary  tracking-tight mb-6",children:"Tus Servicios Activos"}),xa?e.jsx("div",{className:"space-y-4",children:[1,2].map(a=>e.jsx("div",{className:"h-32 bg-white rounded-[1.5rem] md:rounded-[2rem] animate-pulse"},a))}):f&&Array.isArray(f)&&f.length>0?e.jsx("div",{className:"space-y-4",children:f.map(a=>e.jsx(u,{className:"rounded-[1.5rem] md:rounded-[2rem] border-0 shadow-sm overflow-hidden hover:shadow-md transition-shadow group",children:e.jsxs(y,{className:"p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 md:gap-6 w-full",children:[e.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-accent/10 rounded-2xl flex items-center justify-center shrink-0 group-hover:bg-accent group-hover:text-primary transition-colors",children:e.jsx(we,{className:"w-6 h-6 md:w-7 md:h-7"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-lg md:text-xl font-black text-primary  tracking-tight truncate",children:a.product?.name||"Constitución LLC"}),e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground font-medium truncate",children:["Pedido #",a.id," • ",new Date(a.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-2 w-full md:w-auto pt-4 md:pt-0 border-t md:border-t-0 border-gray-100",children:[e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[10px] font-black  tracking-widest whitespace-nowrap ${a.status==="paid"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:a.status==="paid"?"Activo":"Pendiente Pago"}),e.jsxs("div",{className:"flex gap-1 md:gap-2",children:[e.jsx(i,{variant:"ghost",className:"rounded-full w-9 h-9 md:w-11 md:h-11 p-0 bg-gray-50 shrink-0",title:"Ver Factura PDF",onClick:()=>window.open(`/api/orders/${a.id}/invoice`,"_blank"),"data-testid":`button-invoice-${a.id}`,children:e.jsx(H,{className:"w-4 h-4 md:w-5 md:h-5"})}),e.jsx(i,{variant:"ghost",className:"rounded-full w-9 h-9 md:w-11 md:h-11 p-0 bg-gray-50 shrink-0",title:"Ver Recibo PDF",onClick:()=>window.open(`/api/orders/${a.id}/receipt`,"_blank"),"data-testid":`button-receipt-${a.id}`,children:e.jsx(Be,{className:"w-4 h-4 md:w-5 md:h-5"})}),e.jsx(i,{variant:"ghost",className:"rounded-full w-9 h-9 md:w-11 md:h-11 p-0 bg-gray-50 shrink-0",title:"Editar Datos",onClick:()=>{const t=prompt("¿Qué datos deseas modificar? (Nombre de empresa, actividad, etc.)");t&&j("PATCH",`/api/llc/${a.application?.id}/data`,{notes:t}).then(()=>{o({title:"Solicitud enviada",description:"Tus cambios han sido registrados y serán revisados."}),P.invalidateQueries({queryKey:["/api/orders"]})})},children:e.jsx(Ba,{className:"w-4 h-4 md:w-5 md:h-5 text-accent"})})]})]})]})},a.id))}):e.jsxs("div",{className:"bg-white p-16 rounded-[3rem] text-center shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(we,{className:"w-10 h-10 text-gray-300"})}),e.jsx("h3",{className:"text-2xl font-black text-primary  mb-3",children:"No tienes servicios aún"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto",children:"Emprende hoy mismo y constituye tu empresa en Estados Unidos con Easy US LLC."}),e.jsx(ee,{href:"/servicios#pricing",children:e.jsx(i,{className:"bg-accent text-primary font-black rounded-full px-10 py-7 text-lg shadow-xl shadow-accent/20",children:"Empezar ahora"})})]})]},"services"),d==="notifications"&&e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-primary tracking-tight",children:"Notificaciones"}),ha?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsx("div",{className:"h-24 bg-white rounded-2xl animate-pulse"},a))}):Ue?.length===0?e.jsx(u,{className:"rounded-2xl border-0 shadow-sm",children:e.jsxs(y,{className:"p-8 text-center",children:[e.jsx(ve,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No tienes notificaciones"})]})}):e.jsx("div",{className:"space-y-3",children:Ue?.map(a=>e.jsx(u,{className:`rounded-2xl border-0 shadow-sm cursor-pointer transition-all hover:shadow-md ${a.isRead?"":"bg-accent/5 border-l-4 border-l-accent"}`,onClick:()=>fa.mutate(a.id),children:e.jsx(y,{className:"p-4 md:p-6",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.type==="action_required"&&e.jsx("span",{className:"text-[10px] bg-red-100 text-red-700 px-2 py-1 rounded-full font-black",children:"ACCIÓN REQUERIDA"}),a.type==="update"&&e.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-black",children:"ACTUALIZACIÓN"}),a.type==="info"&&e.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-700 px-2 py-1 rounded-full font-black",children:"INFORMACIÓN"}),!a.isRead&&e.jsx("span",{className:"w-2 h-2 bg-accent rounded-full"})]}),e.jsx("h3",{className:"font-black text-sm md:text-base",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(a.createdAt).toLocaleString()})]})})})},a.id))})]},"notifications"),d==="messages"&&e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-primary tracking-tight",children:"Mis Consultas y Soporte"}),e.jsx(ee,{href:"/contacto",children:e.jsx(i,{className:"bg-accent text-primary font-black rounded-full text-xs","data-testid":"button-new-query",children:"Nueva Consulta"})})]}),ua?e.jsx("div",{className:"space-y-4",children:[1,2].map(a=>e.jsx("div",{className:"h-24 bg-white rounded-2xl animate-pulse"},a))}):e.jsxs("div",{className:"space-y-4",children:[pe?.map(a=>e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm p-6 bg-white hover:shadow-md transition-shadow cursor-pointer",onClick:()=>pa($e?.id===a.id?null:a),"data-testid":`card-message-${a.id}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-accent"}),e.jsx("h4",{className:"font-black text-primary",children:a.subject||"Sin asunto"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["MSG-",a.id]}),e.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest ${a.status==="unread"?"bg-accent text-primary":"bg-gray-100 text-gray-500"}`,children:a.status==="unread"?"Pendiente":a.status==="read"?"Leído":"Archivado"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:a.content}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-black uppercase tracking-widest",children:new Date(a.createdAt).toLocaleString("es-ES")}),$e?.id===a.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(Q,{value:he,onChange:t=>ze(t.target.value),placeholder:"Escribe tu respuesta...",className:"flex-1 rounded-xl min-h-[80px] text-sm"})}),e.jsxs(i,{onClick:t=>{t.stopPropagation(),_e.mutate(a.id)},disabled:!he.trim()||_e.isPending,className:"bg-accent text-primary font-black rounded-full px-6","data-testid":"button-send-reply",children:[e.jsx(B,{className:"w-4 h-4 mr-2"})," Enviar Respuesta"]})]})]},a.id)),(!pe||pe.length===0)&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-3xl",children:[e.jsx(ye,{className:"w-12 h-12 text-gray-200 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground font-black",children:"No tienes mensajes pendientes."}),e.jsx(ee,{href:"/contacto",children:e.jsx(i,{className:"mt-4 bg-accent text-primary font-black rounded-full",children:"Enviar primera consulta"})})]})]})]},"messages"),d==="profile"&&e.jsx(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:e.jsxs(u,{className:"rounded-[1.5rem] md:rounded-[2rem] border-0 shadow-sm",children:[e.jsxs(A,{className:"p-6 md:p-8",children:[e.jsx(T,{className:"text-xl md:text-2xl font-black text-primary  tracking-tight",children:"Información Personal"}),e.jsx(Aa,{className:"text-xs md:text-sm",children:"Gestiona tus datos de contacto y preferencias."})]}),e.jsxs(y,{className:"p-6 md:p-8 pt-0 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-accent/5 rounded-2xl border border-accent/10",children:[e.jsx("p",{className:"text-[10px] font-black tracking-widest text-muted-foreground uppercase mb-1",children:"ID de Cliente"}),e.jsx("p",{className:"text-lg font-black text-primary font-mono",children:s?.id?.slice(0,8).toUpperCase()||"N/A"})]}),e.jsxs("div",{className:"p-4 bg-accent/5 rounded-2xl border border-accent/10",children:[e.jsx("p",{className:"text-[10px] font-black tracking-widest text-muted-foreground uppercase mb-1",children:"Estado de Cuenta"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s?.accountStatus==="active"?"bg-green-500":s?.accountStatus==="vip"?"bg-accent":s?.accountStatus==="pending"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("p",{className:"text-lg font-black text-primary capitalize",children:s?.accountStatus==="active"?"Activa":s?.accountStatus==="vip"?"VIP":s?.accountStatus==="pending"?"Pendiente":s?.accountStatus==="suspended"?"Suspendida":"Activa"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Nombre"}),c?e.jsx(p,{value:x.firstName,onChange:a=>h(t=>({...t,firstName:a.target.value})),className:"rounded-full h-14 px-6","data-testid":"input-firstname"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.firstName||"No disponible"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Apellido"}),c?e.jsx(p,{value:x.lastName,onChange:a=>h(t=>({...t,lastName:a.target.value})),className:"rounded-full h-14 px-6","data-testid":"input-lastname"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.lastName||"No disponible"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Email"}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base flex items-center justify-between",children:[e.jsx("span",{children:s?.email||"No disponible"}),s?.emailVerified?e.jsxs("span",{className:"text-[10px] bg-green-100 text-green-700 px-3 py-1 rounded-full font-black flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"})," Verificado"]}):e.jsxs("span",{className:"text-[10px] bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full font-black flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"})," No verificado"]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Teléfono"}),c?e.jsx(p,{value:x.phone,onChange:a=>h(t=>({...t,phone:a.target.value})),className:"rounded-full h-14 px-6",placeholder:"+34 612 345 678","data-testid":"input-phone"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.phone||"No proporcionado"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Tipo de Documento"}),c?e.jsxs("select",{value:x.idType,onChange:a=>h(t=>({...t,idType:a.target.value})),className:"w-full rounded-full h-14 px-6 bg-white border border-gray-200 font-black text-sm","data-testid":"select-id-type",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"dni",children:"DNI"}),e.jsx("option",{value:"nie",children:"NIE"}),e.jsx("option",{value:"passport",children:"Pasaporte"})]}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.idType==="dni"?"DNI":s?.idType==="nie"?"NIE":s?.idType==="passport"?"Pasaporte":"No proporcionado"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Número de Documento"}),c?e.jsx(p,{value:x.idNumber,onChange:a=>h(t=>({...t,idNumber:a.target.value})),className:"rounded-full h-14 px-6",placeholder:"12345678A","data-testid":"input-id-number"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.idNumber||"No proporcionado"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Fecha de Nacimiento"}),c?e.jsx(p,{type:"date",value:x.birthDate,onChange:a=>h(t=>({...t,birthDate:a.target.value})),className:"rounded-full h-14 px-6","data-testid":"input-birth-date"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.birthDate?new Date(s.birthDate).toLocaleDateString():"No proporcionada"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Actividad del Negocio"}),c?e.jsx(Q,{value:x.businessActivity,onChange:a=>h(t=>({...t,businessActivity:a.target.value})),className:"rounded-2xl min-h-[100px] p-4",placeholder:"Describe la actividad principal de tu negocio...","data-testid":"input-business-activity"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-2xl font-black text-sm md:text-base",children:s?.businessActivity||"No proporcionada"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-black tracking-tight text-primary mb-4",children:"Dirección Completa"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Dirección"}),c?e.jsx(p,{value:x.address,onChange:a=>h(t=>({...t,address:a.target.value})),className:"rounded-full h-14 px-6",placeholder:"Calle, número, piso...","data-testid":"input-address"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.address||"No proporcionada"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Ciudad"}),c?e.jsx(p,{value:x.city,onChange:a=>h(t=>({...t,city:a.target.value})),className:"rounded-full h-14 px-6",placeholder:"Madrid","data-testid":"input-city"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.city||"No proporcionada"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Provincia"}),c?e.jsx(p,{value:x.province,onChange:a=>h(t=>({...t,province:a.target.value})),className:"rounded-full h-14 px-6",placeholder:"Madrid","data-testid":"input-province"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.province||"No proporcionada"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Código Postal"}),c?e.jsx(p,{value:x.postalCode,onChange:a=>h(t=>({...t,postalCode:a.target.value})),className:"rounded-full h-14 px-6",placeholder:"28001","data-testid":"input-postal-code"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.postalCode||"No proporcionado"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] md:text-xs font-black tracking-widest text-muted-foreground uppercase",children:"País"}),c?e.jsx(p,{value:x.country,onChange:a=>h(t=>({...t,country:a.target.value})),className:"rounded-full h-14 px-6",placeholder:"España","data-testid":"input-country"}):e.jsx("div",{className:"p-4 bg-gray-50 rounded-full font-black text-sm md:text-base",children:s?.country||"No proporcionado"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[c?e.jsxs(e.Fragment,{children:[e.jsx(i,{onClick:()=>qe.mutate(x),disabled:qe.isPending,className:"bg-accent text-primary font-black rounded-full px-8 py-6 text-sm",children:"Guardar Cambios"}),e.jsx(i,{variant:"outline",onClick:()=>E(!1),className:"rounded-full font-black border-2 py-6 text-sm",children:"Cancelar"})]}):e.jsx(i,{onClick:()=>E(!0),className:"bg-accent text-primary font-black rounded-full px-8 py-6 text-sm",children:"Editar Perfil"}),e.jsx(i,{variant:"outline",className:"rounded-full font-black border-2 py-6 text-sm",onClick:()=>$(!I),children:I?"Cancelar":"Cambiar Contraseña"}),e.jsx(i,{variant:"destructive",className:"rounded-full font-black py-6 text-sm",onClick:()=>{confirm("¿Estás seguro de que deseas eliminar tu cuenta? Esta acción es irreversible.")&&ga.mutate()},children:"Eliminar Cuenta"})]}),I&&e.jsxs("div",{className:"p-6 bg-gray-50 rounded-2xl space-y-4 mt-4",children:[e.jsx("h4",{className:"font-black text-sm",children:"Cambiar Contraseña"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{type:"password",placeholder:"Contraseña actual",value:g.current,onChange:a=>F(t=>({...t,current:a.target.value})),className:"rounded-full h-12 px-6","data-testid":"input-current-password"}),e.jsx(p,{type:"password",placeholder:"Nueva contraseña",value:g.newPassword,onChange:a=>F(t=>({...t,newPassword:a.target.value})),className:"rounded-full h-12 px-6","data-testid":"input-new-password"}),e.jsx(p,{type:"password",placeholder:"Confirmar nueva contraseña",value:g.confirm,onChange:a=>F(t=>({...t,confirm:a.target.value})),className:"rounded-full h-12 px-6","data-testid":"input-confirm-password"})]}),e.jsx(i,{className:"bg-accent text-primary font-black rounded-full w-full py-6",onClick:()=>{if(!g.current){o({title:"Error",description:"Ingresa tu contraseña actual",variant:"destructive"});return}if(g.newPassword!==g.confirm){o({title:"Error",description:"Las contraseñas no coinciden",variant:"destructive"});return}if(g.newPassword.length<8){o({title:"Error",description:"La contraseña debe tener al menos 8 caracteres",variant:"destructive"});return}ge.mutate()},disabled:ge.isPending,children:ge.isPending?"Cambiando...":"Guardar Nueva Contraseña"})]}),e.jsx("div",{className:"pt-8 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 p-6 bg-accent/5 rounded-[2rem] border border-accent/10",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"text-sm font-black  tracking-tight text-primary flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-accent"})," Suscripción Newsletter"]}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Recibe noticias, actualizaciones fiscales y consejos para tu LLC."})]}),e.jsx(rs,{})]})})]})]})},"profile"),d==="payments"&&e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs(u,{className:"rounded-[1.5rem] md:rounded-[2.5rem] bg-accent text-primary border-0 shadow-xl overflow-hidden relative",children:[e.jsxs("div",{className:"p-6 md:p-10 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8 md:mb-12",children:[e.jsx(He,{className:"w-10 h-10 md:w-12 md:h-12 text-accent"}),e.jsx("span",{className:"text-[10px] font-black  tracking-[0.2em] opacity-60",children:"Suscripción Activa"})]}),e.jsx("h3",{className:"text-2xl md:text-3xl font-black  tracking-tight mb-2",children:"Métodos de Pago"}),e.jsx("p",{className:"text-sm md:text-base text-primary/60 font-medium mb-6 md:mb-8",children:"Gestiona tus tarjetas, facturas y suscripciones a través de Stripe."}),e.jsx("div",{className:"flex flex-wrap gap-4",children:e.jsx("a",{href:"https://billing.stripe.com/p/login/test_6oE5mG0Y0",target:"_blank",rel:"noopener noreferrer",className:"w-full sm:w-auto",children:e.jsxs(i,{className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full px-8 py-6 flex items-center justify-center gap-2 transition-colors",children:["Portal Stripe ",e.jsx(Qa,{className:"w-4 h-4"})]})})})]}),e.jsx("div",{className:"absolute -right-20 -bottom-20 w-60 h-60 md:w-80 md:h-80 bg-accent opacity-5 rounded-full"})]}),e.jsx("h3",{className:"text-xl md:text-2xl font-black text-primary  tracking-tight mt-10 md:mt-12 mb-6",children:"Historial de Facturación"}),e.jsx("div",{className:"space-y-4",children:f?.map(a=>e.jsx(u,{className:"rounded-2xl md:rounded-3xl border-0 shadow-sm overflow-hidden group",children:e.jsxs(y,{className:"p-5 md:p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gray-50 rounded-xl md:rounded-2xl flex items-center justify-center group-hover:bg-accent group-hover:text-primary transition-colors",children:e.jsx(H,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-black text-primary  text-xs md:text-sm",children:["Factura INV-",a.id]}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground font-black",children:new Date(a.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-6 w-full sm:w-auto",children:[e.jsxs("p",{className:"font-black text-primary text-sm md:text-base",children:[(a.amount/100).toFixed(2),"€"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",className:"rounded-full font-black border-2 h-8 px-3 text-[10px]",onClick:()=>window.open(`/api/orders/${a.id}/invoice`,"_blank"),children:"Factura"}),e.jsx(i,{variant:"outline",size:"sm",className:"rounded-full font-black border-2 h-8 px-3 text-[10px]",onClick:()=>window.open(`/api/orders/${a.id}/receipt`,"_blank"),children:"Recibo"})]})]})]})},a.id))})]},"payments"),d==="documents"&&e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-primary  tracking-tight mb-6",children:"Centro de Documentación"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(u,{className:"rounded-[1.5rem] md:rounded-[2rem] border-0 shadow-sm p-6 md:p-8 flex flex-col items-center text-center group hover:bg-accent transition-all",children:[e.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-gray-50 rounded-2xl flex items-center justify-center mb-4 group-hover:bg-white/20 transition-colors",children:e.jsx(H,{className:"w-7 h-7 md:w-8 md:h-8 text-primary"})}),e.jsx("h3",{className:"font-black text-primary  tracking-tight mb-2 text-sm md:text-base",children:"Contrato de Servicio"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-6 font-medium",children:"Tus términos aceptados y firmados con Easy US LLC."}),e.jsxs(i,{variant:"outline",className:"rounded-full font-black border-2 w-full text-xs py-5",onClick:()=>window.open("/terminos_y_condiciones.pdf","_blank"),children:[e.jsx(Be,{className:"w-4 h-4 mr-2"})," Descargar PDF"]})]}),e.jsxs(u,{className:"rounded-[1.5rem] md:rounded-[2rem] border-0 shadow-sm p-6 md:p-8 flex flex-col items-center text-center opacity-50 bg-gray-50/50",children:[e.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-white rounded-2xl flex items-center justify-center mb-4",children:e.jsx(we,{className:"w-7 h-7 md:w-8 md:h-8 text-gray-300"})}),e.jsx("h3",{className:"font-black text-primary  tracking-tight mb-2 text-sm md:text-base",children:"Articles of Organization"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-6 font-medium",children:"Disponible una vez que el estado procese tu LLC."}),e.jsx(i,{disabled:!0,variant:"outline",className:"rounded-full font-black border-2 w-full text-xs py-5",children:"Pendiente..."})]})]})]},"documents"),d==="admin"&&s?.isAdmin&&e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-primary tracking-tight",children:"Panel de Administración"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Gestión de pedidos, clientes, newsletter y comunicaciones."}),e.jsx("div",{className:"flex flex-wrap gap-2 pb-4",children:[{id:"orders",label:"Pedidos",icon:Ge},{id:"users",label:"Clientes",icon:Ga},{id:"newsletter",label:"Newsletter",icon:Wa},{id:"inbox",label:"Mensajes",icon:ye}].map(a=>e.jsxs(i,{variant:U===a.id?"default":"outline",onClick:()=>ma(a.id),className:`flex items-center gap-2 rounded-full text-xs font-black ${U===a.id?"bg-accent text-primary":"bg-white border-0"}`,"data-testid":`button-admin-tab-${a.id}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a.label})]},a.id))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm",children:[e.jsx(A,{className:"pb-2",children:e.jsx(T,{className:"text-xs font-black text-muted-foreground",children:"VENTAS TOTALES"})}),e.jsx(y,{children:e.jsx("p",{className:"text-xl md:text-2xl font-black text-primary",children:V?.reduce((a,t)=>a+t.amount,0).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})})]}),e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm",children:[e.jsx(A,{className:"pb-2",children:e.jsx(T,{className:"text-xs font-black text-muted-foreground",children:"PENDIENTES"})}),e.jsx(y,{children:e.jsx("p",{className:"text-xl md:text-2xl font-black text-yellow-600",children:V?.filter(a=>a.status==="pending").length||0})})]}),e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm",children:[e.jsx(A,{className:"pb-2",children:e.jsx(T,{className:"text-xs font-black text-muted-foreground",children:"COMPLETADOS"})}),e.jsx(y,{children:e.jsx("p",{className:"text-xl md:text-2xl font-black text-green-600",children:V?.filter(a=>a.status==="paid"||a.status==="filed").length||0})})]}),e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm",children:[e.jsx(A,{className:"pb-2",children:e.jsx(T,{className:"text-xs font-black text-muted-foreground",children:"SUSCRIPTORES"})}),e.jsx(y,{children:e.jsx("p",{className:"text-xl md:text-2xl font-black text-accent",children:J?.length||0})})]})]}),U==="orders"&&e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:[e.jsx(A,{className:"bg-white border-b border-gray-100 p-4",children:e.jsx(T,{className:"text-lg font-black",children:"Listado de Pedidos"})}),e.jsx(y,{className:"p-0",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[V?.map(a=>e.jsx("div",{className:"p-4 hover:bg-gray-50/50",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(q,{variant:"outline",className:"font-mono text-xs bg-gray-100",children:a.application?.requestCode||`#${a.id}`}),e.jsx(q,{className:`text-[10px] font-black ${a.status==="paid"||a.status==="filed"?"bg-green-100 text-green-700":a.status==="cancelled"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:a.status}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleDateString()})]}),e.jsxs("p",{className:"font-medium mt-1",children:[a.user?.firstName," ",a.user?.lastName," - ",a.user?.email]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.product?.name," • ",e.jsxs("span",{className:"font-black",children:[(a.amount/100).toFixed(2),"€"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 flex-wrap justify-end",children:[e.jsxs(ae,{value:a.status,onValueChange:t=>ba.mutate({id:a.id,status:t}),children:[e.jsx(se,{className:"w-24 md:w-28 h-7 md:h-8 rounded-full text-[10px] md:text-xs font-black",children:e.jsx(te,{})}),e.jsxs(ie,{children:[e.jsx(b,{value:"pending",children:"Pendiente"}),e.jsx(b,{value:"paid",children:"Pagado"}),e.jsx(b,{value:"filed",children:"Presentado"}),e.jsx(b,{value:"cancelled",children:"Cancelado"})]})]}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9",onClick:()=>window.open(`/api/admin/invoice/${a.id}`,"_blank"),title:"Ver Factura PDF",children:e.jsx(H,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]})},a.id)),!V?.length&&e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No hay pedidos"})]})})]}),U==="users"&&e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:[e.jsx(A,{className:"bg-white border-b border-gray-100 p-4",children:e.jsx(T,{className:"text-lg font-black",children:"Gestión de Clientes"})}),e.jsx(y,{className:"p-0",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[Ke?.map(a=>e.jsx("div",{className:"p-4 hover:bg-gray-50/50",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"font-black",children:[a.firstName," ",a.lastName]}),e.jsx(q,{className:`text-[10px] font-black ${a.isAdmin?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:a.isAdmin?"Admin":"Cliente"}),a.isActive===!1&&e.jsx(q,{className:"text-[10px] font-black bg-red-100 text-red-700",children:"Desactivado"}),a.accountStatus&&a.accountStatus!=="active"&&e.jsx(q,{className:`text-[10px] font-black ${a.accountStatus==="vip"?"bg-accent/20 text-accent-foreground":a.accountStatus==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:a.accountStatus==="vip"?"VIP":a.accountStatus==="pending"?"Pendiente":"Suspendida"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.email," • ",a.phone||"Sin teléfono"]}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:a.id})]}),e.jsxs("div",{className:"flex items-center gap-0.5 md:gap-1 flex-wrap justify-end",children:[e.jsxs(ne,{children:[e.jsx(is,{asChild:!0,children:e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9",title:"Editar",onClick:()=>D({...a}),children:e.jsx(Xa,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})}),e.jsxs(G,{children:[e.jsx(W,{children:e.jsx(Y,{children:"Editar Usuario"})}),m&&m.id===a.id&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Nombre"}),e.jsx(p,{value:m.firstName||"",onChange:t=>D({...m,firstName:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Apellido"}),e.jsx(p,{value:m.lastName||"",onChange:t=>D({...m,lastName:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Email"}),e.jsx(p,{value:m.email||"",onChange:t=>D({...m,email:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Teléfono"}),e.jsx(p,{value:m.phone||"",onChange:t=>D({...m,phone:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Estado de Cuenta"}),e.jsxs(ae,{value:m.accountStatus||"active",onValueChange:t=>D({...m,accountStatus:t}),children:[e.jsx(se,{children:e.jsx(te,{})}),e.jsxs(ie,{children:[e.jsx(b,{value:"active",children:"Activa"}),e.jsx(b,{value:"pending",children:"Pendiente"}),e.jsx(b,{value:"vip",children:"VIP"}),e.jsx(b,{value:"suspended",children:"Suspendida"})]})]})]}),e.jsx(X,{children:e.jsx(i,{onClick:()=>m?.id&&fe.mutate({id:m.id,data:m}),disabled:!m?.id||fe.isPending,className:"bg-accent text-primary font-black",children:"Guardar Cambios"})})]})]})]}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9",title:a.isActive===!1?"Activar":"Desactivar",onClick:()=>fe.mutate({id:a.id,data:{isActive:a.isActive===!1}}),children:e.jsx(Ya,{className:`w-3.5 h-3.5 md:w-4 md:h-4 ${a.isActive===!1?"text-green-600":"text-yellow-600"}`})}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9",title:"Enviar Email",onClick:()=>z({open:!0,user:a}),children:e.jsx(B,{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-blue-600"})}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9 hidden sm:flex",title:"Solicitar Documento",onClick:()=>K({open:!0,user:a}),children:e.jsx(We,{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-orange-600"})}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9 hidden sm:flex",title:"Enviar Nota",onClick:()=>me({open:!0,user:a}),children:e.jsx(ke,{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-purple-600"})}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9 text-red-600",title:"Eliminar",onClick:()=>confirm("¿Eliminar este usuario permanentemente?")&&ja.mutate(a.id),children:e.jsx(Se,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]})},a.id)),!Ke?.length&&e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No hay usuarios"})]})})]}),U==="newsletter"&&e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:[e.jsxs(A,{className:"bg-white border-b border-gray-100 p-4 flex flex-row items-center justify-between gap-2",children:[e.jsx(T,{className:"text-lg font-black",children:"Suscriptores Newsletter"}),e.jsxs(q,{className:"bg-accent text-primary font-black",children:[J?.length||0," suscriptores"]})]}),e.jsx(y,{className:"p-0",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[J?.map(a=>e.jsxs("div",{className:"p-4 hover:bg-gray-50/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.email}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Suscrito: ",new Date(a.subscribedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9",title:"Enviar Email",onClick:()=>z({open:!0,user:{email:a.email}}),children:e.jsx(B,{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-blue-600"})}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9 text-red-600",onClick:()=>confirm("¿Eliminar suscriptor?")&&Na.mutate(a.id),children:e.jsx(Se,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]},a.id)),!J?.length&&e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No hay suscriptores"})]})})]}),U==="inbox"&&e.jsxs(u,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:[e.jsx(A,{className:"bg-white border-b border-gray-100 p-4",children:e.jsx(T,{className:"text-lg font-black",children:"Bandeja de Entrada"})}),e.jsx(y,{className:"p-0",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[Ve?.map(a=>e.jsx("div",{className:"p-4 hover:bg-gray-50/50",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(q,{variant:"outline",className:"font-mono text-xs",children:["MSG-",a.id]}),e.jsx(q,{className:`text-[10px] font-black ${a.status==="unread"?"bg-accent text-primary":"bg-gray-100"}`,children:a.status}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleString()})]}),e.jsxs("p",{className:"font-medium mt-1",children:[a.name||"Cliente"," - ",a.email]}),e.jsx("p",{className:"text-sm font-black",children:a.subject}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.content})]}),e.jsxs("div",{className:"flex items-center gap-0.5 md:gap-1",children:[e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9 text-green-600",onClick:()=>j("PATCH",`/api/admin/messages/${a.id}/status`,{status:"read"}).then(()=>P.invalidateQueries({queryKey:["/api/admin/messages"]})),children:e.jsx(Za,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9",title:"Responder",onClick:()=>z({open:!0,user:{email:a.email}}),children:e.jsx(B,{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-blue-600"})}),e.jsx(i,{size:"icon",variant:"ghost",className:"w-8 h-8 md:w-9 md:h-9 text-red-600",onClick:()=>va.mutate(a.id),children:e.jsx(Se,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]})},a.id)),!Ve?.length&&e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No hay mensajes"})]})})]})]},"admin")]})}),e.jsxs("div",{className:"space-y-6 md:gap-8 order-1 lg:order-2",children:[e.jsxs("section",{className:"bg-white p-6 md:p-8 rounded-[2rem] md:rounded-[2.5rem] shadow-sm",children:[e.jsxs("h3",{className:"text-lg md:text-xl font-black  tracking-tight text-primary mb-6 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-accent"})," Seguimiento del Pedido"]}),e.jsx("div",{className:"space-y-5 md:space-y-6",children:f&&f.length>0?e.jsx(e.Fragment,{children:Z&&Z.length>0?Z.map((a,t)=>e.jsxs("div",{className:"flex gap-4 relative",children:[t<Z.length-1&&e.jsx("div",{className:"absolute left-3 top-6 w-0.5 h-8 md:h-10 bg-gray-100"}),e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center shrink-0 z-10 bg-accent text-primary",children:e.jsx(Ce,{className:"w-3 h-3"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs md:text-sm font-black tracking-tight text-primary truncate",children:a.eventType}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:a.description}),e.jsx("p",{className:"text-[10px] text-muted-foreground/60",children:new Date(a.createdAt).toLocaleString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]})]},a.id)):e.jsx(e.Fragment,{children:[{title:"Pedido Recibido",status:f[0]?.status!=="pending"?"completed":"current",date:f[0]?.createdAt?new Date(f[0].createdAt).toLocaleDateString("es-ES"):"Pendiente"},{title:"Verificación de Datos",status:f[0]?.application?.status==="submitted"?"completed":"pending",date:f[0]?.application?.status==="submitted"?"Completado":"Pendiente"},{title:"Presentación Estatal",status:f[0]?.application?.status==="filed"?"completed":"pending",date:"Pendiente"},{title:"LLC Constituida",status:"pending",date:"Pendiente"}].map((a,t)=>e.jsxs("div",{className:"flex gap-4 relative",children:[t<3&&e.jsx("div",{className:"absolute left-3 top-6 w-0.5 h-8 md:h-10 bg-gray-100"}),e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center shrink-0 z-10 ${a.status==="completed"?"bg-accent text-primary":a.status==="current"?"bg-accent/50 text-primary animate-pulse":"bg-gray-100 text-gray-400"}`,children:a.status==="completed"?e.jsx(Ce,{className:"w-3 h-3"}):null}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs md:text-sm font-black tracking-tight ${a.status==="pending"?"text-gray-400":"text-primary"} truncate`,children:a.title}),e.jsx("p",{className:"text-[10px] md:text-xs font-black text-muted-foreground",children:a.date})]})]},t))})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Qe,{className:"w-8 h-8 text-gray-200 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No tienes pedidos activos"})]})})]}),e.jsxs("section",{className:"bg-accent/10 p-6 md:p-8 rounded-[2rem] md:rounded-[2.5rem] border-2 border-accent/20",children:[e.jsx("h3",{className:"text-base md:text-lg font-black  tracking-tight text-primary mb-3 md:mb-4",children:"¿Necesitas ayuda?"}),e.jsx("p",{className:"text-xs md:text-sm text-primary/70 font-medium mb-5 md:mb-6 leading-relaxed",children:"Nuestro equipo de expertos está listo para resolver tus dudas sobre la LLC."}),e.jsx("a",{href:"https://wa.me/34614916910",target:"_blank",rel:"noopener noreferrer",children:e.jsx(i,{className:"w-full bg-accent text-primary font-black rounded-full py-5 md:py-6 text-sm",children:"Contactar Soporte"})})]})]})]})]}),s?.isAdmin&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{open:k.open,onOpenChange:a=>z({open:a,user:a?k.user:null}),children:e.jsxs(G,{children:[e.jsxs(W,{children:[e.jsx(Y,{children:"Enviar Email"}),e.jsxs(le,{children:["Enviar email a ",k.user?.email]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Asunto"}),e.jsx(p,{value:de,onChange:a=>Ee(a.target.value),placeholder:"Asunto del email"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Mensaje"}),e.jsx(Q,{value:ce,onChange:a=>De(a.target.value),placeholder:"Escribe tu mensaje...",rows:5})]}),e.jsx(X,{children:e.jsxs(i,{onClick:()=>k.user?.email&&be.mutate({to:k.user.email,subject:de,message:ce}),disabled:!k.user?.email||!de||!ce||be.isPending,className:"bg-accent text-primary font-black",children:[be.isPending?e.jsx(Pe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(B,{className:"w-4 h-4 mr-2"}),"Enviar Email"]})})]})]})}),e.jsx(ne,{open:C.open,onOpenChange:a=>K({open:a,user:a?C.user:null}),children:e.jsxs(G,{children:[e.jsxs(W,{children:[e.jsx(Y,{children:"Solicitar Documento"}),e.jsxs(le,{children:["Solicitar documento a ",C.user?.email]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Tipo de Documento"}),e.jsxs(ae,{value:oe,onValueChange:Ae,children:[e.jsx(se,{children:e.jsx(te,{placeholder:"Selecciona tipo..."})}),e.jsxs(ie,{children:[e.jsx(b,{value:"DNI/Pasaporte",children:"DNI/Pasaporte"}),e.jsx(b,{value:"Comprobante de domicilio",children:"Comprobante de domicilio"}),e.jsx(b,{value:"Documento de identidad adicional",children:"Documento adicional"}),e.jsx(b,{value:"Formulario firmado",children:"Formulario firmado"}),e.jsx(b,{value:"Otro",children:"Otro"})]})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Mensaje adicional (opcional)"}),e.jsx(Q,{value:Te,onChange:a=>Le(a.target.value),placeholder:"Instrucciones adicionales...",rows:3})]}),e.jsx(X,{children:e.jsxs(i,{onClick:()=>C.user?.email&&je.mutate({email:C.user.email,documentType:oe,message:Te}),disabled:!C.user?.email||!oe||je.isPending,className:"bg-accent text-primary font-black",children:[je.isPending?e.jsx(Pe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(We,{className:"w-4 h-4 mr-2"}),"Solicitar Documento"]})})]})]})}),e.jsx(ne,{open:S.open,onOpenChange:a=>me({open:a,user:a?S.user:null}),children:e.jsxs(G,{children:[e.jsxs(W,{children:[e.jsx(Y,{children:"Enviar Nota al Cliente"}),e.jsxs(le,{children:["Enviar nota a ",S.user?.firstName," ",S.user?.lastName," (",S.user?.email,")"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Tipo de Nota"}),e.jsxs(ae,{value:Ie,onValueChange:Re,children:[e.jsx(se,{children:e.jsx(te,{})}),e.jsxs(ie,{children:[e.jsx(b,{value:"info",children:"Información"}),e.jsx(b,{value:"action_required",children:"Acción Requerida"}),e.jsx(b,{value:"update",children:"Actualización"})]})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Título"}),e.jsx(p,{value:xe,onChange:a=>Me(a.target.value),placeholder:"Título de la nota"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Mensaje"}),e.jsx(Q,{value:ue,onChange:a=>Fe(a.target.value),placeholder:"Escribe tu mensaje...",rows:4})]}),e.jsx(X,{children:e.jsxs(i,{onClick:()=>S.user?.id&&S.user?.email&&Ne.mutate({userId:S.user.id,email:S.user.email,title:xe,message:ue,type:Ie}),disabled:!S.user?.id||!S.user?.email||!xe||!ue||Ne.isPending,className:"bg-accent text-primary font-black",children:[Ne.isPending?e.jsx(Pe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Enviar Nota"]})})]})]})})]}),e.jsx(Ta,{})]})}export{ps as default};
