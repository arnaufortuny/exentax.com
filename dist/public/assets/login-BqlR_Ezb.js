import{j as e}from"./vendor-rACX9Y5t.js";import{a as c,am as f,an as j,s as b}from"./ui-BDRs75dM.js";import{u as g,F as N,t as y,o as v,s as l}from"./form-BTpaeBvT.js";import{u as w,c as S,N as E,L as m,B as L,F as k,d as C,q as F}from"./index-BmcZvhzO.js";import{F as d}from"./form-input-jX--FoeL.js";import"./textarea-CkuaKn8P.js";import"./select-Dc_JaQim.js";import"./checkbox-CRSq1QK8.js";import"./label-Cp9cVBxA.js";const q=v({email:l().email("Email inválido"),password:l().min(1,"Contraseña requerida")});function K(){const[,u]=w(),[t,r]=c.useState(!1),[s,x]=c.useState(!1),{toast:i}=S(),a=g({resolver:y(q),defaultValues:{email:"",password:""}}),p=async h=>{r(!0);try{const n=await(await C("POST","/api/auth/login",h)).json();n.success&&(await F.refetchQueries({queryKey:["/api/auth/user"]}),i({title:"Sesión iniciada",variant:"success"}),u(n.user.isAdmin?"/admin":"/dashboard"))}catch(o){i({title:"Error",description:o.message||"Email o contraseña incorrectos",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background font-sans",children:[e.jsx(E,{}),e.jsx("main",{className:"pt-24 pb-16 px-4 flex flex-col items-center justify-center min-h-[80vh]",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-black text-primary tracking-tight",children:["Iniciar ",e.jsx("span",{className:"text-accent",children:"Sesión"})]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Accede a tu área de cliente"})]}),e.jsxs("div",{children:[e.jsx(N,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(p),className:"space-y-6",children:[e.jsx(d,{control:a.control,name:"email",label:"Email",type:"email",inputMode:"email",placeholder:"tu@email.com"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{control:a.control,name:"password",label:"Contraseña",type:s?"text":"password",placeholder:"Tu contraseña"}),e.jsx("button",{type:"button",onClick:()=>x(!s),className:"absolute right-4 top-[42px] text-muted-foreground hover:text-primary transition-colors","aria-label":s?"Ocultar contraseña":"Mostrar contraseña",children:s?e.jsx(f,{className:"w-5 h-5"}):e.jsx(j,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-right",children:e.jsx(m,{href:"/forgot-password",children:e.jsx("span",{className:"text-sm font-medium text-accent hover:underline cursor-pointer",children:"¿Olvidaste tu contraseña?"})})}),e.jsx(L,{type:"submit",disabled:t,className:"w-full bg-[#6EDC8A] text-primary font-black py-7 rounded-full text-lg shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all","data-testid":"button-login",children:t?e.jsx(b,{className:"animate-spin"}):"Iniciar Sesión"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-muted-foreground text-sm",children:["¿No tienes cuenta?"," ",e.jsx(m,{href:"/register",children:e.jsx("span",{className:"font-black text-primary hover:text-accent transition-colors cursor-pointer",children:"Regístrate"})})]})})]})]})}),e.jsx(k,{})]})}export{K as default};
