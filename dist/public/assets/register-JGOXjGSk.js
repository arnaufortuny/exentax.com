import{j as e,m as c,A as $}from"./vendor-rACX9Y5t.js";import{a as l,w as T,s as D,U as K,M as Q,x as J,J as Y,ao as G,am as H,an as W,ap as X,aq as Z}from"./ui-BDRs75dM.js";import{u as ee,F as se,b as o,c as d,d as m,e as f,f as x,a as ae,t as te,o as re,s as u}from"./form-BTpaeBvT.js";import{u as ie,c as ne,N as P,I as p,B as i,L as N,F as I,d as y,q as L}from"./index-BmcZvhzO.js";import"./label-Cp9cVBxA.js";const ce=re({firstName:u().min(1,"Nombre requerido"),lastName:u().min(1,"Apellido requerido"),email:u().email("Email inválido"),phone:u().min(6,"Teléfono requerido"),businessActivity:u().optional(),password:u().min(8,"La contraseña debe tener al menos 8 caracteres"),confirmPassword:u()}).refine(g=>g.password===g.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]}),le=["E-commerce / Tienda online","Dropshipping","Consultoría / Servicios profesionales","Marketing digital / Agencia","Desarrollo de software / IT","Inversiones / Trading","Bienes raíces / Real estate","Importación / Exportación","Coaching / Formación online","Creador de contenido / Influencer","Otro"],b=6;function fe(){const[,g]=ie(),[t,v]=l.useState(0),[w,C]=l.useState(!1),[h,V]=l.useState(!1),[R,F]=l.useState(!1),[j,q]=l.useState(""),[k,A]=l.useState(!1),[E,S]=l.useState(!1),{toast:n}=ne(),a=ee({resolver:te(ce),defaultValues:{firstName:"",lastName:"",email:"",phone:"",businessActivity:"",password:"",confirmPassword:""}}),M={0:["firstName","lastName"],1:["email"],2:["phone"],3:[],4:["password","confirmPassword"]},O=async()=>{const s=M[t]||[];await a.trigger(s)&&t<b-1&&v(t+1)},z=()=>{t>0&&v(t-1)},B=async s=>{C(!0);try{(await(await y("POST","/api/auth/register",{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,businessActivity:s.businessActivity||null,password:s.password})).json()).success&&(await L.refetchQueries({queryKey:["/api/auth/user"]}),F(!0),n({title:"Cuenta creada",description:"Revisa tu email para el código de verificación"}))}catch(r){n({title:"Error",description:r.message||"Error al crear la cuenta",variant:"destructive"})}finally{C(!1)}},U=async()=>{if(!j||j.length<6){n({title:"Introduce el código de 6 dígitos",variant:"destructive"});return}A(!0);try{(await(await y("POST","/api/auth/verify-email",{code:j})).json()).success&&(await L.refetchQueries({queryKey:["/api/auth/user"]}),n({title:"Email verificado correctamente"}),g("/dashboard"))}catch(s){n({title:"Código incorrecto",description:s.message||"Inténtalo de nuevo o solicita un nuevo código",variant:"destructive"})}finally{A(!1)}},_=async()=>{S(!0);try{await y("POST","/api/auth/resend-verification"),n({title:"Código enviado",description:"Revisa tu email"})}catch{n({title:"Error",description:"No se pudo enviar el código",variant:"destructive"})}finally{S(!1)}};return R?e.jsxs("div",{className:"min-h-screen bg-background font-sans",children:[e.jsx(P,{}),e.jsx("main",{className:"pt-24 pb-16 px-4 flex flex-col items-center justify-center min-h-[80vh]",children:e.jsxs(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-[#6EDC8A] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"w-8 h-8 text-primary"})}),e.jsxs("h1",{className:"text-2xl sm:text-3xl font-black text-primary tracking-tight",children:["Verifica tu ",e.jsx("span",{className:"text-accent",children:"Email"})]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Te hemos enviado un código de verificación"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-black text-primary block mb-2",children:"Código de verificación"}),e.jsx(p,{value:j,onChange:s=>q(s.target.value.replace(/\D/g,"")),className:"rounded-full text-center text-2xl font-black border-gray-200 focus:border-accent tracking-[0.5em]",placeholder:"000000",maxLength:6,inputMode:"numeric",autoComplete:"one-time-code","data-testid":"input-verification-code"})]}),e.jsx(i,{onClick:U,disabled:k||j.length<6,size:"lg",className:"w-full bg-accent text-primary font-black rounded-full","data-testid":"button-verify",children:k?e.jsx(D,{className:"animate-spin"}):"Verificar Email"}),e.jsx("div",{className:"text-center",children:e.jsx(i,{variant:"link",onClick:_,disabled:E,className:"text-accent","data-testid":"button-resend-code",children:E?"Enviando...":"Reenviar código"})}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-100",children:e.jsx(N,{href:"/dashboard",children:e.jsx(i,{variant:"link",className:"text-muted-foreground","data-testid":"button-verify-later",children:"Verificar más tarde"})})})]})]})}),e.jsx(I,{})]}):e.jsxs("div",{className:"min-h-screen bg-background font-sans",children:[e.jsx(P,{}),e.jsx("main",{className:"pt-24 pb-16 px-4 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-black text-primary tracking-tight",children:["Crear ",e.jsx("span",{className:"text-accent",children:"Cuenta"})]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Regístrate para gestionar tu LLC"})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Array.from({length:b}).map((s,r)=>e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${r===t?"w-8 bg-[#6EDC8A]":r<t?"w-2 bg-[#6EDC8A]":"w-2 bg-gray-200"}`},r))}),e.jsx(se,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(B),className:"space-y-6",children:[e.jsxs($,{mode:"wait",children:[t===0&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#6EDC8A]/20 rounded-full flex items-center justify-center",children:e.jsx(K,{className:"w-5 h-5 text-[#6EDC8A]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"¿Cómo te llamas?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tu nombre completo"})]})]}),e.jsx(o,{control:a.control,name:"firstName",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{className:"font-black text-primary",children:"Nombre"}),e.jsx(f,{children:e.jsx(p,{...s,className:"rounded-full border-gray-200 focus:border-accent",placeholder:"Tu nombre","data-testid":"input-firstName"})}),e.jsx(x,{})]})}),e.jsx(o,{control:a.control,name:"lastName",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{className:"font-black text-primary",children:"Apellido"}),e.jsx(f,{children:e.jsx(p,{...s,className:"rounded-full border-gray-200 focus:border-accent",placeholder:"Tu apellido","data-testid":"input-lastName"})}),e.jsx(x,{})]})})]},"step-0"),t===1&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#6EDC8A]/20 rounded-full flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-[#6EDC8A]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Para acceder a tu cuenta"})]})]}),e.jsx(o,{control:a.control,name:"email",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{className:"font-black text-primary",children:"Email"}),e.jsx(f,{children:e.jsx(p,{...s,type:"email",inputMode:"email",className:"rounded-full border-gray-200 focus:border-accent",placeholder:"tu@email.com","data-testid":"input-email"})}),e.jsx(x,{})]})})]},"step-1"),t===2&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#6EDC8A]/20 rounded-full flex items-center justify-center",children:e.jsx(J,{className:"w-5 h-5 text-[#6EDC8A]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu teléfono"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Para contactarte si es necesario"})]})]}),e.jsx(o,{control:a.control,name:"phone",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{className:"font-black text-primary",children:"Teléfono"}),e.jsx(f,{children:e.jsx(p,{...s,type:"tel",inputMode:"tel",className:"rounded-full border-gray-200 focus:border-accent",placeholder:"+34 600 000 000","data-testid":"input-phone"})}),e.jsx(x,{})]})})]},"step-2"),t===3&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#6EDC8A]/20 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5 text-[#6EDC8A]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu actividad"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Opcional - Ayuda a personalizar tu experiencia"})]})]}),e.jsx(o,{control:a.control,name:"businessActivity",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{className:"font-black text-primary",children:"¿A qué te dedicas?"}),e.jsx(ae,{className:"text-sm text-muted-foreground mb-3",children:"Selecciona la opción que mejor describa tu negocio"}),e.jsx("div",{className:"grid gap-2 max-h-[300px] overflow-y-auto pr-2",children:le.map(r=>e.jsx(i,{type:"button",variant:"outline",onClick:()=>a.setValue("businessActivity",r),className:`w-full justify-start text-left rounded-xl toggle-elevate ${s.value===r?"toggle-elevated border-accent bg-accent/10":""}`,"data-testid":`button-activity-${r.toLowerCase().replace(/[^a-z0-9]/g,"-")}`,children:r},r))}),e.jsx(x,{})]})})]},"step-3"),t===4&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#6EDC8A]/20 rounded-full flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-[#6EDC8A]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu contraseña"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mínimo 8 caracteres"})]})]}),e.jsx(o,{control:a.control,name:"password",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{className:"font-black text-primary",children:"Contraseña"}),e.jsx(f,{children:e.jsxs("div",{className:"relative",children:[e.jsx(p,{...s,type:h?"text":"password",className:"rounded-full pr-12 border-gray-200 focus:border-accent",placeholder:"Mínimo 8 caracteres","data-testid":"input-password"}),e.jsx(i,{type:"button",variant:"ghost",size:"icon",onClick:()=>V(!h),className:"absolute right-2 top-1/2 -translate-y-1/2","aria-label":h?"Ocultar contraseña":"Mostrar contraseña","data-testid":"button-toggle-password",children:h?e.jsx(H,{className:"w-5 h-5"}):e.jsx(W,{className:"w-5 h-5"})})]})}),e.jsx(x,{})]})}),e.jsx(o,{control:a.control,name:"confirmPassword",render:({field:s})=>e.jsxs(d,{children:[e.jsx(m,{className:"font-black text-primary",children:"Confirmar Contraseña"}),e.jsx(f,{children:e.jsx(p,{...s,type:h?"text":"password",className:"rounded-full border-gray-200 focus:border-accent",placeholder:"Repite tu contraseña","data-testid":"input-confirmPassword"})}),e.jsx(x,{})]})})]},"step-4"),t===5&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#6EDC8A]/20 rounded-full flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-[#6EDC8A]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Confirmar registro"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revisa tus datos"})]})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Nombre"}),e.jsxs("span",{className:"font-medium text-primary",children:[a.getValues("firstName")," ",a.getValues("lastName")]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("span",{className:"font-medium text-primary",children:a.getValues("email")})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Teléfono"}),e.jsx("span",{className:"font-medium text-primary",children:a.getValues("phone")})]}),a.getValues("businessActivity")&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Actividad"}),e.jsx("span",{className:"font-medium text-primary text-right max-w-[200px]",children:a.getValues("businessActivity")})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Al registrarte aceptas nuestros"," ",e.jsx(N,{href:"/terminos","data-testid":"link-terms",children:e.jsx("span",{className:"text-accent underline cursor-pointer",children:"Términos y Condiciones"})})," ","y"," ",e.jsx(N,{href:"/privacidad","data-testid":"link-privacy",children:e.jsx("span",{className:"text-accent underline cursor-pointer",children:"Política de Privacidad"})})]})]},"step-5")]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[t>0&&e.jsxs(i,{type:"button",variant:"outline",size:"lg",onClick:z,className:"flex-1 rounded-full font-black","data-testid":"button-prev",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Atrás"]}),t<b-1?e.jsxs(i,{type:"button",size:"lg",onClick:O,className:"flex-1 bg-accent text-primary font-black rounded-full","data-testid":"button-next",children:["Siguiente",e.jsx(Z,{className:"w-4 h-4 ml-2"})]}):e.jsx(i,{type:"submit",size:"lg",disabled:w,className:"flex-1 bg-accent text-primary font-black rounded-full","data-testid":"button-register",children:w?e.jsx(D,{className:"animate-spin"}):"Crear Cuenta"})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-muted-foreground text-sm",children:["¿Ya tienes cuenta?"," ",e.jsx(N,{href:"/login","data-testid":"link-login",children:e.jsx("span",{className:"font-black text-primary underline cursor-pointer",children:"Inicia Sesión"})})]})})]})}),e.jsx(I,{})]})}export{fe as default};
