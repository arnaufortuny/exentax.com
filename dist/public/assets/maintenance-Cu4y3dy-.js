import{a as x,j as e,i as le,t as P,E as ye,x as we}from"./react-vendor-DySzTZYh.js";import{u as ke,m as Ce}from"./vendor-CfPiAaHv.js";import{a as Ee,t as Se}from"./forms-BCWHroEx.js";import{u as Ae,N as Ve,F as Pe,a as S}from"./index-CIBZtyMu.js";import{u as ze,S as De,F as Le,i as k,e as l,f as i,h as c,j as h,B as r,g as p,I as w,m as G,n as H,o as W,p as Q,q as v,l as ce,k as T}from"./ui-components-tQHy3as0.js";import{u as Fe}from"./use-form-draft-Bawlwigz.js";import{o as Te,b as K,s as m}from"./validation-D376FIhw.js";import"./tanstack-Be0kG5UR.js";import"./i18n-BSAMEAt_.js";import"./radix-ui-CBW9IaP7.js";const Ie=12,Me=Te({creationSource:m().min(1,"Este campo es obligatorio"),ownerFullName:m().min(1,"Este campo es obligatorio"),ownerPhone:m().min(1,"Este campo es obligatorio"),ownerEmail:m().email("Email inválido"),companyName:m().min(1,"Este campo es obligatorio"),ein:m().min(1,"Este campo es obligatorio"),state:m().min(1,"Este campo es obligatorio"),creationYear:m().optional(),bankAccount:m().optional(),paymentGateway:m().optional(),businessActivity:m().min(1,"Este campo es obligatorio"),expectedServices:m().min(1,"Este campo es obligatorio"),wantsDissolve:m().min(1,"Este campo es obligatorio"),notes:m().optional(),password:m().min(8,"Mínimo 8 caracteres").optional(),confirmPassword:m().optional(),paymentMethod:m().optional(),discountCode:m().optional(),authorizedManagement:K().refine(u=>u===!0,"Debes autorizar"),termsConsent:K().refine(u=>u===!0,"Debes aceptar"),dataProcessingConsent:K().refine(u=>u===!0,"Debes aceptar")}).refine(u=>!u.password||u.password===u.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]});function et(){const{user:u,isAuthenticated:C,refetch:ie}=Ae(),[,I]=ke(),[n,E]=x.useState(0),[Oe,Re]=x.useState(null),[Ue,_]=x.useState(""),{toast:d}=ze(),[A,M]=x.useState(""),[de,O]=x.useState(!1),[z,R]=x.useState(!1),[U,J]=x.useState(!1),[q,X]=x.useState(!1),[f,D]=x.useState(null),[Z,ee]=x.useState(!1),V=new URLSearchParams(window.location.search).get("state")||"New Mexico",a=Ee({resolver:Se(Me),defaultValues:{creationSource:"",ownerFullName:"",ownerPhone:"",ownerEmail:"",companyName:"",ein:"",state:V,creationYear:"",bankAccount:"",paymentGateway:"",businessActivity:"",expectedServices:"",wantsDissolve:"No",notes:"",password:"",confirmPassword:"",paymentMethod:"transfer",discountCode:"",authorizedManagement:!1,termsConsent:!1,dataProcessingConsent:!1}}),te=x.useRef(n);n>te.current,x.useEffect(()=>{te.current=n},[n]);const xe={creationSource:"",ownerFullName:"",ownerPhone:"",ownerEmail:"",companyName:"",ein:"",state:V,creationYear:"",bankAccount:"",paymentGateway:"",businessActivity:"",expectedServices:"",wantsDissolve:"No",notes:"",authorizedManagement:!1,termsConsent:!1,dataProcessingConsent:!1},{clearDraft:ae}=Fe({form:a,storageKey:"maintenance-application-draft",debounceMs:1e3,defaultValues:xe});x.useEffect(()=>{if(C&&u){const t=`${u.firstName||""} ${u.lastName||""}`.trim(),s=u.email||"",o=u.phone||"",b=u.businessActivity||"";a.reset({...a.getValues(),ownerFullName:t,ownerEmail:s,ownerPhone:o,businessActivity:b});const y=[{step:0,value:""},{step:1,value:t},{step:2,value:o},{step:3,value:s},{step:4,value:""}];for(const N of y)if(!N.value){E(N.step);return}E(4)}},[C,u,a]);const[$e,se]=x.useState(!1),[ne,me]=x.useState(""),[re,oe]=x.useState(!1),[L,$]=x.useState(!1),[B,ue]=x.useState(!1),pe=async t=>{oe(!0);try{const o=await(await S("POST","/api/auth/check-email",{email:t})).json();return se(o.exists),me(o.firstName||""),o.exists}catch{return!1}finally{oe(!1)}},be=a.watch("state"),F={"New Mexico":53900,Wyoming:69900,Delaware:89900}[be]||53900,he=async t=>{if(!t.trim()){D(null);return}ee(!0);try{const o=await(await S("POST","/api/discount-codes/validate",{code:t.trim(),orderAmount:F})).json();D(o),o.valid?d({title:"Descuento aplicado",description:`Se ha aplicado correctamente a tu pedido (${(o.discountAmount/100).toFixed(2)}€)`}):d({title:"Código no válido",description:"El descuento introducido no es correcto",variant:"destructive"})}catch{D({valid:!1,discountAmount:0,message:"Error al validar"})}finally{ee(!1)}},fe=a.watch("ownerEmail");x.useEffect(()=>{O(!1),R(!1),M("")},[fe]);const ge=async()=>{const t=a.getValues("ownerEmail");if(!t){d({title:"Falta tu email",description:"Necesitamos tu email para continuar",variant:"destructive"});return}J(!0);try{const s=await S("POST","/api/register/send-otp",{email:t});if(s.ok)O(!0),d({title:"Código enviado",description:"Revisa tu correo, te esperamos aquí"});else{const o=await s.json();d({title:"Error",description:o.message,variant:"destructive"})}}catch{d({title:"Error al enviar",description:"Inténtalo de nuevo en unos segundos",variant:"destructive"})}finally{J(!1)}},je=async()=>{const t=a.getValues("ownerEmail");if(!A||A.length!==6){d({title:"Falta el código",description:"Introduce el código de 6 dígitos",variant:"destructive"});return}X(!0);try{const s=await S("POST","/api/register/verify-otp",{email:t,otp:A});if(s.ok)R(!0),d({title:"Email verificado",description:"Perfecto. Ya puedes continuar"});else{const o=await s.json();d({title:"Error",description:o.message,variant:"destructive"})}}catch{d({title:"Código incorrecto",description:"El código no es válido o ha caducado",variant:"destructive"})}finally{X(!1)}},Ne=async()=>{const t=a.getValues("ownerEmail"),s=a.getValues("password");if(!s||s.length<1){d({title:"Falta tu contraseña",description:"Introduce tu contraseña para continuar",variant:"destructive"});return}try{const o=await S("POST","/api/login",{email:t,password:s});if(!o.ok){const b=await o.json();d({title:"Contraseña incorrecta",description:"Revísala y vuelve a intentarlo",variant:"destructive"});return}await ie(),R(!0),d({title:"Nos alegra verte otra vez",description:"Ya puedes continuar"}),E(4)}catch{d({title:"Error de conexión",description:"Inténtalo de nuevo",variant:"destructive"})}},g=async()=>{const s={0:["creationSource"],1:["ownerFullName"],2:["ownerPhone"],3:["ownerEmail"],4:["companyName"],5:["ein"],6:["state"],7:["businessActivity"],8:["expectedServices"],9:["wantsDissolve"]}[n];if(!(s&&!await a.trigger(s))){if(n===0&&a.getValues("creationSource")?.includes("No")){d({title:"Te orientamos primero",description:"Como aún no tienes una LLC, te guiaremos en el proceso de creación."}),I("/llc/formation");return}if(n===3&&!C){const o=a.getValues("ownerEmail");if(await pe(o)){E(20);return}}if(n===9){E(C||z?11:10);return}E(o=>o+1),window.scrollTo({top:0,behavior:"instant"})}},j=()=>{n>0&&(E(t=>t-1),window.scrollTo({top:0,behavior:"instant"}))},ve=async t=>{if(!L){$(!0);try{const s=V.includes("Wyoming")?2:V.includes("Delaware")?3:1,o=t.state||V;if(C){const b={productId:s,state:o};f?.valid&&t.discountCode&&(b.discountCode=t.discountCode,b.discountAmount=f.discountAmount);const y=await S("POST","/api/maintenance/orders",b);if(!y.ok){const Y=await y.json();throw new Error(Y.message||"Error al crear pedido")}const N=await y.json();await S("PUT",`/api/maintenance/${N.application.id}`,{...t,status:"submitted"}),_(N.application.requestCode||""),d({title:"Solicitud recibida",description:"Ya estamos trabajando en ello"}),ae(),I(`/contacto?success=true&type=maintenance&orderId=${encodeURIComponent(N.application.requestCode||"")}`)}else{if(!t.password||t.password.length<8){d({title:"Contraseña demasiado corta",description:"Debe tener al menos 8 caracteres",variant:"destructive"}),$(!1);return}const b={productId:s,state:o,email:t.ownerEmail,password:t.password,ownerFullName:t.ownerFullName,paymentMethod:t.paymentMethod||"transfer"};f?.valid&&t.discountCode&&(b.discountCode=t.discountCode,b.discountAmount=f.discountAmount);const y=await S("POST","/api/maintenance/orders",b);if(!y.ok){const Y=await y.json();throw new Error(Y.message||"Error al crear pedido")}const N=await y.json();await S("PUT",`/api/maintenance/${N.application.id}`,{...t,status:"submitted"}),_(N.application.requestCode||""),d({title:"Cuenta creada y solicitud enviada",description:"Todo listo. Nos ponemos en marcha"}),ae(),I(`/contacto?success=true&type=maintenance&orderId=${encodeURIComponent(N.application.requestCode||"")}`)}}catch{d({title:"Algo no ha ido bien",description:"Inténtalo de nuevo en unos segundos",variant:"destructive"})}finally{$(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-background font-sans w-full",children:[e.jsx(Ve,{}),e.jsxs("main",{className:"pt-20 md:pt-24 pb-16 max-w-4xl mx-auto px-5 sm:px-6 md:px-8",children:[e.jsxs("h1",{className:"text-2xl md:text-4xl font-black mb-2 text-primary leading-tight text-center",children:["Cuidamos tu ",e.jsx("span",{className:"text-accent",children:"LLC"})]}),e.jsx("p",{className:"text-muted-foreground text-sm md:text-base mb-4 md:mb-6 text-center",children:"Nos encargamos del mantenimiento para que tú te centres en tu negocio."}),e.jsxs("div",{children:[e.jsx(De,{currentStep:n,totalSteps:Ie,className:"mb-6"}),e.jsx("div",{className:"space-y-6",children:e.jsx(Le,{...a,children:e.jsxs("form",{className:"space-y-6 md:space-y-8",onSubmit:a.handleSubmit(ve),children:[n===0&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"1️⃣ ¿Ya tienes una LLC creada?"}),e.jsx(k,{children:"Para saber desde dónde partimos"}),e.jsx(l,{control:a.control,name:"creationSource",render:({field:t})=>e.jsxs(i,{className:"space-y-3",children:[e.jsx(c,{children:e.jsx("div",{className:"flex flex-col gap-3",children:["Sí","No (en ese caso, te orientamos primero)"].map(s=>e.jsxs("label",{onClick:()=>t.onChange(s),className:`flex items-center justify-between gap-3 p-4 rounded-full border-2 cursor-pointer transition-all active:scale-[0.98] ${t.value===s?"border-accent bg-accent/10 dark:bg-accent/20":"border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 hover:border-accent/50"}`,children:[e.jsx("span",{className:"font-bold text-foreground text-sm md:text-base",children:s}),t.value===s&&e.jsx(le,{className:"w-5 h-5 text-accent flex-shrink-0"})]},s))})}),e.jsx(h,{})]})}),e.jsx(r,{type:"button",onClick:g,className:"w-full bg-accent hover:bg-accent/90 text-black font-bold h-12 rounded-full text-base transition-all",children:"Continuar"}),!C&&e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-border"}),e.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"o continúa de forma rápida"}),e.jsx("div",{className:"flex-1 h-px bg-border"})]}),e.jsxs(r,{type:"button",variant:"outline",onClick:()=>window.location.href="/api/auth/google",className:"w-full h-12 rounded-full border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-all font-bold flex items-center justify-center gap-3",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Acceder con Google"]}),e.jsxs("p",{className:"text-center text-xs text-muted-foreground",children:["o ",e.jsx(Ce,{href:"/auth/login",className:"text-accent font-bold underline",children:"inicia sesión"})," con email para ir más rápido"]})]})]},"step-0"),n===1&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"2️⃣ Nombre completo"}),e.jsx(k,{children:"El de los documentos oficiales"}),e.jsx(l,{control:a.control,name:"ownerFullName",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground flex items-center gap-2",children:"Nombre completo:"}),e.jsx(c,{children:e.jsx(w,{...t,className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===2&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"3️⃣ Teléfono de contacto"}),e.jsx(k,{children:"Para avisos importantes y comunicación rápida"}),e.jsx(l,{control:a.control,name:"ownerPhone",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground flex items-center gap-2",children:"Teléfono:"}),e.jsx(c,{children:e.jsx(w,{...t,className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===3&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"4️⃣ Email"}),e.jsx(k,{children:"Aquí recibirás recordatorios y documentación"}),e.jsx(l,{control:a.control,name:"ownerEmail",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground flex items-center gap-2",children:"Email:"}),e.jsx(c,{children:e.jsx(w,{...t,type:"email",inputMode:"email",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===4&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"5️⃣ Nombre legal de la LLC"}),e.jsx(k,{children:"Tal y como figura en los documentos oficiales"}),e.jsx(l,{control:a.control,name:"companyName",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground flex items-center gap-2",children:"Nombre de la LLC:"}),e.jsx(c,{children:e.jsx(w,{...t,className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===5&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"6️⃣ EIN"}),e.jsx(k,{children:"El número fiscal de tu empresa en EE. UU."}),e.jsx(l,{control:a.control,name:"ein",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground flex items-center gap-2",children:"EIN:"}),e.jsx(c,{children:e.jsx(w,{...t,className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===6&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight",children:"7️⃣ Detalles de tu LLC"}),e.jsx(k,{children:"Información sobre la constitución y situación actual"}),e.jsx(l,{control:a.control,name:"state",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground",children:"Estado de constitución"}),e.jsxs(G,{onValueChange:t.onChange,value:t.value||"",children:[e.jsx(c,{children:e.jsx(H,{className:"rounded-full h-11 md:h-14 px-4 md:px-6 border-border bg-white dark:bg-zinc-900 focus:ring-[#6EDC8A] font-bold text-foreground text-lg",children:e.jsx(W,{placeholder:"Seleccionar estado"})})}),e.jsxs(Q,{children:[e.jsx(v,{value:"New Mexico",children:"New Mexico"}),e.jsx(v,{value:"Wyoming",children:"Wyoming"}),e.jsx(v,{value:"Delaware",children:"Delaware"})]})]})]})}),e.jsx(l,{control:a.control,name:"creationYear",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground",children:"Año de creación"}),e.jsx(c,{children:e.jsx(w,{...t,className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"})}),e.jsx(h,{})]})}),e.jsx(l,{control:a.control,name:"bankAccount",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground",children:"Cuenta bancaria USA (opcional)"}),e.jsxs(G,{onValueChange:t.onChange,value:t.value||"",children:[e.jsx(c,{children:e.jsx(H,{className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:e.jsx(W,{placeholder:"Selecciona si tienes cuenta"})})}),e.jsxs(Q,{children:[e.jsx(v,{value:"Mercury",children:"Mercury"}),e.jsx(v,{value:"Relay",children:"Relay"}),e.jsx(v,{value:"Otro banco",children:"Otro banco"}),e.jsx(v,{value:"No tengo cuenta",children:"No tengo cuenta"})]})]})]})}),e.jsx(l,{control:a.control,name:"paymentGateway",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm md:text-base font-bold text-foreground",children:"Pasarela de pagos (opcional)"}),e.jsxs(G,{onValueChange:t.onChange,value:t.value||"",children:[e.jsx(c,{children:e.jsx(H,{className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:e.jsx(W,{placeholder:"Selecciona pasarela"})})}),e.jsxs(Q,{children:[e.jsx(v,{value:"Stripe",children:"Stripe"}),e.jsx(v,{value:"PayPal",children:"PayPal"}),e.jsx(v,{value:"Stripe y PayPal",children:"Stripe y PayPal"}),e.jsx(v,{value:"Otra",children:"Otra"}),e.jsx(v,{value:"Ninguna",children:"Ninguna"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===7&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight",children:"8️⃣ Actividad"}),e.jsx(k,{children:"Tipo de negocio o producto"}),e.jsx(l,{control:a.control,name:"businessActivity",render:({field:t})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(ce,{...t,className:"rounded-[2rem] min-h-[120px] p-6 border-border focus:border-accent transition-all font-bold text-foreground placeholder:text-primary/30 text-lg"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===8&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"9️⃣ ¿Qué necesitas gestionar?"}),e.jsx(k,{children:"Marca lo que aplique"}),e.jsx(l,{control:a.control,name:"expectedServices",render:({field:t})=>e.jsx(i,{className:"space-y-3",children:e.jsx(c,{children:e.jsx("div",{className:"flex flex-col gap-3",children:["Recordatorios y cumplimiento anual","Presentación de documentos obligatorios","Soporte durante el año","Revisión general de la situación de la LLC"].map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-[2rem] border border-border bg-white dark:bg-zinc-900 hover:border-accent cursor-pointer transition-all active:scale-[0.98]",children:[e.jsx(T,{checked:t.value?.split(", ").includes(s),onCheckedChange:o=>{const b=t.value?t.value.split(", "):[],y=o?[...b,s]:b.filter(N=>N!==s);t.onChange(y.join(", "))},className:"border-border data-[state=checked]:bg-accent data-[state=checked]:border-[#6EDC8A]"}),e.jsx("span",{className:"font-black text-sm text-primary",children:s})]},s))})})})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===9&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight",children:"1️⃣0️⃣ ¿Deseas disolver tu LLC?"}),e.jsx(k,{children:"Si necesitas cerrar la empresa de forma correcta y ordenada"}),e.jsx(l,{control:a.control,name:"wantsDissolve",render:({field:t})=>e.jsxs(i,{className:"space-y-3",children:[e.jsx(c,{children:e.jsx("div",{className:"flex flex-col gap-3",children:["No","Sí, quiero disolver mi LLC","Quiero que me expliquéis primero el proceso"].map(s=>e.jsxs("label",{onClick:()=>t.onChange(s),className:`flex items-center justify-between gap-3 p-4 rounded-full border-2 cursor-pointer transition-all active:scale-[0.98] ${t.value===s?"border-accent bg-accent/10 dark:bg-accent/20":"border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 hover:border-accent/50"}`,children:[e.jsx("span",{className:"font-bold text-foreground text-sm md:text-base",children:s}),t.value===s&&e.jsx(le,{className:"w-5 h-5 text-accent flex-shrink-0"})]},s))})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===10&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:"Crea tu cuenta"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Para gestionar tu pedido necesitas una cuenta. Primero verifica tu email."}),!C&&e.jsxs("div",{className:"space-y-6",children:[!z&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-800 rounded-2xl p-5",children:[e.jsx("p",{className:"text-xs font-black text-foreground tracking-widest mb-2",children:"TU EMAIL"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:a.getValues("ownerEmail")})]}),de?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-center",children:[e.jsx("span",{className:"text-2xl font-black text-green-600 block mb-2",children:"✓"}),e.jsx("p",{className:"text-sm font-bold text-green-700",children:"Código enviado a tu email"}),e.jsx("p",{className:"text-xs text-green-600",children:"Revisa tu bandeja de entrada (y spam)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-foreground tracking-widest block mb-2",children:"Código de verificación"}),e.jsx(w,{type:"text",value:A,onChange:t=>M(t.target.value.replace(/\D/g,"").slice(0,6)),className:"rounded-full p-6 border-border focus:border-accent text-center text-xl tracking-[0.5em] font-mono",maxLength:6,"data-testid":"input-otp-code"})]}),e.jsxs(r,{type:"button",onClick:je,disabled:q||A.length!==6,className:"w-full bg-accent text-primary font-black rounded-full h-14 shadow-lg shadow-[#6EDC8A]/20 disabled:opacity-50","data-testid":"button-verify-otp",children:[q?e.jsx(P,{className:"w-5 h-5 animate-spin mr-2"}):null,q?"Verificando...":"Verificar código"]}),e.jsx("button",{type:"button",onClick:()=>{O(!1),M("")},className:"text-xs text-[#6EDC8A] underline w-full text-center",children:"Reenviar código"})]}):e.jsxs(r,{type:"button",onClick:ge,disabled:U,className:"w-full bg-accent text-primary font-black rounded-full h-14 shadow-lg shadow-[#6EDC8A]/20","data-testid":"button-send-otp",children:[U?e.jsx(P,{className:"w-5 h-5 animate-spin mr-2"}):null,U?"Enviando...":"Enviar código de verificación"]})]}),z&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-center mb-4",children:[e.jsx("span",{className:"text-2xl font-black text-green-600 block mb-2",children:"✓"}),e.jsx("p",{className:"text-sm font-bold text-green-700",children:"Email verificado"})]}),e.jsx(l,{control:a.control,name:"password",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-xs font-bold text-foreground tracking-widest",children:"Contraseña"}),e.jsx(c,{children:e.jsx(w,{...t,type:"password",className:"rounded-full p-6 border-border focus:border-accent","data-testid":"input-password"})}),e.jsx(h,{})]})}),e.jsx(l,{control:a.control,name:"confirmPassword",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-xs font-bold text-foreground tracking-widest",children:"Confirmar Contraseña"}),e.jsx(c,{children:e.jsx(w,{...t,type:"password",className:"rounded-full p-6 border-border focus:border-accent","data-testid":"input-confirm-password"})}),e.jsx(h,{})]})})]})]}),C&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6 text-center",children:[e.jsx("span",{className:"text-3xl font-black text-green-600 block mb-2",children:"✓"}),e.jsx("p",{className:"text-sm font-black text-green-700",children:"Ya tienes cuenta activa"}),e.jsx("p",{className:"text-xs text-green-600",children:"Continúa con el siguiente paso"})]}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,disabled:!C&&(!z||!a.getValues("password")||a.getValues("password").length<8||a.getValues("password")!==a.getValues("confirmPassword")),className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all disabled:opacity-50","data-testid":"button-next-step-10",children:"Continuar"})]})]},"step-"+n),n===11&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground border-b border-[#6EDC8A]/20 pb-2 leading-tight",children:"1️⃣1️⃣ Método de Pago"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona cómo deseas realizar el pago del servicio de mantenimiento."}),e.jsxs("div",{className:"bg-accent text-primary p-6 rounded-[2rem] text-center mb-6",children:[e.jsx("p",{className:"text-[10px] font-black tracking-widest opacity-50 mb-1",children:"Total a pagar"}),e.jsx("p",{className:"text-3xl font-black",children:f?.valid?`${((F-f.discountAmount)/100).toFixed(2)} €`:`${(F/100).toFixed(2)} €`}),f?.valid&&e.jsxs("p",{className:"text-xs line-through opacity-60",children:[(F/100).toFixed(2)," €"]}),e.jsx("p",{className:"text-[10px] opacity-80",children:"Mantenimiento Anual"})]}),e.jsxs("div",{className:"space-y-3 p-5 rounded-2xl border-2 border-border bg-white dark:bg-zinc-900 mb-6",children:[e.jsx("label",{className:"font-bold text-foreground text-sm block",children:"Código de descuento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{control:a.control,name:"discountCode",render:({field:t})=>e.jsx(i,{className:"flex-1",children:e.jsx(c,{children:e.jsx(w,{...t,className:"rounded-full h-11 px-4 border-border focus:border-accent uppercase",onChange:s=>{t.onChange(s.target.value.toUpperCase()),D(null)},"data-testid":"input-discount-code"})})})}),e.jsx(r,{type:"button",variant:"outline",onClick:()=>he(a.getValues("discountCode")||""),disabled:Z||!a.getValues("discountCode"),className:"rounded-full h-11 px-6 font-black border-border","data-testid":"button-validate-discount",children:Z?e.jsx(P,{className:"w-4 h-4 animate-spin"}):"Aplicar"})]}),f&&e.jsx("div",{className:`text-sm p-3 rounded-xl ${f.valid?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:f.valid?`Descuento aplicado: -${(f.discountAmount/100).toFixed(2)}€`:f.message})]}),e.jsx(l,{control:a.control,name:"paymentMethod",render:({field:t})=>e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("label",{className:`flex items-start gap-4 p-5 rounded-2xl border-2 cursor-pointer transition-all ${t.value==="transfer"?"border-[#6EDC8A] bg-accent/5":"border-border bg-white dark:bg-zinc-900 hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",...t,value:"transfer",checked:t.value==="transfer",className:"w-5 h-5 accent-[#6EDC8A] mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-bold text-foreground text-sm block mb-2",children:"Transferencia Bancaria"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-800 rounded-xl p-4 text-xs space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Beneficiario:"})," ",e.jsx("span",{className:"font-bold",children:"Fortuny Consulting LLC"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Número de cuenta:"})," ",e.jsx("span",{className:"font-bold font-mono",children:"141432778929495"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Número de ruta:"})," ",e.jsx("span",{className:"font-bold font-mono",children:"121145433"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Banco:"})," ",e.jsx("span",{className:"font-bold",children:"Column N.A."})]}),e.jsx("p",{className:"opacity-60 text-[10px] pt-2",children:"1 Letterman Drive, Building A, Suite A4-700, San Francisco, CA 94129"}),e.jsx("p",{className:"pt-2 text-[#6EDC8A] font-bold",children:"Concepto: Tu número de pedido"})]})]})]}),e.jsxs("label",{className:`flex items-start gap-4 p-5 rounded-2xl border-2 cursor-pointer transition-all ${t.value==="link"?"border-[#6EDC8A] bg-accent/5":"border-border bg-white dark:bg-zinc-900 hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",...t,value:"link",checked:t.value==="link",className:"w-5 h-5 accent-[#6EDC8A] mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-bold text-foreground text-sm block mb-1",children:"Link de Pago"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recibirás un enlace de pago seguro por email para completar la transacción."})]})]})]})})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsx(r,{type:"button",onClick:g,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",children:"Continuar"})]})]},"step-"+n),n===12&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-foreground border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:"Último paso: Confirmación"}),e.jsxs("div",{className:"bg-accent/5 p-5 rounded-2xl border border-accent/20 text-xs space-y-2 mb-4",children:[e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"Nombre:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("ownerFullName")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"Email:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("ownerEmail")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"LLC:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("companyName")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"Estado:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("state")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"EIN:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("ein")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"Pago:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("paymentMethod")==="transfer"?"Transferencia Bancaria":"Link de Pago"})]})]}),e.jsx(l,{control:a.control,name:"notes",render:({field:t})=>e.jsxs(i,{children:[e.jsx(p,{className:"text-sm font-bold text-foreground",children:"Notas adicionales (opcional)"}),e.jsx(c,{children:e.jsx(ce,{...t,className:"rounded-2xl min-h-[80px] p-4 border-border focus:border-accent transition-all text-foreground"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{control:a.control,name:"authorizedManagement",render:({field:t})=>e.jsxs(i,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 rounded-2xl bg-gray-50 dark:bg-zinc-800",children:[e.jsx(c,{children:e.jsx(T,{checked:t.value,onCheckedChange:t.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(p,{className:"text-xs md:text-sm font-medium",children:"Autorizo a Easy US LLC a gestionar administrativamente mi LLC ante los organismos competentes."}),e.jsx(h,{})]})]})}),e.jsx(l,{control:a.control,name:"dataProcessingConsent",render:({field:t})=>e.jsxs(i,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 rounded-2xl bg-gray-50 dark:bg-zinc-800",children:[e.jsx(c,{children:e.jsx(T,{checked:t.value,onCheckedChange:t.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(p,{className:"text-xs md:text-sm font-medium",children:"Acepto el tratamiento de mis datos personales según la política de privacidad."}),e.jsx(h,{})]})]})}),e.jsx(l,{control:a.control,name:"termsConsent",render:({field:t})=>e.jsxs(i,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 rounded-2xl bg-gray-50 dark:bg-zinc-800",children:[e.jsx(c,{children:e.jsx(T,{checked:t.value,onCheckedChange:t.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(p,{className:"text-xs md:text-sm font-medium",children:"He leído y acepto los Términos y Condiciones de Easy US LLC."}),e.jsx(h,{})]})]})})]}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:j,className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Volver"}),e.jsxs(r,{type:"submit",disabled:L,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all disabled:opacity-50",children:[L?e.jsx(P,{className:"w-5 h-5 animate-spin mr-2"}):null,L?"Enviando...":"Enviar Solicitud"]})]})]},"step-"+n),n===20&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:"Inicia sesión"}),e.jsxs("div",{className:"bg-accent/10 border border-[#6EDC8A]/30 rounded-2xl p-5 text-center",children:[e.jsxs("p",{className:"text-sm font-bold text-foreground mb-1",children:["¡Hola",ne?`, ${ne}`:"","!"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ya tienes una cuenta con este email. Inicia sesión para continuar."})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-800 rounded-2xl p-5",children:[e.jsx("p",{className:"text-xs font-black text-foreground tracking-widest mb-2",children:"TU EMAIL"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:a.getValues("ownerEmail")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-black text-foreground tracking-widest block",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{type:B?"text":"password",value:a.getValues("password")||"",onChange:t=>a.setValue("password",t.target.value),className:"rounded-full p-6 pr-12 border-border focus:border-accent","data-testid":"input-login-password"}),e.jsx("button",{type:"button",onClick:()=>ue(!B),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:B?e.jsx(ye,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>{se(!1),E(3),a.setValue("ownerEmail","")},className:"flex-1 rounded-full h-12 font-bold border-border transition-all",children:"Usar otro email"}),e.jsxs(r,{type:"button",onClick:Ne,disabled:re,className:"flex-[2] bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all","data-testid":"button-login-submit",children:[re?e.jsx(P,{className:"w-5 h-5 animate-spin mr-2"}):null,"Iniciar sesión"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/recuperar",className:"text-xs text-[#6EDC8A] hover:underline",children:"¿Olvidaste tu contraseña?"})})]},"step-"+n)]})})})]})]}),e.jsx(Pe,{})]})}export{et as default};
