import{m as st,n as he,o as Ee,F as X,W as Ra,B as rt,j as e,d as rs,a as c,P as Kt,p as Ta,q as _t,s as Ce,U as ns,t as is,u as La,v as Qt,X as ds,w as et,i as V,x as pe,k as Ia,T as tt,y as ls,N as cs,z as Fa,A as $a,G as qa,H as os,I as ms,J as xs,K as us,O as Gt,l as Oa,Q as ps,V as hs}from"./react-core-BBz5Yun4.js";import{u as gs,a as bs,N as Ua,b as g,F as Ma,L as Se,q as h}from"./index-Ck76omkK.js";import{b as k,a as q}from"./tanstack-DqR0zzLe.js";import{C as x,n as Ht,o as Bt,a as De,P as fs,u as Va,B as s,p as E,l as J,q as n,I as o,N as D,m as l,D as T,r as L,s as I,t as F,v as Q,w as $,x as Ka}from"./ui-components-FQNmLPaU.js";import{S as js}from"./social-login-CYdfH5x_.js";import{u as Ns}from"./i18n-DPcvudMq.js";import"./react-dom-DRcJuq73.js";import"./radix-ui-C8kiJ3Dp.js";import"./forms-B1yeTFPE.js";const vs=p=>[{id:"pending",label:p("progress.orderReceived"),icon:st,description:p("progress.orderRegistered")},{id:"paid",label:p("progress.paymentConfirmed"),icon:he,description:p("progress.paymentProcessed")},{id:"processing",label:p("progress.processing"),icon:Ee,description:p("progress.preparingDocs")},{id:"filed",label:p("progress.filed"),icon:X,description:p("progress.docsSent")},{id:"completed",label:p("progress.llcActive"),icon:rt,description:p("progress.llcOperational")}],ys=p=>[{id:"pending",label:p("progress.requestReceived"),icon:st,description:p("progress.requestRegistered")},{id:"paid",label:p("progress.paymentConfirmed"),icon:he,description:p("progress.paymentProcessed")},{id:"processing",label:p("progress.inProcess"),icon:Ee,description:p("progress.managingRenewal")},{id:"filed",label:p("progress.filed"),icon:X,description:p("progress.docsUpdated")},{id:"completed",label:p("progress.completed"),icon:Ra,description:p("progress.maintenanceComplete")}],ws=["pending","paid","processing","filed","documents_ready","completed"];function ks({status:p,serviceName:r,state:O,requestCode:G,isMaintenance:w=!1}){const{t:U}=Ns(),C=w?ys(U):vs(U),K=ws.indexOf(p),b=K>=0?Math.min((K+1)/C.length*100,100):0,z=j=>p==="cancelled"?"cancelled":K<0?"pending":j<K||j===K&&p==="completed"?"completed":j===K?"current":"pending",i={new_mexico:"New Mexico",wyoming:"Wyoming",delaware:"Delaware","New Mexico":"New Mexico",Wyoming:"Wyoming",Delaware:"Delaware"};return p==="cancelled"?e.jsxs(x,{className:"border-red-200 bg-red-50 dark:bg-red-950/20 dark:border-red-900","data-testid":"widget-cancelled",children:[e.jsx(Ht,{className:"pb-2 p-3 md:p-4",children:e.jsxs(Bt,{className:"text-sm md:text-base flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsx(rs,{className:"h-4 w-4"}),U("progress.cancelled")]})}),e.jsx(De,{className:"p-3 pt-0 md:p-4 md:pt-0",children:e.jsx("p",{className:"text-xs md:text-sm text-red-600 dark:text-red-400",children:U("progress.cancelledMessage")})})]}):e.jsxs(x,{className:"overflow-hidden","data-testid":`widget-progress-${w?"maintenance":"llc"}`,children:[e.jsxs(Ht,{className:"pb-2 md:pb-3 p-3 md:p-4 bg-primary/5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs(Bt,{className:"text-sm md:text-base font-bold flex items-center gap-2",children:[w?e.jsx(Ra,{className:"h-4 w-4 md:h-5 md:w-5 text-accent"}):e.jsx(rt,{className:"h-4 w-4 md:h-5 md:w-5 text-primary"}),e.jsx("span",{className:"truncate max-w-[180px] md:max-w-none",children:r||U(w?"progress.maintenance":"progress.yourLLC")})]}),O&&e.jsx("span",{className:"text-[10px] md:text-xs bg-muted px-2 py-0.5 md:py-1 rounded-md font-medium shrink-0",children:i[O]||O})]}),G&&e.jsxs("p",{className:"text-[10px] md:text-xs text-muted-foreground mt-1",children:[U("progress.reference"),": ",G]})]}),e.jsxs(De,{className:"p-3 md:p-4 space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] md:text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:U("progress.progressLabel")}),e.jsxs("span",{className:"font-bold text-primary",children:[Math.round(b),"%"]})]}),e.jsx(fs,{value:b,className:"h-1.5 md:h-2"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-[9px] md:left-[11px] top-5 md:top-6 bottom-5 md:bottom-6 w-0.5 bg-border"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:C.map((j,u)=>{const N=z(u),Wt=j.icon;return e.jsxs("div",{className:"flex items-start gap-2 md:gap-3 relative",children:[e.jsx("div",{className:`
                    relative z-10 flex items-center justify-center w-5 h-5 md:w-6 md:h-6 rounded-full border-2 transition-colors shrink-0
                    ${N==="completed"?"bg-primary border-primary text-primary-foreground":N==="current"?"bg-primary/10 border-primary text-primary animate-pulse":"bg-background border-muted-foreground/30 text-muted-foreground"}
                  `,children:N==="completed"?e.jsx(he,{className:"h-2.5 w-2.5 md:h-3.5 md:w-3.5"}):e.jsx(Wt,{className:"h-2.5 w-2.5 md:h-3 md:w-3"})}),e.jsxs("div",{className:"flex-1 min-w-0 pb-1 md:pb-2",children:[e.jsx("p",{className:`text-xs md:text-sm font-medium leading-tight ${N==="completed"?"text-foreground":N==="current"?"text-primary font-bold":"text-muted-foreground"}`,children:j.label}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground mt-0.5 leading-tight hidden sm:block",children:j.description})]})]},j.id)})})]})]})]})}function at(p){return{pending:{label:"Pendiente",className:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300"},paid:{label:"Pagado",className:"bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300"},processing:{label:"En Proceso",className:"bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300"},documents_ready:{label:"Docs. Listos",className:"bg-cyan-100 dark:bg-cyan-900/50 text-cyan-800 dark:text-cyan-300"},completed:{label:"Completado",className:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300"},cancelled:{label:"Cancelado",className:"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400 font-black"},filed:{label:"Presentado",className:"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-800 dark:text-indigo-300"},draft:{label:"Borrador",className:"bg-gray-100 dark:bg-zinc-700 text-gray-600 dark:text-gray-300"}}[p]||{label:p,className:"bg-gray-100 dark:bg-zinc-700 text-gray-600 dark:text-gray-300"}}function Cs(){const{toast:p}=Va(),{data:r,isLoading:O}=q({queryKey:["/api/newsletter/status"]}),G=k({mutationFn:async w=>{await g("POST",w?"/api/newsletter/subscribe":"/api/newsletter/unsubscribe",w?{email:void 0}:void 0)},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/newsletter/status"]}),p({title:"Preferencias actualizadas",description:"Gracias por quedarte con nosotros"})}});return O?e.jsx("div",{className:"w-10 h-6 bg-gray-100 dark:bg-zinc-700 animate-pulse rounded-full"}):e.jsx(Ka,{checked:r?.isSubscribed,onCheckedChange:w=>G.mutate(w),disabled:G.isPending})}function Qs(){const[,p]=gs(),{user:r,isAuthenticated:O,isLoading:G}=bs(),[w,U]=c.useState("services"),[C,K]=c.useState(!1),[b,z]=c.useState({firstName:"",lastName:"",phone:"",businessActivity:"",address:"",streetType:"",city:"",province:"",postalCode:"",country:"",idNumber:"",idType:"",birthDate:""}),{toast:i}=Va(),j=r?.accountStatus==="active"||r?.accountStatus==="vip",[u,N]=c.useState(null),[Wt,Ss]=c.useState({open:!1,user:null}),[Es,Ds]=c.useState(""),[zs,As]=c.useState(""),[Ps,Ts]=c.useState(""),[ge,ze]=c.useState({open:!1,user:null}),[Ae,Jt]=c.useState(""),[Xt,Yt]=c.useState(""),[Pe,Te]=c.useState({open:!1,user:null}),[nt,Zt]=c.useState(""),[it,ea]=c.useState(""),[_a,Ls]=c.useState("info"),[ae,Le]=c.useState({open:!1,user:null}),[dt,ta]=c.useState(""),[lt,aa]=c.useState(""),[sa,ra]=c.useState("EUR"),[R,Qa]=c.useState("dashboard"),[Ga,Ie]=c.useState(!1),[B,se]=c.useState({firstName:"",lastName:"",email:"",phone:"",password:""}),[Ha,Fe]=c.useState(!1),[re,$e]=c.useState({userId:"",productId:"1",amount:"",state:"New Mexico"}),[ne,qe]=c.useState({open:!1,user:null}),[Ba,ct]=c.useState(!1),[ie,Oe]=c.useState({open:!1,file:null}),[be,na]=c.useState("passport"),[Ue,ia]=c.useState(""),[da,ot]=c.useState(!1),[la,mt]=c.useState("form"),[xt,ut]=c.useState(""),[Y,pt]=c.useState(""),[Me,ht]=c.useState(""),[gt,bt]=c.useState(""),[W,fe]=c.useState({open:!1,code:null}),[de,Re]=c.useState({open:!1,user:null}),[Ve,ft]=c.useState(""),[je,jt]=c.useState(""),[ca,Nt]=c.useState(""),[oa,ma]=c.useState(!1),[xa,ua]=c.useState(!1),[Z,Ke]=c.useState({open:!1,order:null}),[pa,vt]=c.useState("articles_of_organization"),[le,_e]=c.useState(null),[ha,ga]=c.useState(!1),[Wa,yt]=c.useState(!1),[Ne,wt]=c.useState(""),[ba,fa]=c.useState(!1),[ja,Na]=c.useState(!1),[y,_]=c.useState({code:"",discountType:"percentage",discountValue:"",minOrderAmount:"",maxUses:"",validFrom:"",validUntil:"",isActive:!0});c.useEffect(()=>{r&&z({firstName:r.firstName||"",lastName:r.lastName||"",phone:r.phone||"",businessActivity:r.businessActivity||"",address:r.address||"",streetType:r.streetType||"",city:r.city||"",province:r.province||"",postalCode:r.postalCode||"",country:r.country||"",idNumber:r.idNumber||"",idType:r.idType||"",birthDate:r.birthDate||""})},[r]);const va=k({mutationFn:async t=>{if(!j)throw new Error("No puedes modificar tus datos en el estado actual de tu cuenta.");const a=await g("PATCH","/api/user/profile",t);if(!a.ok){const m=await a.json().catch(()=>({}));throw new Error(m.message||"Error al guardar")}},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/auth/user"]}),K(!1),i({title:"Cambios guardados",description:"Tu información se ha actualizado correctamente"})},onError:t=>{i({title:"Error",description:t.message,variant:"destructive"})}});c.useEffect(()=>{!G&&!O&&p("/auth/login")},[O,G,p]);const{data:f,isLoading:Is}=q({queryKey:["/api/orders"],enabled:O,refetchInterval:3e4,staleTime:1e4}),{data:kt,isLoading:Fs}=q({queryKey:["/api/messages"],enabled:O,refetchInterval:6e4,staleTime:3e4}),[Qe,Ct]=c.useState(null),[ve,St]=c.useState(""),ya=f?.[0]?.id,{data:Ge}=q({queryKey:["/api/orders",ya,"events"],enabled:!!ya,refetchInterval:3e4,staleTime:1e4}),ce=k({mutationFn:async t=>{const a=await g("POST",`/api/messages/${t}/reply`,{content:ve});if(!a.ok){const m=await a.json().catch(()=>({}));throw new Error(m.message||"Error al enviar")}return a.json()},onSuccess:()=>{St(""),Ct(null),h.invalidateQueries({queryKey:["/api/messages"]}),h.invalidateQueries({queryKey:["/api/admin/messages"]}),i({title:r?.isAdmin?"Respuesta enviada":"Mensaje enviado",description:r?.isAdmin?"El cliente recibirá un email con la información":"Te responderemos personalmente lo antes posible"})},onError:t=>{i({title:"Error",description:t.message||"No se pudo enviar la respuesta",variant:"destructive"})}}),{data:He,isLoading:Ja}=q({queryKey:["/api/user/notifications"],enabled:O,refetchInterval:6e4,staleTime:3e4}),Xa=k({mutationFn:async t=>{if(!(await g("PATCH",`/api/user/notifications/${t}/read`)).ok)throw new Error("Error al marcar notificación")},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/user/notifications"]})},onError:()=>{}}),wa=k({mutationFn:async t=>{if(!(await g("DELETE",`/api/user/notifications/${t}`)).ok)throw new Error("Error al eliminar")},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/user/notifications"]})},onError:()=>{i({title:"Error",description:"No se pudo eliminar",variant:"destructive"})}}),{data:oe}=q({queryKey:["/api/admin/orders"],enabled:!!r?.isAdmin,refetchInterval:3e4}),{data:ka}=q({queryKey:["/api/admin/users"],enabled:!!r?.isAdmin,refetchInterval:6e4}),{data:ye}=q({queryKey:["/api/admin/newsletter"],enabled:!!r?.isAdmin}),{data:Be}=q({queryKey:["/api/admin/documents"],enabled:!!r?.isAdmin,refetchInterval:3e4}),{data:Ca}=q({queryKey:["/api/admin/invoices"],enabled:!!r?.isAdmin,refetchInterval:6e4}),{data:A}=q({queryKey:["/api/admin/system-stats"],enabled:!!r?.isAdmin,refetchInterval:1e4,staleTime:5e3}),{data:Et}=q({queryKey:["/api/admin/messages"],enabled:!!r?.isAdmin}),{data:Dt,refetch:Sa}=q({queryKey:["/api/admin/discount-codes"],enabled:!!r?.isAdmin}),[zt,Ea]=c.useState(""),[At,Da]=c.useState(""),Pt=k({mutationFn:async({subject:t,message:a})=>{if(!(await g("POST","/api/admin/newsletter/broadcast",{subject:t,message:a})).ok)throw new Error("Error al enviar")},onSuccess:()=>{i({title:"Emails enviados",description:"Se ha enviado a todos los suscriptores del newsletter"}),Ea(""),Da("")},onError:()=>{i({title:"Error",description:"No se pudieron enviar los emails",variant:"destructive"})}}),{data:Ya}=q({queryKey:["/api/user/documents"],enabled:O});k({mutationFn:async t=>{const a=await g("POST","/api/admin/documents",t);if(!a.ok){const m=await a.json().catch(()=>({}));throw new Error(m.message||"Error al subir documento")}return a.json()},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/user/documents"]}),i({title:"Documento subido",description:"El cliente ya puede verlo en su panel."})},onError:t=>{i({title:"Error",description:t.message||"No se pudo subir el documento",variant:"destructive"})}});const Za=k({mutationFn:async({id:t,status:a})=>{const m=await g("PATCH",`/api/admin/orders/${t}/status`,{status:a});if(!m.ok)throw new Error("Error al actualizar estado");return m.json()},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/orders"]}),i({title:"Estado actualizado"})},onError:()=>{i({title:"Error",description:"No se pudo actualizar el estado",variant:"destructive"})}}),we=k({mutationFn:async({appId:t,field:a,value:m})=>{if(!(await g("PATCH",`/api/admin/llc/${t}/dates`,{field:a,value:m})).ok)throw new Error("Error al actualizar fecha")},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/orders"]}),h.invalidateQueries({queryKey:["/api/orders"]}),i({title:"Fecha actualizada"})},onError:()=>{i({title:"Error",description:"No se pudo actualizar la fecha",variant:"destructive"})}}),me=k({mutationFn:async({userId:t,title:a,message:m,type:d})=>{const P=await g("POST","/api/admin/send-note",{userId:t,title:a,message:m,type:d});if(!P.ok){const M=await P.json().catch(()=>({}));throw new Error(M.message||"Error al enviar")}return P.json()},onSuccess:()=>{i({title:"Nota enviada",description:"El cliente recibirá notificación y email"}),Te({open:!1,user:null}),Zt(""),ea("")},onError:t=>{i({title:"Error",description:t.message||"No se pudo enviar la nota",variant:"destructive"})}}),We=k({mutationFn:async t=>{const{id:a,createdAt:m,...d}=t,P=["dni","nie","passport"],M=["active","pending","deactivated","vip"],v={};d.firstName!==void 0&&(v.firstName=d.firstName||void 0),d.lastName!==void 0&&(v.lastName=d.lastName||void 0),d.email!==void 0&&(v.email=d.email||void 0),d.phone!==void 0&&(v.phone=d.phone||null),d.address!==void 0&&(v.address=d.address||null),d.streetType!==void 0&&(v.streetType=d.streetType||null),d.city!==void 0&&(v.city=d.city||null),d.province!==void 0&&(v.province=d.province||null),d.postalCode!==void 0&&(v.postalCode=d.postalCode||null),d.country!==void 0&&(v.country=d.country||null),d.idNumber!==void 0&&(v.idNumber=d.idNumber||null),d.idType!==void 0&&(v.idType=P.includes(d.idType||"")?d.idType:null),d.birthDate!==void 0&&(v.birthDate=d.birthDate||null),d.businessActivity!==void 0&&(v.businessActivity=d.businessActivity||null),d.isActive!==void 0&&(v.isActive=d.isActive),d.isAdmin!==void 0&&(v.isAdmin=d.isAdmin),d.accountStatus!==void 0&&M.includes(d.accountStatus)&&(v.accountStatus=d.accountStatus),d.internalNotes!==void 0&&(v.internalNotes=d.internalNotes||null);const Ye=Object.fromEntries(Object.entries(v).filter(([S,ke])=>ke!==void 0)),te=await g("PATCH",`/api/admin/users/${a}`,Ye);if(!te.ok){const S=await te.json().catch(()=>({}));throw new Error(S.message||"Error al actualizar")}},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/users"]}),i({title:"Usuario actualizado"}),N(null)},onError:t=>{i({title:"Error",description:t.message||"No se pudo actualizar",variant:"destructive"})}}),Tt=k({mutationFn:async t=>{if(!(await g("DELETE",`/api/admin/users/${t}`)).ok)throw new Error("Error al eliminar")},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/users"]}),i({title:"Usuario eliminado"}),qe({open:!1,user:null})},onError:()=>{i({title:"Error",description:"No se pudo eliminar el usuario",variant:"destructive"})}}),[H,Je]=c.useState({open:!1,order:null}),[ee,Xe]=c.useState({open:!1,order:null}),[xe,Lt]=c.useState(""),[It,za]=c.useState("EUR"),Ft=k({mutationFn:async t=>{if(!(await g("DELETE",`/api/admin/orders/${t}`)).ok)throw new Error("Error al eliminar")},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/orders"]}),h.invalidateQueries({queryKey:["/api/orders"]}),h.invalidateQueries({queryKey:["/api/notifications"]}),h.invalidateQueries({queryKey:["/api/user/documents"]}),i({title:"Pedido eliminado",description:"El pedido y sus datos asociados han sido eliminados."}),Je({open:!1,order:null})},onError:()=>{i({title:"Error",description:"No se pudo eliminar el pedido",variant:"destructive"})}}),$t=k({mutationFn:async({userId:t,concept:a,amount:m,currency:d})=>{if(!m||isNaN(m)||m<1)throw new Error("Importe inválido (mínimo 1 céntimo)");const P=await g("POST","/api/admin/invoices/create",{userId:t,concept:a,amount:m,currency:d});if(!P.ok){const M=await P.json().catch(()=>({}));throw new Error(M.message||"Error al crear factura")}return P.json()},onSuccess:t=>{i({title:"Factura creada",description:`Factura ${t?.invoiceNumber||""} añadida al cliente`}),Le({open:!1,user:null}),ta(""),aa(""),ra("EUR"),h.invalidateQueries({queryKey:["/api/admin/documents"]})},onError:t=>{i({title:"Error",description:t.message||"No se pudo crear la factura",variant:"destructive"})}}),qt=k({mutationFn:async t=>(await g("POST","/api/admin/users/create",t)).json(),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/admin/users"]}),i({title:"Usuario creado",description:"El usuario ha sido registrado correctamente"}),Ie(!1),se({firstName:"",lastName:"",email:"",phone:"",password:""})},onError:()=>{i({title:"Error",description:"No se pudo crear el usuario",variant:"destructive"})}}),Ot=k({mutationFn:async t=>{const{userId:a,state:m,amount:d}=t;if(!a||!m||!d)throw new Error("Faltan datos requeridos");const P=await g("POST","/api/admin/orders/create",{userId:a,state:m,amount:d});if(!P.ok){const M=await P.json().catch(()=>({}));throw new Error(M.message||"Error al crear pedido")}return P.json()},onSuccess:t=>{h.invalidateQueries({queryKey:["/api/admin/orders"]}),i({title:"Pedido creado",description:`Pedido ${t?.invoiceNumber||""} registrado correctamente`}),Fe(!1),$e({userId:"",productId:"1",amount:"",state:"New Mexico"})},onError:t=>{i({title:"Error",description:t.message||"No se pudo crear el pedido",variant:"destructive"})}}),Aa=k({mutationFn:async t=>{if(!(await g("DELETE",`/api/user/documents/${t}`)).ok)throw new Error("Error al eliminar")},onSuccess:()=>{h.invalidateQueries({queryKey:["/api/user/documents"]}),i({title:"Documento eliminado"})},onError:t=>{i({title:"Error",description:t?.message||"No se pudo eliminar el documento",variant:"destructive"})}}),Ut=k({mutationFn:async()=>{if(!(await g("DELETE","/api/user/account")).ok)throw new Error("Error al eliminar")},onSuccess:()=>{i({title:"Cuenta eliminada",description:"Tu cuenta ha sido eliminada correctamente."}),window.location.href="/"},onError:()=>{i({title:"Error",description:"No se pudo eliminar la cuenta",variant:"destructive"})}}),Mt=k({mutationFn:async()=>{if(!(await g("POST","/api/user/request-password-otp")).ok)throw new Error("Error al solicitar código")},onSuccess:()=>{i({title:"Código enviado",description:"Revisa tu email para obtener el código de verificación."}),mt("otp")},onError:t=>{i({title:"Error",description:t.message||"No se pudo enviar el código",variant:"destructive"})}}),Rt=k({mutationFn:async t=>{const a=await g("POST","/api/user/change-password",t);if(!a.ok){const m=await a.json().catch(()=>({}));throw new Error(m.message||"Error al cambiar contraseña")}},onSuccess:()=>{i({title:"Contraseña actualizada",description:"Tu contraseña ha sido cambiada correctamente."}),ot(!1),mt("form"),ut(""),pt(""),ht(""),bt("")},onError:t=>{i({title:"Error",description:t.message||"No se pudo cambiar la contraseña",variant:"destructive"})}});if(G||!O)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"w-10 h-10 border-2 border-accent border-t-transparent rounded-full animate-spin"})});if(r?.accountStatus==="deactivated")return e.jsxs("div",{className:"min-h-screen bg-muted font-sans flex flex-col",children:[e.jsx(Ua,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-8 sm:py-12",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(x,{className:"rounded-2xl sm:rounded-[2rem] border-0 shadow-2xl overflow-hidden bg-white dark:bg-zinc-900",children:[e.jsx("div",{className:"bg-red-500 h-2 w-full"}),e.jsxs(De,{className:"p-6 sm:p-8 md:p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-50 dark:bg-red-950/30 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:e.jsx("span",{className:"text-2xl sm:text-3xl font-black text-red-500",children:"!"})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-black text-foreground tracking-tight mb-3 sm:mb-4",children:"Tu cuenta ha sido desactivada"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground font-medium leading-relaxed mb-6 sm:mb-8",children:"Revisa tu email, deberías haber recibido una nota de nuestro equipo con más información."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-950/30 p-3 rounded-xl",children:"No puedes realizar acciones ni contactar hasta que se resuelva tu situación."}),e.jsx(s,{variant:"outline",className:"w-full font-black text-foreground h-12 rounded-full border-2",onClick:()=>g("POST","/api/logout").then(()=>window.location.href="/"),"data-testid":"button-logout",children:"Cerrar Sesión"})]})]})]})})}),e.jsx(Ma,{})]});const es=[{id:"services",label:"Estado de mis trámites",icon:Kt,mobileLabel:"Trámites"},{id:"notifications",label:"Seguimiento",icon:Ta,mobileLabel:"Seguim."},{id:"messages",label:"Soporte",icon:_t,mobileLabel:"Soporte"},{id:"documents",label:"Documentos",icon:X,mobileLabel:"Docs"},{id:"payments",label:"Pagos",icon:st,mobileLabel:"Pagos"},{id:"calendar",label:"Calendario",icon:Ce,mobileLabel:"Fechas"},{id:"profile",label:"Mi Perfil",icon:ns,mobileLabel:"Perfil"},...r?.isAdmin?[{id:"admin",label:"Admin",icon:is,mobileLabel:"Admin"}]:[]];return e.jsxs("div",{className:"min-h-screen bg-muted bg-green-gradient font-sans",children:[e.jsx(Ua,{}),e.jsxs("main",{className:"pt-16 sm:pt-20 pb-12 px-4 md:px-8 max-w-7xl mx-auto",children:[e.jsx("header",{className:"mb-4 sm:mb-6 md:mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent font-black tracking-widest text-[10px] md:text-xs mb-0.5 md:mb-1 uppercase",children:"Área de Clientes"}),e.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-primary tracking-tighter leading-tight",children:["Bienvenido, ",(r?.firstName||"Cliente").charAt(0).toUpperCase()+(r?.firstName||"Cliente").slice(1).toLowerCase()]}),e.jsx("p",{className:"text-muted-foreground text-base sm:text-sm mt-0.5 md:mt-1 font-medium",children:"Aquí gestionas todo lo relacionado con tu LLC, de forma simple y clara."})]}),e.jsx(Se,{href:"/servicios#pricing",children:e.jsxs(s,{className:"w-full md:w-auto bg-accent hover:bg-accent/90 text-black font-bold rounded-full px-8 h-12 transition-all flex items-center justify-center gap-2",children:[e.jsx(La,{className:"w-5 h-5"})," Constituir una nueva LLC"]})})]})}),e.jsx("div",{className:"flex overflow-x-auto pb-3 mb-6 gap-1.5 no-scrollbar -mx-4 px-4 md:mx-0 md:px-0 md:gap-2 md:pb-4 md:mb-8",children:es.map(t=>e.jsxs(s,{variant:w===t.id?"default":"outline",onClick:()=>U(t.id),size:"sm",className:`flex items-center gap-1 sm:gap-2 rounded-full font-bold text-[10px] sm:text-[11px] md:text-xs tracking-tight whitespace-nowrap shrink-0 ${w===t.id?"bg-accent text-primary shadow-lg shadow-accent/20":"bg-white dark:bg-zinc-900 text-muted-foreground border-0"}`,"data-testid":`button-tab-${t.id}`,children:[e.jsx(t.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:t.label}),e.jsx("span",{className:"md:hidden",children:t.mobileLabel})]},t.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 md:space-y-6 order-1",children:[w==="services"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black text-primary tracking-tight",children:"Estado de mis trámites"}),e.jsx("p",{className:"text-[11px] md:text-xs text-muted-foreground font-medium",children:"Gestiona tus trámites activos"})]}),!f||f.length===0?e.jsx(x,{className:"rounded-2xl border-0 shadow-sm bg-white dark:bg-zinc-900 p-6 md:p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-accent/10 rounded-full flex items-center justify-center",children:e.jsx(Kt,{className:"w-6 h-6 md:w-8 md:h-8 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-black text-primary mb-1 md:mb-2 text-center",children:"Aún no tienes servicios activos"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-4 md:mb-6 text-center",children:"Empieza hoy y constituye tu LLC en EE. UU. en pocos pasos."})]}),e.jsx(Se,{href:"/servicios#pricing",children:e.jsx(s,{className:"bg-accent text-primary font-black rounded-full px-6 md:px-8 py-2.5 md:py-3 text-sm md:text-base","data-testid":"button-view-packs",children:"Ver planes disponibles"})})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:f.filter(t=>t.status!=="cancelled"&&t.status!=="completed").slice(0,4).map(t=>e.jsx(ks,{status:t.status,serviceName:t.maintenanceApplication?`Mant. ${t.maintenanceApplication.state||t.product?.name?.replace(" LLC","")||""}`:t.application?.companyName?`${t.application.companyName} LLC`:t.product?.name||"Tu LLC",state:t.application?.state||t.maintenanceApplication?.state,requestCode:t.application?.requestCode||t.maintenanceApplication?.requestCode||t.invoiceNumber,isMaintenance:!!t.maintenanceApplication},`progress-${t.id}`))}),f.length>0&&e.jsxs("div",{className:"mt-4 md:mt-6",children:[e.jsx("h3",{className:"text-xs md:text-sm font-bold text-muted-foreground mb-2 md:mb-3",children:"Todos los Pedidos"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:f.map(t=>e.jsx(x,{className:"rounded-lg md:rounded-xl border-0 shadow-sm hover:shadow-md transition-shadow bg-white dark:bg-zinc-900 overflow-hidden","data-testid":`card-order-${t.id}`,children:e.jsxs("div",{className:"flex items-center justify-between p-3 md:p-4 gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-accent uppercase tracking-wider",children:t.application?.requestCode||t.maintenanceApplication?.requestCode||t.invoiceNumber||`#${t.id}`}),e.jsx(E,{className:`${at(t.status).className} font-bold uppercase text-[8px] md:text-[9px] px-1.5 py-0`,"data-testid":`badge-order-status-${t.id}`,children:at(t.status).label})]}),e.jsx("p",{className:"text-sm md:text-base font-bold text-primary truncate",children:t.maintenanceApplication?`Mantenimiento ${t.maintenanceApplication.state||""}`:t.application?.companyName?`${t.application.companyName} LLC`:t.product?.name||"LLC pendiente"}),e.jsxs("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:[t.application?.state||t.maintenanceApplication?.state||"",t.createdAt&&` · ${new Date(t.createdAt).toLocaleDateString("es-ES")}`]})]}),t.status==="pending"&&t.application&&e.jsx(s,{variant:"outline",size:"sm",className:"text-[9px] md:text-[10px] h-7 md:h-8 px-2 md:px-3 rounded-full font-bold shrink-0",onClick:()=>window.location.href=`/llc/formation?edit=${t.application.id}`,"data-testid":`button-modify-order-${t.id}`,children:"Modificar"})]})},t.id))})]})]})]},"services"),w==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black text-primary tracking-tight",children:"Seguimiento"}),e.jsx("p",{className:"text-[11px] md:text-xs text-muted-foreground font-medium",children:"Notificaciones y actualizaciones de tus trámites"})]}),Ja?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsx("div",{className:"h-24 bg-muted rounded-2xl animate-pulse"},t))}):He?.length===0?e.jsx(x,{className:"rounded-2xl border-0 shadow-sm bg-white dark:bg-zinc-900 p-6 md:p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-accent/10 rounded-full flex items-center justify-center",children:e.jsx(Ta,{className:"w-6 h-6 md:w-8 md:h-8 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-black text-primary mb-1 md:mb-2 text-center",children:"Sin notificaciones"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground text-center",children:"Las actualizaciones de tus trámites aparecerán aquí."})]})]})}):e.jsx("div",{className:"space-y-3",children:He?.map(t=>e.jsx(x,{className:`rounded-2xl border-0 shadow-sm transition-all hover:shadow-md ${t.isRead?"":"bg-accent/5 border-l-4 border-l-accent"}`,children:e.jsx(De,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[t.orderCode&&e.jsxs("span",{className:"text-[10px] bg-primary/10 text-primary px-2 py-1 rounded-full font-black",children:["Pedido: ",t.orderCode]}),t.type==="action_required"&&e.jsx("span",{className:"text-[10px] bg-accent/20 text-primary px-2 py-1 rounded-full font-black",children:"ACCIÓN REQUERIDA"}),t.type==="update"&&e.jsx("span",{className:"text-[10px] bg-accent/20 text-primary px-2 py-1 rounded-full font-black",children:"ACTUALIZACIÓN"}),t.type==="info"&&e.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-zinc-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded-full font-black",children:"INFORMACIÓN"}),e.jsx("span",{className:"text-[10px] text-muted-foreground font-medium",children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsx("h3",{className:"font-black text-sm md:text-base",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.message}),t.type==="action_required"&&r?.accountStatus!=="deactivated"&&e.jsxs(s,{className:"mt-3 bg-accent text-primary font-black rounded-full text-xs px-4 gap-2",onClick:()=>{Xa.mutate(t.id),U("documents")},"data-testid":`button-upload-document-${t.id}`,children:[e.jsx(Qt,{className:"w-3 h-3"}),"Subir Documento"]})]}),e.jsx(s,{variant:"ghost",size:"icon",className:"flex-shrink-0 h-8 w-8 text-muted-foreground hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full",onClick:()=>wa.mutate(t.id),disabled:wa.isPending,"data-testid":`button-delete-notification-${t.id}`,children:e.jsx(ds,{className:"w-4 h-4"})})]})})},t.id))})]},"notifications"),w==="messages"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black text-primary tracking-tight",children:"Mis Consultas"}),e.jsx("p",{className:"text-[11px] md:text-xs text-muted-foreground font-medium",children:"Tu historial de mensajes con nuestro equipo"})]}),e.jsx(Se,{href:"/contacto",children:e.jsx(s,{className:"bg-accent text-primary font-black rounded-full text-xs",children:"Nueva Consulta"})})]})}),e.jsx("div",{className:"space-y-4",children:!kt||kt.length===0?e.jsx(x,{className:"rounded-2xl border-0 shadow-sm bg-white dark:bg-zinc-900 p-6 md:p-8 text-center","data-testid":"widget-support-empty",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-accent/10 rounded-full flex items-center justify-center",children:e.jsx(et,{className:"w-6 h-6 md:w-8 md:h-8 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-black text-primary mb-1 md:mb-2 text-center",children:"Sin consultas activas"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-4 md:mb-6 text-center",children:"Te responderá una persona, no un bot."})]}),e.jsx("a",{href:"https://wa.me/34614916910",target:"_blank",rel:"noopener noreferrer",children:e.jsxs(s,{className:"bg-accent text-primary font-black rounded-full px-6 md:px-8 py-2.5 md:py-3 text-sm md:text-base","data-testid":"button-support-whatsapp",children:[e.jsx(et,{className:"w-4 h-4 mr-2"})," Hablar con soporte"]})})]})}):kt.map(t=>e.jsxs(x,{className:"rounded-2xl border-0 shadow-sm p-6 bg-white dark:bg-zinc-900 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Ct(Qe?.id===t.id?null:t),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-accent"}),e.jsx("h4",{className:"font-black text-primary",children:t.subject||"Sin asunto"})]}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:t.messageId||t.id})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:t.content}),Qe?.id===t.id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 space-y-4",onClick:a=>a.stopPropagation(),children:[e.jsx(J,{value:ve,onChange:a=>St(a.target.value),placeholder:"Escribe tu respuesta...",className:"rounded-xl min-h-[80px] text-sm","data-testid":"input-user-reply"}),e.jsxs(s,{onClick:()=>ce.mutate(t.id),disabled:!ve.trim()||ce.isPending,className:"bg-accent text-primary font-black rounded-full px-6","data-testid":"button-user-send-reply",children:[ce.isPending?e.jsx(V,{className:"w-4 h-4 animate-spin mr-2"}):null,"Enviar Respuesta"]})]})]},t.id))})]},"messages"),w==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black text-primary tracking-tight",children:"Centro de Documentación"}),e.jsx("p",{className:"text-[11px] md:text-xs text-muted-foreground font-medium",children:"Gestiona tus documentos y archivos"})]}),He?.some(t=>t.type==="action_required"&&!t.isRead)&&r?.accountStatus!=="deactivated"&&e.jsx(x,{className:"rounded-xl border-2 border-orange-200 bg-orange-50 dark:bg-orange-900/20 dark:border-orange-800 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-orange-800 dark:text-orange-300 text-sm",children:"Documentos Solicitados"}),e.jsx("div",{className:"mt-2 space-y-1",children:He?.filter(t=>t.type==="action_required"&&!t.isRead).map(t=>e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:t.message},t.id))}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:async t=>{const a=t.target.files?.[0];if(!a)return;const m=new FormData;m.append("file",a);try{(await fetch("/api/user/documents/upload",{method:"POST",body:m,credentials:"include"})).ok?(i({title:"Documento subido",description:"Tu documento ha sido enviado correctamente."}),h.invalidateQueries({queryKey:["/api/user/documents"]}),h.invalidateQueries({queryKey:["/api/user/notifications"]})):i({title:"Error",description:"No se pudo subir el documento",variant:"destructive"})}catch{i({title:"Error",description:"Error de conexión",variant:"destructive"})}},"data-testid":"input-upload-document"}),e.jsx(s,{variant:"outline",className:"rounded-full text-xs border-orange-300 dark:border-orange-700 text-orange-700 dark:text-orange-300",asChild:!0,children:e.jsxs("span",{children:[e.jsx(pe,{className:"w-3 h-3 mr-1"})," Subir Documento"]})})]})})]})]})}),e.jsx(x,{className:"rounded-2xl border-2 border-dashed border-accent/50 bg-accent/5 p-4 md:p-6 mb-4",children:e.jsxs("label",{className:"cursor-pointer w-full block",children:[e.jsx("input",{type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:t=>{const a=t.target.files?.[0];a&&(Oe({open:!0,file:a}),na("passport"),ia(""))},"data-testid":"input-upload-new-document"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 rounded-2xl bg-accent/20 flex items-center justify-center shrink-0",children:e.jsx(Qt,{className:"w-7 h-7 md:w-8 md:h-8 text-accent"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-black text-primary text-base md:text-lg",children:"Subir Documento"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"PDF, JPG o PNG (máx. 10MB)"})]}),e.jsxs(s,{size:"lg",className:"rounded-full font-black bg-accent text-primary shrink-0",children:[e.jsx(pe,{className:"w-5 h-5 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Subir"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ya?.map(t=>e.jsxs(x,{className:"rounded-xl md:rounded-2xl border-0 shadow-sm p-4 md:p-6 flex flex-col items-center text-center bg-white dark:bg-zinc-900",children:[e.jsx(pe,{className:"w-10 h-10 md:w-12 md:h-12 text-accent mb-3"}),e.jsx("h3",{className:"font-bold text-primary mb-1 text-xs md:text-sm line-clamp-2",children:t.fileName}),e.jsx("p",{className:"text-[9px] md:text-[10px] text-muted-foreground mb-3",children:new Date(t.createdAt||t.uploadedAt).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsxs(s,{variant:"outline",size:"sm",className:"rounded-full font-bold flex-1 text-[10px] md:text-xs",onClick:()=>window.open(t.fileUrl,"_blank"),"data-testid":`button-download-doc-${t.id}`,children:[e.jsx(Ia,{className:"w-3 h-3 mr-1"})," Descargar"]}),j&&e.jsx(s,{variant:"outline",size:"icon",className:"rounded-full text-red-500 shrink-0",onClick:()=>Aa.mutate(t.id),disabled:Aa.isPending,"data-testid":`button-delete-doc-${t.id}`,children:e.jsx(tt,{className:"w-3 h-3"})})]})]},t.id))})]},"documents"),w==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black text-primary tracking-tight",children:"Historial de Pagos"}),e.jsx("p",{className:"text-[11px] md:text-xs text-muted-foreground font-medium",children:"Tus facturas y recibos"})]}),e.jsx("div",{className:"space-y-4",children:!f||f.length===0?e.jsx(x,{className:"rounded-2xl border-0 shadow-sm bg-white dark:bg-zinc-900 p-6 md:p-8 text-center","data-testid":"widget-payments-empty",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-accent/10 rounded-full flex items-center justify-center",children:e.jsx(st,{className:"w-6 h-6 md:w-8 md:h-8 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-black text-primary mb-1 md:mb-2 text-center",children:"Sin pagos registrados"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-4 md:mb-6 text-center",children:"Tus facturas y recibos aparecerán aquí."})]}),e.jsx(Se,{href:"/servicios#pricing",children:e.jsxs(s,{className:"bg-accent text-primary font-black rounded-full px-6 md:px-8 py-2.5 md:py-3 text-sm md:text-base","data-testid":"button-view-services",children:[e.jsx(La,{className:"w-4 h-4 mr-2"})," Ver servicios"]})})]})}):f.map(t=>e.jsxs(x,{className:"rounded-2xl border-0 shadow-sm p-6 flex justify-between items-center bg-white dark:bg-zinc-900",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-black text-xs md:text-sm",children:["Factura ",t.application?.requestCode||t.maintenanceApplication?.requestCode||t.invoiceNumber]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{variant:"outline",size:"sm",onClick:()=>window.open(`/api/orders/${t.id}/invoice`,"_blank"),children:"Factura"}),e.jsx(s,{variant:"outline",size:"sm",onClick:()=>window.open(`/api/orders/${t.id}/receipt`,"_blank"),children:"Recibo"})]})]},t.id))})]},"payments"),w==="calendar"&&e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 md:mb-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black text-primary tracking-tight",children:"Calendario Fiscal"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground font-medium",children:"Fechas importantes y vencimientos de tu LLC"})]})}),f&&f.length>0?e.jsx("div",{className:"space-y-4 md:space-y-6",children:f.map(t=>{const a=t.application;if(!a)return null;const m=t.status==="cancelled",d=["pending","paid","processing"].includes(t.status),P=["Wyoming","Delaware","WY","DE"].includes(a.state),M=[{label:"Creación",fullLabel:"Creación de LLC",date:a.llcCreatedDate,icon:rt,bgColor:"bg-accent/10",textColor:"text-accent",borderColor:"border-accent/20"},{label:"Agente",fullLabel:"Renovación Agente Registrado",date:a.agentRenewalDate,icon:ls,bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-600 dark:text-blue-400",borderColor:"border-blue-200 dark:border-blue-800"},{label:"IRS 1120",fullLabel:"Formulario IRS 1120",date:a.irs1120DueDate,icon:X,bgColor:"bg-orange-50 dark:bg-orange-900/20",textColor:"text-orange-600 dark:text-orange-400",borderColor:"border-orange-200 dark:border-orange-800"},{label:"IRS 5472",fullLabel:"Formulario IRS 5472",date:a.irs5472DueDate,icon:X,bgColor:"bg-red-50 dark:bg-red-900/20",textColor:"text-red-600 dark:text-red-400",borderColor:"border-red-200 dark:border-red-800"},...P?[{label:"Anual",fullLabel:`Reporte Anual ${a.state}`,date:a.annualReportDueDate,icon:cs,bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-600 dark:text-purple-400",borderColor:"border-purple-200 dark:border-purple-800"}]:[]],v=M.some(S=>S.date),Ye=M.filter(S=>S.date).sort((S,ke)=>new Date(S.date).getTime()-new Date(ke.date).getTime()),te=Ye.find(S=>new Date(S.date)>new Date);return e.jsxs(x,{className:`rounded-xl md:rounded-2xl border shadow-sm bg-white dark:bg-zinc-900 overflow-hidden ${m?"opacity-50":""}`,children:[e.jsx(Ht,{className:"p-3 md:p-4 pb-2 md:pb-3 border-b bg-muted/30",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs(Bt,{className:"text-sm md:text-base font-black flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-accent/10 flex items-center justify-center shrink-0",children:e.jsx(rt,{className:"w-4 h-4 md:w-5 md:h-5 text-accent"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm md:text-base",children:a.companyName||"LLC en proceso"}),e.jsx("span",{className:"text-[10px] md:text-xs font-normal text-muted-foreground",children:a.state})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[m&&e.jsx(E,{variant:"destructive",className:"text-[9px] md:text-[10px]",children:"Cancelada"}),d&&e.jsx(E,{className:"text-[9px] md:text-[10px] bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",children:"En revisión"}),!m&&!d&&te&&e.jsxs(E,{className:`text-[9px] md:text-[10px] ${te.bgColor} ${te.textColor}`,children:["Próximo: ",te.label]})]})]})}),e.jsx(De,{className:"p-3 md:p-4",children:m?e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(Fa,{className:"w-10 h-10 md:w-12 md:h-12 mx-auto text-red-300 mb-2 md:mb-3"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Esta LLC fue cancelada"})]}):d?e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(Ee,{className:"w-10 h-10 md:w-12 md:h-12 mx-auto text-yellow-400 mb-2 md:mb-3"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Tu LLC está en proceso"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground mt-1",children:"Las fechas aparecerán cuando esté activa"})]}):v?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 md:gap-3",children:Ye.map((S,ke)=>{const Ze=new Date(S.date),Pa=new Date,ue=Math.ceil((Ze.getTime()-Pa.getTime())/(1e3*60*60*24)),Vt=Ze<Pa,ts=!Vt&&ue<=30,as=!Vt&&ue<=60&&ue>30,ss=S.icon;return e.jsxs("div",{className:`relative p-3 md:p-4 rounded-lg md:rounded-xl border ${S.borderColor} ${S.bgColor} transition-all hover:shadow-md`,children:[e.jsxs("div",{className:`flex items-center gap-1.5 md:gap-2 mb-2 ${S.textColor}`,children:[e.jsx(ss,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),e.jsx("span",{className:"font-bold text-[10px] md:text-xs truncate",children:S.label})]}),e.jsx("div",{className:"font-black text-xs md:text-sm text-foreground",children:Ze.toLocaleDateString("es-ES",{day:"numeric",month:"short"})}),e.jsx("div",{className:"text-[9px] md:text-[10px] text-muted-foreground",children:Ze.getFullYear()}),Vt?e.jsxs("div",{className:"mt-1.5 md:mt-2 flex items-center gap-1",children:[e.jsx($a,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-[9px] md:text-[10px] text-green-600 dark:text-green-400 font-medium",children:"Completado"})]}):ts?e.jsxs("div",{className:"mt-1.5 md:mt-2 flex items-center gap-1",children:[e.jsx(qa,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:"text-[9px] md:text-[10px] text-red-600 dark:text-red-400 font-bold",children:[ue," días"]})]}):as?e.jsxs("div",{className:"mt-1.5 md:mt-2 flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3 text-orange-500"}),e.jsxs("span",{className:"text-[9px] md:text-[10px] text-orange-600 dark:text-orange-400 font-medium",children:[ue," días"]})]}):e.jsx("div",{className:"mt-1.5 md:mt-2",children:e.jsxs("span",{className:"text-[9px] md:text-[10px] text-muted-foreground",children:[ue," días"]})})]},ke)})}):e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(Ce,{className:"w-10 h-10 md:w-12 md:h-12 mx-auto text-muted-foreground/30 mb-2 md:mb-3"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Fechas pendientes de configuración"})]})})]},t.id)})}):e.jsx(x,{className:"rounded-2xl border-0 shadow-sm bg-white dark:bg-zinc-900 p-6 md:p-8 text-center","data-testid":"widget-calendar-empty",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-accent/10 rounded-full flex items-center justify-center",children:e.jsx(Ce,{className:"w-6 h-6 md:w-8 md:h-8 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-black text-primary mb-1 md:mb-2 text-center",children:"Calendario Fiscal"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-4 md:mb-6 text-center",children:"Tus vencimientos fiscales aparecerán aquí una vez constituyas tu LLC."})]}),e.jsx(Se,{href:"/servicios#pricing",children:e.jsx(s,{className:"bg-accent text-primary font-black rounded-full px-6 md:px-8 py-2.5 md:py-3 text-sm md:text-base","data-testid":"button-start-llc-calendar",children:"Constituir mi LLC"})})]})})]},"calendar"),w==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-black text-primary tracking-tight",children:"Mi Perfil"}),e.jsx("p",{className:"text-[11px] md:text-xs text-muted-foreground font-medium",children:"Tus datos personales y configuración de cuenta"})]}),e.jsxs(x,{className:"rounded-[1.5rem] md:rounded-[2rem] border-0 shadow-sm p-6 md:p-8 bg-white dark:bg-zinc-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg md:text-xl font-black text-primary",children:"Datos Personales"}),j&&e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>K(!C),"data-testid":"button-toggle-edit",children:C?"Cancelar":"Editar"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Esta información nos permite acompañarte mejor y cumplir con los requisitos legales cuando sea necesario."}),!j&&e.jsx("div",{className:`mb-4 p-3 rounded-lg ${r?.accountStatus==="pending"?"bg-orange-50 border border-orange-200":"bg-red-50 border border-red-200"}`,children:e.jsx("p",{className:`text-sm ${r?.accountStatus==="pending"?"text-orange-700":"text-red-700"}`,children:r?.accountStatus==="pending"?"Tu cuenta está en revisión. No puedes modificar tu perfil hasta que sea verificada.":"Tu cuenta ha sido desactivada. No puedes modificar tu perfil ni enviar solicitudes."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"p-4 bg-accent/5 rounded-xl border border-accent/10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground mb-1",children:"ID Cliente"}),e.jsx("p",{className:"text-lg font-black font-mono",children:r?.clientId||r?.id?.slice(0,8).toUpperCase()})]}),e.jsxs("div",{className:"p-4 bg-accent/5 rounded-xl border border-accent/10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground mb-1",children:"Estado"}),e.jsx("p",{className:`text-lg font-black ${r?.accountStatus==="active"?"text-green-600":r?.accountStatus==="pending"?"text-orange-500":r?.accountStatus==="deactivated"?"text-red-600":r?.accountStatus==="vip"?"text-yellow-600":"text-green-600"}`,children:r?.accountStatus==="active"?"Verificado":r?.accountStatus==="pending"?"En revisión":r?.accountStatus==="deactivated"?"Desactivada":r?.accountStatus==="vip"?"VIP":"Verificado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Nombre"}),C&&j?e.jsx(o,{value:b.firstName,onChange:t=>z({...b,firstName:t.target.value}),placeholder:"Tu nombre real",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-firstname"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.firstName||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Apellidos"}),C&&j?e.jsx(o,{value:b.lastName,onChange:t=>z({...b,lastName:t.target.value}),placeholder:"Tal y como aparecen en tu documento",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-lastname"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.lastName||"-"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{children:"Email"}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg flex justify-between items-center text-sm",children:[e.jsx("span",{children:r?.email}),r?.emailVerified?e.jsx(he,{className:"w-4 h-4 text-green-500"}):e.jsx(s,{variant:"link",size:"sm",className:"text-accent p-0 h-auto text-xs font-black",onClick:()=>yt(!0),"data-testid":"button-verify-email",children:"Verificar email"})]}),!r?.emailVerified&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Tu cuenta está en revisión hasta que verifiques tu email."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Teléfono"}),C&&j?e.jsx(o,{value:b.phone,onChange:t=>z({...b,phone:t.target.value}),placeholder:"Para contactarte si es necesario",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-phone"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.phone||"No proporcionado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Tipo de documento"}),C&&j?e.jsxs(D,{value:b.idType,onValueChange:t=>z({...b,idType:t}),placeholder:"DNI · NIE · Pasaporte",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-idtype",children:[e.jsx(l,{value:"dni",children:"DNI"}),e.jsx(l,{value:"nie",children:"NIE"}),e.jsx(l,{value:"passport",children:"Pasaporte"})]}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.idType==="dni"?"DNI":r?.idType==="nie"?"NIE":r?.idType==="passport"?"Pasaporte":"No proporcionado"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Número de documento"}),C&&j?e.jsx(o,{value:b.idNumber,onChange:t=>z({...b,idNumber:t.target.value}),placeholder:"Documento de identificación",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-idnumber"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.idNumber||"No proporcionado"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Fecha de nacimiento"}),C&&j?e.jsx(o,{type:"date",value:b.birthDate,onChange:t=>z({...b,birthDate:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-birthdate"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.birthDate||"No proporcionado"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Actividad profesional"}),C&&j?e.jsxs(D,{value:b.businessActivity,onValueChange:t=>z({...b,businessActivity:t}),placeholder:"A qué te dedicas",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-activity",children:[e.jsx(l,{value:"ecommerce",children:"E-commerce"}),e.jsx(l,{value:"dropshipping",children:"Dropshipping"}),e.jsx(l,{value:"consulting",children:"Consultoría"}),e.jsx(l,{value:"marketing",children:"Marketing Digital"}),e.jsx(l,{value:"software",children:"Desarrollo de Software"}),e.jsx(l,{value:"trading",children:"Trading / Inversiones"}),e.jsx(l,{value:"freelance",children:"Freelance"}),e.jsx(l,{value:"other",children:"Otra"})]}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.businessActivity||"No proporcionado"})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h4",{className:"font-bold text-sm mb-3",children:"Dirección de residencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Tipo de vía"}),C&&j?e.jsxs(D,{value:b.streetType,onValueChange:t=>z({...b,streetType:t}),placeholder:"Calle · Avenida · Paseo · Plaza",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-street-type",children:[e.jsx(l,{value:"calle",children:"Calle"}),e.jsx(l,{value:"avenida",children:"Avenida"}),e.jsx(l,{value:"paseo",children:"Paseo"}),e.jsx(l,{value:"plaza",children:"Plaza"})]}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.streetType||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Dirección"}),C&&j?e.jsx(o,{value:b.address,onChange:t=>z({...b,address:t.target.value}),placeholder:"Calle y número",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.address||"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Ciudad"}),C&&j?e.jsx(o,{value:b.city,onChange:t=>z({...b,city:t.target.value}),placeholder:"Ciudad de residencia",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.city||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"Provincia"}),C&&j?e.jsx(o,{value:b.province,onChange:t=>z({...b,province:t.target.value}),placeholder:"Provincia o región",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.province||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"C.P."}),C&&j?e.jsx(o,{value:b.postalCode,onChange:t=>z({...b,postalCode:t.target.value}),placeholder:"Código postal",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.postalCode||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs font-bold text-muted-foreground",children:"País"}),C&&j?e.jsx(o,{value:b.country,onChange:t=>z({...b,country:t.target.value}),placeholder:"País de residencia",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base"}):e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg text-sm",children:r?.country||"-"})]})]})]}),C&&j&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(s,{onClick:()=>{va.mutate(b),K(!1)},className:"w-full bg-accent hover:bg-accent/90 text-black font-bold rounded-full h-12 transition-all",disabled:va.isPending,"data-testid":"button-save-profile",children:"Guardar cambios"}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Nuestro equipo revisará cualquier cambio antes de avanzar para asegurarnos de que todo esté correcto."})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-primary",children:"Suscripción Newsletter"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recibe noticias y consejos para tu LLC."})]}),e.jsx(Cs,{})]})}),e.jsxs("div",{className:"mt-8 pt-8 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-primary",children:"Cambiar Contraseña"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Actualiza tu contraseña de acceso."})]}),!da&&e.jsx(s,{variant:"outline",className:"rounded-full",onClick:()=>ot(!0),"data-testid":"button-show-password-form",children:"Cambiar"})]}),da&&e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-zinc-800 rounded-xl",children:[la==="form"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs",children:"Contraseña actual"}),e.jsx(o,{type:"password",value:xt,onChange:t=>ut(t.target.value),"data-testid":"input-current-password"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs",children:"Nueva contraseña"}),e.jsx(o,{type:"password",value:Y,onChange:t=>pt(t.target.value),"data-testid":"input-new-password"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs",children:"Confirmar nueva contraseña"}),e.jsx(o,{type:"password",value:Me,onChange:t=>ht(t.target.value),"data-testid":"input-confirm-password"})]}),Y&&Me&&Y!==Me&&e.jsx("p",{className:"text-xs text-red-500",children:"Las contraseñas no coinciden"}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(s,{variant:"outline",className:"rounded-full flex-1",onClick:()=>{ot(!1),ut(""),pt(""),ht("")},children:"Cancelar"}),e.jsx(s,{className:"bg-accent text-primary font-black rounded-full flex-1",onClick:()=>Mt.mutate(),disabled:!xt||!Y||Y!==Me||Y.length<8||Mt.isPending,"data-testid":"button-request-otp",children:Mt.isPending?"Enviando...":"Enviar código"})]})]}),la==="otp"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center pb-2",children:[e.jsx(_t,{className:"w-8 h-8 mx-auto text-accent mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ingresa el código de 6 dígitos enviado a tu email"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-xs",children:"Código de verificación"}),e.jsx(o,{type:"text",value:gt,onChange:t=>bt(t.target.value.replace(/\D/g,"").slice(0,6)),className:"text-center text-2xl tracking-[0.5em] font-mono",maxLength:6,inputMode:"numeric","data-testid":"input-password-otp"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(s,{variant:"outline",className:"rounded-full flex-1",onClick:()=>{mt("form"),bt("")},children:"Volver"}),e.jsx(s,{className:"bg-accent text-primary font-black rounded-full flex-1",onClick:()=>Rt.mutate({currentPassword:xt,newPassword:Y,otp:gt}),disabled:gt.length!==6||Rt.isPending,"data-testid":"button-save-password",children:Rt.isPending?"Guardando...":"Confirmar"})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-primary",children:"Cuentas Conectadas"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vincula tus cuentas sociales para iniciar sesion mas rapido."})]})}),e.jsx(js,{mode:"connect",googleConnected:!!r?.googleId,onSuccess:()=>h.refetchQueries({queryKey:["/api/auth/user"]})})]}),j&&e.jsx("div",{className:"mt-8 pt-8 border-t",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-red-600 text-sm",children:"Eliminar Cuenta"}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Esta acción es irreversible. Se eliminarán todos tus datos."})]}),e.jsxs(s,{variant:"outline",size:"sm",className:"border-red-200 text-red-600 rounded-full shrink-0",onClick:()=>ct(!0),"data-testid":"button-delete-own-account",children:[e.jsx(tt,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Eliminar"})]})]})})]})]},"profile"),w==="admin"&&r?.isAdmin&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2 mb-4 md:mb-6",children:[{id:"dashboard",label:"Métricas",mobileLabel:"Métricas",icon:os},{id:"orders",label:"Pedidos",mobileLabel:"Pedidos",icon:Kt},{id:"users",label:"Clientes",mobileLabel:"Clientes",icon:ms},{id:"facturas",label:"Facturas",mobileLabel:"Facturas",icon:xs},{id:"calendar",label:"Fechas",mobileLabel:"Fechas",icon:Ce},{id:"docs",label:"Docs",mobileLabel:"Docs",icon:X},{id:"newsletter",label:"News",mobileLabel:"News",icon:_t},{id:"inbox",label:"Inbox",mobileLabel:"Inbox",icon:et},{id:"descuentos",label:"Descuentos",mobileLabel:"Desc",icon:us}].map(t=>e.jsxs(s,{variant:R===t.id?"default":"outline",onClick:()=>Qa(t.id),size:"sm",className:`flex items-center justify-center gap-1.5 rounded-full font-bold text-[10px] sm:text-xs h-9 px-3 ${R===t.id?"bg-accent text-primary shadow-md":"bg-white dark:bg-zinc-900 text-muted-foreground border border-border hover:border-accent/50"}`,"data-testid":`button-admin-tab-${t.id}`,children:[e.jsx(t.icon,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"truncate",children:t.mobileLabel})]},t.id))}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(s,{variant:"ghost",size:"sm",className:"rounded-full text-xs font-semibold bg-white dark:bg-zinc-800 shadow-sm",onClick:()=>Ie(!0),"data-testid":"button-create-user",children:[e.jsx(Gt,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Nuevo Cliente"}),e.jsx("span",{className:"sm:hidden",children:"Cliente"})]}),e.jsxs(s,{variant:"ghost",size:"sm",className:"rounded-full text-xs font-semibold bg-white dark:bg-zinc-800 shadow-sm",onClick:()=>Fe(!0),"data-testid":"button-create-order",children:[e.jsx(Gt,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Nuevo Pedido"}),e.jsx("span",{className:"sm:hidden",children:"Pedido"})]})]}),R==="dashboard"&&e.jsxs("div",{className:"space-y-4 md:space-y-6","data-testid":"admin-dashboard-metrics",children:[e.jsxs("div",{"data-testid":"section-sales",children:[e.jsx("h3",{className:"text-sm font-bold mb-3","data-testid":"heading-sales",children:"Ventas"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3",children:[e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Total Ventas"}),e.jsx("p",{className:"text-lg md:text-2xl font-black text-green-600 dark:text-green-500","data-testid":"stat-total-sales",children:((A?.totalSales||0)/100).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Pendiente Cobro"}),e.jsx("p",{className:"text-lg md:text-2xl font-black text-green-600 dark:text-green-500","data-testid":"stat-pending-sales",children:((A?.pendingSales||0)/100).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Pedidos Totales"}),e.jsx("p",{className:"text-lg md:text-2xl font-black text-green-600 dark:text-green-500","data-testid":"stat-total-orders",children:A?.orderCount||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Conversión"}),e.jsxs("p",{className:"text-lg md:text-2xl font-black text-green-600 dark:text-green-500","data-testid":"stat-conversion",children:[A?.conversionRate||0,"%"]})]})]})]}),e.jsxs("div",{"data-testid":"section-orders",children:[e.jsx("h3",{className:"text-sm font-bold mb-3","data-testid":"heading-orders",children:"Estado de Pedidos"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:[e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Pendientes"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-pending-orders",children:A?.pendingOrders||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"En Proceso"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-processing-orders",children:A?.processingOrders||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Completados"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-completed-orders",children:A?.completedOrders||0})]})]})]}),e.jsxs("div",{"data-testid":"section-crm",children:[e.jsx("h3",{className:"text-sm font-bold mb-3","data-testid":"heading-crm",children:"Clientes (CRM)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 md:gap-3",children:[e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Total Usuarios"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-total-users",children:A?.userCount||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Activos"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-active-users",children:A?.activeAccounts||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"VIP"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-vip-users",children:A?.vipAccounts||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"En Revisión"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-pending-accounts",children:A?.pendingAccounts||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Desactivadas"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-deactivated-users",children:A?.deactivatedAccounts||0})]})]})]}),e.jsxs("div",{"data-testid":"section-communications",children:[e.jsx("h3",{className:"text-sm font-bold mb-3","data-testid":"heading-communications",children:"Comunicaciones"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3",children:[e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Suscriptores Newsletter"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-subscribers",children:A?.subscriberCount||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Mensajes Totales"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-total-messages",children:A?.totalMessages||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Mensajes Pendientes"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-pending-messages",children:A?.pendingMessages||0})]}),e.jsxs(x,{className:"p-3 md:p-4 rounded-xl border-0 shadow-sm bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Docs Pendientes"}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-green-600 dark:text-green-500","data-testid":"stat-pending-docs",children:A?.pendingDocs||0})]})]})]})]}),R==="orders"&&e.jsx(x,{className:"rounded-2xl border-0 shadow-sm p-0 overflow-hidden",children:e.jsx("div",{className:"divide-y",children:oe?.map(t=>{const a=t.application||t.maintenanceApplication,m=!!t.maintenanceApplication&&!t.application,d=a?.requestCode||t.invoiceNumber,M=a?.status==="submitted";return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("p",{className:"font-black text-sm",children:d}),e.jsx(E,{className:`text-[9px] ${m?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:m?"MANTENIMIENTO":"LLC"}),!M&&e.jsx(E,{className:"text-[9px] bg-orange-100 text-orange-700",children:"FORMULARIO INCOMPLETO"})]}),e.jsx("p",{className:"text-xs font-semibold",children:a?.ownerFullName||`${t.user?.firstName||""} ${t.user?.lastName||""}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a?.ownerEmail||t.user?.email}),a?.ownerPhone&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a.ownerPhone}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("strong",{children:"Empresa:"})," ",a?.companyName||"No especificada"," • ",e.jsx("strong",{children:"Estado:"})," ",a?.state||"N/A"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Producto:"})," ",t.product?.name," • ",e.jsx("strong",{children:"Monto:"})," ",(t.amount/100).toFixed(2),"€",t.discountCode&&e.jsxs("span",{className:"text-green-600 ml-2",children:["(Descuento: ",t.discountCode," -",(t.discountAmount/100).toFixed(2),"€)"]})]}),a?.businessCategory&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Categoría:"})," ",a.businessCategory]}),m&&a?.ein&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"EIN:"})," ",a.ein]})]}),e.jsxs(D,{value:t.status,onValueChange:v=>Za.mutate({id:t.id,status:v}),className:"w-28 h-9 rounded-full text-xs bg-white dark:bg-zinc-900 border px-3",children:[e.jsx(l,{value:"pending",children:"Pendiente"}),e.jsx(l,{value:"paid",children:"Pagado"}),e.jsx(l,{value:"filed",children:"Presentado"}),e.jsx(l,{value:"cancelled",children:"Cancelado"})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(s,{size:"sm",variant:"outline",className:"rounded-full text-xs",onClick:()=>window.open(`/api/admin/invoice/${t.id}`,"_blank"),"data-testid":`btn-view-invoice-${t.id}`,children:"Ver Factura"}),e.jsx(s,{size:"sm",className:"rounded-full text-xs bg-accent hover:bg-accent/90 text-black",onClick:()=>{Lt(((t.amount||0)/100).toFixed(2)),za("EUR"),Xe({open:!0,order:t})},"data-testid":`btn-generate-invoice-${t.id}`,children:"Generar Factura"}),e.jsx(s,{size:"sm",variant:"outline",className:"rounded-full text-xs text-red-600 border-red-200",onClick:()=>Je({open:!0,order:t}),"data-testid":`btn-delete-order-${t.id}`,children:"Eliminar"})]})]},t.id)})})}),R==="users"&&e.jsx(x,{className:"rounded-2xl border-0 shadow-sm p-0 overflow-hidden",children:e.jsx("div",{className:"divide-y",children:ka?.map(t=>e.jsxs("div",{className:"p-3 md:p-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("p",{className:"font-black text-sm",children:[t.firstName," ",t.lastName]}),e.jsx(E,{variant:t.accountStatus==="active"||t.accountStatus==="vip"?"default":"secondary",className:`text-[9px] ${t.accountStatus==="deactivated"?"bg-red-100 text-red-700":t.accountStatus==="vip"?"bg-yellow-100 text-yellow-700":t.accountStatus==="pending"?"bg-orange-100 text-orange-700":""}`,children:t.accountStatus==="active"?"VERIFICADO":t.accountStatus==="pending"?"EN REVISIÓN":t.accountStatus==="deactivated"?"DESACTIVADA":t.accountStatus==="vip"?"VIP":"VERIFICADO"}),t.isAdmin&&e.jsx(E,{className:"text-[9px] bg-purple-100 text-purple-700",children:"ADMIN"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.email}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[t.phone&&e.jsx("span",{className:"mr-2",children:t.phone}),t.businessActivity&&e.jsxs("span",{className:"mr-2",children:["• ",t.businessActivity]}),t.city&&e.jsxs("span",{children:["• ",t.city]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{className:"text-[10px] text-muted-foreground mb-1 block",children:"Estado de cuenta"}),e.jsxs(D,{value:t.accountStatus||"active",onValueChange:a=>t.id&&We.mutate({id:t.id,accountStatus:a}),className:"w-full h-9 rounded-full text-xs bg-white dark:bg-zinc-900 border shadow-sm px-3",children:[e.jsx(l,{value:"active",children:"Verificado"}),e.jsx(l,{value:"pending",children:"En revisión"}),e.jsx(l,{value:"deactivated",children:"Desactivada"}),e.jsx(l,{value:"vip",children:"VIP"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(s,{size:"sm",variant:"outline",className:"rounded-full text-xs",onClick:()=>N(t),"data-testid":`button-edit-user-${t.id}`,children:"Editar"}),e.jsx(s,{size:"sm",variant:"outline",className:"rounded-full text-xs",onClick:()=>Te({open:!0,user:t}),"data-testid":`button-note-user-${t.id}`,children:"Mensaje"}),e.jsx(s,{size:"sm",variant:"outline",className:"rounded-full text-xs",onClick:()=>ze({open:!0,user:t}),"data-testid":`button-doc-user-${t.id}`,children:"Docs"}),e.jsx(s,{size:"sm",variant:"outline",className:"rounded-full text-xs",onClick:()=>Le({open:!0,user:t}),"data-testid":`button-invoice-user-${t.id}`,children:"Factura"}),e.jsx(s,{size:"sm",className:"rounded-full text-xs bg-accent hover:bg-accent/90 text-black",onClick:()=>Re({open:!0,user:t}),"data-testid":`button-payment-link-${t.id}`,children:"Pago"}),e.jsx(s,{size:"sm",variant:"outline",className:"rounded-full text-xs text-red-600 border-red-200",onClick:()=>qe({open:!0,user:t}),"data-testid":`button-delete-user-${t.id}`,children:"Eliminar"})]})]},t.id))})}),R==="calendar"&&e.jsxs(x,{className:"rounded-2xl border-0 shadow-sm p-4 md:p-6 overflow-hidden",children:[e.jsxs("h4",{className:"font-black text-base md:text-lg mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 md:w-8 md:h-8 rounded-xl bg-accent/20 flex items-center justify-center",children:e.jsx(Ce,{className:"w-5 h-5 md:w-4 md:h-4 text-accent"})}),e.jsx("span",{children:"Gestión de Fechas Fiscales"})]}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[oe?.map(t=>{const a=t.application;if(!a)return null;const m=a?.requestCode||t.invoiceNumber;return e.jsxs("div",{className:"border-2 rounded-2xl p-4 md:p-5 bg-gray-50/50 dark:bg-zinc-800/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-base md:text-lg",children:a.companyName||"LLC pendiente"}),e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground",children:[t.user?.firstName," ",t.user?.lastName," • ",a.state]})]}),e.jsx(E,{variant:"outline",className:"text-xs w-fit",children:m})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-2 md:p-3 rounded-lg md:rounded-xl border",children:[e.jsx(n,{className:"text-[10px] md:text-xs font-bold text-muted-foreground mb-1 block truncate",children:"Creación LLC"}),e.jsx(o,{type:"date",className:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3",defaultValue:a.llcCreatedDate?new Date(a.llcCreatedDate).toISOString().split("T")[0]:"",onChange:d=>we.mutate({appId:a.id,field:"llcCreatedDate",value:d.target.value}),"data-testid":`input-llc-created-${a.id}`})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-2 md:p-3 rounded-lg md:rounded-xl border",children:[e.jsx(n,{className:"text-[10px] md:text-xs font-bold text-muted-foreground mb-1 block truncate",children:"Renovación Agente"}),e.jsx(o,{type:"date",className:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3",defaultValue:a.agentRenewalDate?new Date(a.agentRenewalDate).toISOString().split("T")[0]:"",onChange:d=>we.mutate({appId:a.id,field:"agentRenewalDate",value:d.target.value}),"data-testid":`input-agent-renewal-${a.id}`})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-2 md:p-3 rounded-lg md:rounded-xl border",children:[e.jsx(n,{className:"text-[10px] md:text-xs font-bold text-muted-foreground mb-1 block truncate",children:"IRS 1120"}),e.jsx(o,{type:"date",className:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3",defaultValue:a.irs1120DueDate?new Date(a.irs1120DueDate).toISOString().split("T")[0]:"",onChange:d=>we.mutate({appId:a.id,field:"irs1120DueDate",value:d.target.value}),"data-testid":`input-irs1120-${a.id}`})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-2 md:p-3 rounded-lg md:rounded-xl border",children:[e.jsx(n,{className:"text-[10px] md:text-xs font-bold text-muted-foreground mb-1 block truncate",children:"IRS 5472"}),e.jsx(o,{type:"date",className:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3",defaultValue:a.irs5472DueDate?new Date(a.irs5472DueDate).toISOString().split("T")[0]:"",onChange:d=>we.mutate({appId:a.id,field:"irs5472DueDate",value:d.target.value}),"data-testid":`input-irs5472-${a.id}`})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-2 md:p-3 rounded-lg md:rounded-xl border col-span-2",children:[e.jsx(n,{className:"text-[10px] md:text-xs font-bold text-muted-foreground mb-1 block truncate",children:"Reporte Anual"}),e.jsx(o,{type:"date",className:"h-8 md:h-10 text-xs md:text-sm px-2 md:px-3",defaultValue:a.annualReportDueDate?new Date(a.annualReportDueDate).toISOString().split("T")[0]:"",onChange:d=>we.mutate({appId:a.id,field:"annualReportDueDate",value:d.target.value}),"data-testid":`input-annual-report-${a.id}`})]})]})]},t.id)}),(!oe||oe.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No hay pedidos con LLCs para gestionar"})]})]}),R==="docs"&&e.jsxs(x,{className:"rounded-2xl border-0 shadow-sm p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-black text-lg",children:"Documentos"}),e.jsx(E,{className:"bg-accent/20 text-accent",children:Be?.length||0})]}),e.jsxs(D,{value:"",onValueChange:t=>{if(t){const a=oe?.find(m=>m.id===Number(t));a&&(Ke({open:!0,order:a}),vt("articles_of_organization"),_e(null))}},className:"h-9 text-xs rounded-full px-3 bg-accent text-primary font-bold min-w-[140px]",children:[e.jsx("option",{value:"",children:"Subir para cliente..."}),oe?.map(t=>e.jsxs("option",{value:t.id,children:[t.application?.requestCode||t.maintenanceApplication?.requestCode||t.invoiceNumber," - ",t.user?.firstName," ",t.user?.lastName]},t.id))]})]}),e.jsxs("div",{className:"divide-y max-h-[60vh] overflow-y-auto",children:[Be?.map(t=>e.jsxs("div",{className:"py-3 space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center shrink-0",children:e.jsx(X,{className:"w-4 h-4 text-accent"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"font-bold text-xs md:text-sm truncate",children:t.fileName}),e.jsx(E,{variant:"outline",className:`text-[8px] md:text-[9px] shrink-0 ${t.reviewStatus==="approved"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t.reviewStatus==="rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:t.reviewStatus==="approved"?"Aprobado":t.reviewStatus==="rejected"?"Rechazado":"Pendiente"})]}),e.jsxs("p",{className:"text-[10px] text-accent font-medium mt-0.5",children:[t.user?.firstName," ",t.user?.lastName]}),e.jsx("p",{className:"text-[9px] md:text-[10px] text-muted-foreground truncate",children:t.user?.email}),e.jsxs("p",{className:"text-[9px] md:text-[10px] text-muted-foreground",children:[t.application?.companyName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:"LLC:"})," ",t.application.companyName," • "]}),t.uploadedAt?new Date(t.uploadedAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short"}):"-"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-10",children:[e.jsxs(D,{value:t.reviewStatus||"pending",onValueChange:async a=>{try{await g("PATCH",`/api/admin/documents/${t.id}/review`,{reviewStatus:a}),h.invalidateQueries({queryKey:["/api/admin/documents"]}),i({title:"Estado actualizado"})}catch{i({title:"Error",variant:"destructive"})}},className:"h-7 text-[10px] rounded-full px-2 flex-1 max-w-[120px]",children:[e.jsx(l,{value:"pending",children:"Pendiente"}),e.jsx(l,{value:"approved",children:"Aprobar"}),e.jsx(l,{value:"rejected",children:"Rechazar"})]}),t.fileUrl&&e.jsx(s,{size:"icon",variant:"outline",className:"h-7 w-7 rounded-full",onClick:()=>window.open(t.fileUrl,"_blank"),"data-testid":`btn-view-doc-${t.id}`,children:e.jsx(Oa,{className:"w-3 h-3"})}),e.jsx(s,{size:"icon",variant:"outline",className:"h-7 w-7 rounded-full text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:async()=>{if(confirm("¿Eliminar este documento permanentemente?"))try{await g("DELETE",`/api/admin/documents/${t.id}`),h.invalidateQueries({queryKey:["/api/admin/documents"]}),i({title:"Documento eliminado"})}catch{i({title:"Error al eliminar",variant:"destructive"})}},"data-testid":`btn-delete-doc-${t.id}`,children:e.jsx(tt,{className:"w-3 h-3"})})]})]},t.id)),(!Be||Be.length===0)&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[e.jsx(X,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground/30"}),"No hay documentos subidos por clientes"]})]})]}),R==="newsletter"&&e.jsx(x,{className:"rounded-2xl border-0 shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-xl border border-border",children:[e.jsxs("h4",{className:"font-black text-sm mb-3",children:["Enviar a todos los suscriptores (",ye?.length||0,")"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{value:zt,onChange:t=>Ea(t.target.value),placeholder:"Asunto del email",className:"bg-white dark:bg-zinc-900","data-testid":"input-broadcast-subject"}),e.jsx(J,{value:At,onChange:t=>Da(t.target.value),placeholder:"Contenido del mensaje",rows:4,className:"bg-white dark:bg-zinc-900","data-testid":"input-broadcast-message"}),e.jsx(s,{onClick:()=>Pt.mutate({subject:zt,message:At}),disabled:!zt||!At||Pt.isPending,className:"w-full rounded-full","data-testid":"button-send-broadcast",children:Pt.isPending?"Enviando...":`Enviar (${ye?.length||0})`})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-sm mb-3",children:"Lista de Suscriptores"}),e.jsxs("div",{className:"divide-y max-h-80 overflow-y-auto",children:[ye?.map(t=>e.jsxs("div",{className:"py-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:t.email}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:t.subscribedAt?new Date(t.subscribedAt).toLocaleDateString("es-ES"):""})]},t.id)),(!ye||ye.length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No hay suscriptores"})]})]})]})}),R==="inbox"&&e.jsx(x,{className:"rounded-2xl border-0 shadow-sm p-0 overflow-hidden",children:e.jsxs("div",{className:"divide-y",children:[Et?.map(t=>e.jsxs("div",{className:"p-4 space-y-2 hover:bg-accent/5 cursor-pointer transition-colors",onClick:()=>Ct(Qe?.id===t.id?null:t),"data-testid":`inbox-message-${t.id}`,children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"font-black text-xs md:text-sm",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground truncate",children:t.email})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx(E,{variant:"outline",className:"text-[8px] md:text-[10px] hidden md:inline-flex",children:t.messageId||t.id}),e.jsx(E,{variant:"secondary",className:"text-[8px] md:text-[10px]",children:t.status||"pendiente"}),e.jsx(s,{size:"icon",variant:"ghost",className:"h-6 w-6 md:h-7 md:w-7 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:async a=>{if(a.stopPropagation(),confirm("¿Eliminar este mensaje y todas sus respuestas?"))try{await g("DELETE",`/api/admin/messages/${t.id}`),h.invalidateQueries({queryKey:["/api/admin/messages"]}),i({title:"Mensaje eliminado"})}catch{i({title:"Error al eliminar",variant:"destructive"})}},"data-testid":`btn-delete-msg-${t.id}`,children:e.jsx(tt,{className:"w-3 h-3 md:w-3.5 md:h-3.5"})})]})]}),e.jsx("p",{className:"text-xs font-medium",children:t.subject}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.message}),t.replies&&t.replies.length>0&&e.jsx("div",{className:"pl-4 border-l-2 border-accent/30 space-y-2 mt-3",children:t.replies.map(a=>e.jsxs("div",{className:"text-xs",children:[e.jsxs("span",{className:`font-semibold ${a.isAdmin?"text-accent":"text-muted-foreground"}`,children:[a.isAdmin?"Admin":"Cliente",":"]}),e.jsx("span",{className:"ml-2",children:a.content}),e.jsx("span",{className:"text-[10px] text-muted-foreground ml-2",children:a.createdAt&&new Date(a.createdAt).toLocaleString("es-ES")})]},a.id))}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.createdAt?new Date(t.createdAt).toLocaleString("es-ES"):""}),Qe?.id===t.id&&e.jsxs("div",{className:"space-y-2 pt-3 border-t mt-2",onClick:a=>a.stopPropagation(),children:[e.jsx(J,{value:ve,onChange:a=>St(a.target.value),placeholder:"Escribe tu respuesta al cliente...",className:"rounded-xl min-h-[80px] text-sm","data-testid":"input-admin-reply"}),e.jsxs(s,{onClick:()=>ce.mutate(t.id),disabled:!ve.trim()||ce.isPending,className:"bg-accent text-primary font-black rounded-full px-6","data-testid":"button-send-admin-reply",children:[ce.isPending?e.jsx(V,{className:"w-4 h-4 animate-spin"}):e.jsx(ps,{className:"w-4 h-4 mr-2"}),"Enviar respuesta"]})]})]},t.id)),(!Et||Et.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No hay mensajes"})]})}),R==="facturas"&&e.jsxs("div",{className:"space-y-4","data-testid":"admin-facturas-section",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-sm font-bold",children:"Facturas para Contabilidad"})}),e.jsx(x,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"divide-y max-h-[60vh] overflow-y-auto",children:[Ca?.length===0&&e.jsx("p",{className:"p-4 text-sm text-muted-foreground text-center",children:"No hay facturas generadas"}),Ca?.map(t=>e.jsxs("div",{className:"p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3","data-testid":`invoice-row-${t.id}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-black text-sm",children:t.fileName||`Factura ${t.order?.invoiceNumber}`}),e.jsx(E,{variant:t.order?.status==="paid"||t.order?.status==="completed"?"default":"secondary",className:"text-[10px]",children:t.order?.status==="paid"?"Pagada":t.order?.status==="completed"?"Completada":t.order?.status==="pending"?"Pendiente":t.order?.status||"N/A"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.user?.firstName," ",t.user?.lastName," (",t.user?.email,")"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Importe: ",t.order?.amount?(t.order.amount/100).toFixed(2)+(t.order.currency==="USD"?" $":" €"):"N/A"," | Fecha: ",t.createdAt?new Date(t.createdAt).toLocaleDateString("es-ES"):"N/A"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(s,{variant:"outline",size:"sm",className:"rounded-full text-xs",onClick:()=>window.open(t.fileUrl||`/api/orders/${t.orderId}/invoice`,"_blank"),"data-testid":`button-view-invoice-${t.id}`,children:[e.jsx(Oa,{className:"w-3 h-3 mr-1"})," Ver"]}),e.jsxs(s,{variant:"outline",size:"sm",className:"rounded-full text-xs",onClick:()=>{const a=document.createElement("a");a.href=t.fileUrl||`/api/orders/${t.orderId}/invoice`,a.download=`Factura-${t.order?.invoiceNumber||t.id}.pdf`,a.click()},"data-testid":`button-download-invoice-${t.id}`,children:[e.jsx(Ia,{className:"w-3 h-3 mr-1"})," Descargar"]})]})]},t.id))]})})]}),R==="descuentos"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm font-bold",children:"Códigos de Descuento"}),e.jsxs(s,{variant:"outline",size:"sm",className:"rounded-full text-xs font-semibold",onClick:()=>{_({code:"",discountType:"percentage",discountValue:"",minOrderAmount:"",maxUses:"",validFrom:"",validUntil:"",isActive:!0}),fe({open:!0,code:null})},"data-testid":"button-create-discount-code",children:[e.jsx(Gt,{className:"w-3 h-3 mr-1"})," Nuevo Código"]})]}),e.jsx(x,{className:"rounded-2xl border-0 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"divide-y",children:[Dt?.map(t=>e.jsxs("div",{className:"p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3","data-testid":`discount-code-${t.code}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-black text-sm",children:t.code}),e.jsx(E,{variant:t.isActive?"default":"secondary",className:"text-[10px]",children:t.isActive?"Activo":"Inactivo"}),e.jsx(E,{variant:"outline",className:"text-[10px]",children:t.discountType==="percentage"?`${t.discountValue}%`:`${(t.discountValue/100).toFixed(2)}€`})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Usado: ",t.usedCount,t.maxUses?`/${t.maxUses}`:""," veces",t.minOrderAmount&&` | Min: ${(t.minOrderAmount/100).toFixed(2)}€`]}),(t.validFrom||t.validUntil)&&e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[t.validFrom&&`Desde: ${new Date(t.validFrom).toLocaleDateString("es-ES")}`,t.validFrom&&t.validUntil&&" - ",t.validUntil&&`Hasta: ${new Date(t.validUntil).toLocaleDateString("es-ES")}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{variant:"outline",size:"sm",className:"rounded-full text-xs",onClick:()=>{_({code:t.code,discountType:t.discountType,discountValue:t.discountValue.toString(),minOrderAmount:t.minOrderAmount?(t.minOrderAmount/100).toString():"",maxUses:t.maxUses?.toString()||"",validFrom:t.validFrom?t.validFrom.split("T")[0]:"",validUntil:t.validUntil?t.validUntil.split("T")[0]:"",isActive:t.isActive}),fe({open:!0,code:t})},"data-testid":`button-edit-discount-${t.code}`,children:e.jsx(hs,{className:"w-3 h-3"})}),e.jsx(s,{variant:"outline",size:"sm",className:`rounded-full text-xs ${t.isActive?"text-red-600":"text-green-600"}`,onClick:async()=>{try{await g("PATCH",`/api/admin/discount-codes/${t.id}`,{isActive:!t.isActive}),Sa(),i({title:t.isActive?"Código desactivado":"Código activado"})}catch{i({title:"Error",variant:"destructive"})}},"data-testid":`button-toggle-discount-${t.code}`,children:t.isActive?e.jsx(Fa,{className:"w-3 h-3"}):e.jsx($a,{className:"w-3 h-3"})})]})]},t.id)),(!Dt||Dt.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No hay códigos de descuento"})]})})]})]},"admin")]}),e.jsxs("div",{className:"space-y-6 md:gap-8 order-2 lg:order-2",children:[e.jsxs("section",{className:"bg-white dark:bg-zinc-900 p-6 md:p-8 rounded-[2rem] shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg md:text-xl font-black tracking-tight text-primary flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-accent"})," Seguimiento"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"El progreso de tu LLC, paso a paso"})]}),e.jsx("div",{className:"space-y-5",children:f&&f.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-800 rounded-xl p-3 mb-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"text-[9px] font-bold text-accent uppercase tracking-wider mb-0.5",children:["Pedido: ",f[0]?.application?.requestCode||f[0]?.maintenanceApplication?.requestCode||f[0]?.invoiceNumber||f[0]?.id]}),e.jsx("p",{className:"text-sm font-black text-primary truncate",children:f[0]?.maintenanceApplication?`Mantenimiento ${f[0]?.maintenanceApplication?.state||""}`:f[0]?.application?.companyName?`${f[0]?.application?.companyName} LLC`:f[0]?.product?.name||"LLC"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:f[0]?.application?.state||f[0]?.maintenanceApplication?.state||""})]}),e.jsx(E,{className:`${at(f[0]?.status).className} font-bold text-[9px] shrink-0`,children:at(f[0]?.status).label})]}),e.jsxs("p",{className:"text-[9px] text-muted-foreground mt-2",children:["Creado: ",f[0]?.createdAt?new Date(f[0].createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"-"]})]}),Ge&&Ge.length>0?Ge.map((t,a)=>e.jsxs("div",{className:"flex gap-4 relative",children:[a<Ge.length-1&&e.jsx("div",{className:"absolute left-3 top-6 w-0.5 h-8 bg-gray-100"}),e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center shrink-0 z-10 bg-accent text-primary",children:e.jsx(he,{className:"w-3 h-3"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-xs md:text-sm font-black text-primary truncate",children:t.eventType}),t.createdAt&&e.jsx("span",{className:"text-[9px] text-muted-foreground whitespace-nowrap",children:new Date(t.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.description})]})]},t.id)):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-accent flex items-center justify-center",children:e.jsx(he,{className:"w-3 h-3"})}),e.jsx("p",{className:"text-xs font-black",children:"Pedido Recibido"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Verificación de Datos"})]})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(qa,{className:"w-8 h-8 text-gray-200 dark:text-zinc-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No hay trámites en curso"}),e.jsx("p",{className:"text-[10px] text-muted-foreground/70 mt-1",children:"Cuando contrates un servicio, aquí podrás seguir todo el proceso."})]})})]}),e.jsxs("section",{className:"bg-accent/10 p-6 md:p-8 rounded-[2rem] border-2 border-accent/20",children:[e.jsx("h3",{className:"text-base font-black text-primary mb-2",children:"¿Tienes alguna duda?"}),e.jsx("p",{className:"text-xs text-primary/70 mb-5 leading-relaxed",children:"Estamos aquí para ayudarte, escríbenos y te responderemos lo antes posible!"}),e.jsx("a",{href:"https://wa.me/34614916910",target:"_blank",rel:"noopener noreferrer",children:e.jsx(s,{className:"w-full bg-accent text-primary font-black rounded-full py-5",children:"Hablar con un asesor"})})]})]})]})]}),r?.isAdmin&&e.jsxs(e.Fragment,{children:[e.jsx(T,{open:Pe.open,onOpenChange:t=>Te({open:t,user:t?Pe.user:null}),children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black text-primary",children:"Enviar Mensaje al Cliente"}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:"El cliente recibirá notificación en su panel y email"})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Título"}),e.jsx(o,{value:nt,onChange:t=>Zt(t.target.value),placeholder:"Título del mensaje",className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-note-title"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Mensaje"}),e.jsx(J,{value:it,onChange:t=>ea(t.target.value),placeholder:"Escribe tu mensaje...",rows:4,className:"w-full rounded-xl border-gray-200 focus:border-accent","data-testid":"input-note-message"})]})]}),e.jsxs($,{className:"mt-6 flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>Te({open:!1,user:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{onClick:()=>Pe.user?.id&&me.mutate({userId:Pe.user.id,title:nt,message:it,type:_a}),disabled:!nt||!it||me.isPending,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-send-note",children:me.isPending?e.jsx(V,{className:"w-4 h-4 animate-spin"}):"Enviar Mensaje"})]})]})}),e.jsx(T,{open:!!u,onOpenChange:t=>!t&&N(null),children:e.jsxs(L,{className:"w-full sm:max-w-lg bg-white dark:bg-zinc-900",children:[e.jsxs(I,{className:"flex-shrink-0",children:[e.jsx(F,{className:"text-xl font-black text-primary",children:"Editar Usuario"}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:"Modifica los datos del cliente"})]}),u&&e.jsxs("div",{className:"space-y-3 pt-2 overflow-y-auto flex-1 pr-1",style:{maxHeight:"calc(85vh - 180px)"},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Nombre"}),e.jsx(o,{value:u.firstName||"",onChange:t=>N({...u,firstName:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-firstname"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Apellidos"}),e.jsx(o,{value:u.lastName||"",onChange:t=>N({...u,lastName:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-lastname"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Email"}),e.jsx(o,{value:u.email||"",onChange:t=>N({...u,email:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-email"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Teléfono"}),e.jsx(o,{value:u.phone||"",onChange:t=>N({...u,phone:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-phone"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Tipo ID"}),e.jsxs(D,{value:u.idType||"",onValueChange:t=>N({...u,idType:t}),placeholder:"Seleccionar",className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:[e.jsx(l,{value:"dni",children:"DNI"}),e.jsx(l,{value:"nie",children:"NIE"}),e.jsx(l,{value:"passport",children:"Pasaporte"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Número ID"}),e.jsx(o,{value:u.idNumber||"",onChange:t=>N({...u,idNumber:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-idnumber"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Fecha Nacimiento"}),e.jsx(o,{type:"date",value:u.birthDate||"",onChange:t=>N({...u,birthDate:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-birthdate"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Actividad de Negocio"}),e.jsxs(D,{value:u.businessActivity||"",onValueChange:t=>N({...u,businessActivity:t}),placeholder:"Seleccionar actividad",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-edit-activity",children:[e.jsx(l,{value:"ecommerce",children:"E-commerce"}),e.jsx(l,{value:"dropshipping",children:"Dropshipping"}),e.jsx(l,{value:"consulting",children:"Consultoría"}),e.jsx(l,{value:"marketing",children:"Marketing Digital"}),e.jsx(l,{value:"software",children:"Desarrollo de Software"}),e.jsx(l,{value:"trading",children:"Trading / Inversiones"}),e.jsx(l,{value:"freelance",children:"Freelance"}),e.jsx(l,{value:"other",children:"Otra"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Dirección"}),e.jsx(o,{value:u.address||"",onChange:t=>N({...u,address:t.target.value}),placeholder:"Calle y número",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-address"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Ciudad"}),e.jsx(o,{value:u.city||"",onChange:t=>N({...u,city:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-city"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Código Postal"}),e.jsx(o,{value:u.postalCode||"",onChange:t=>N({...u,postalCode:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-postal"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Provincia"}),e.jsx(o,{value:u.province||"",onChange:t=>N({...u,province:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-province"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"País"}),e.jsx(o,{value:u.country||"",onChange:t=>N({...u,country:t.target.value}),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-edit-country"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Notas Internas (solo admin)"}),e.jsx(J,{value:u.internalNotes||"",onChange:t=>N({...u,internalNotes:t.target.value}),rows:2,className:"rounded-xl border-gray-200 focus:border-accent","data-testid":"input-edit-notes"})]})]}),u&&e.jsxs($,{className:"flex-col sm:flex-row gap-3 pt-4 border-t border-border flex-shrink-0",children:[e.jsx(s,{variant:"outline",onClick:()=>N(null),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{onClick:()=>u.id&&We.mutate({id:u.id,...u}),disabled:We.isPending,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-save-user",children:We.isPending?e.jsx(V,{className:"w-4 h-4 animate-spin"}):"Guardar Cambios"})]})]})}),e.jsx(T,{open:ne.open,onOpenChange:t=>qe({open:t,user:t?ne.user:null}),children:e.jsxs(L,{className:"w-full sm:max-w-sm bg-white dark:bg-zinc-900",children:[e.jsx(I,{children:e.jsx(F,{className:"text-xl font-black text-red-600",children:"Eliminar Usuario"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["¿Estás seguro de que deseas eliminar a ",e.jsxs("strong",{children:[ne.user?.firstName," ",ne.user?.lastName]}),"?"]}),e.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Esta acción no se puede deshacer."})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>qe({open:!1,user:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{variant:"destructive",onClick:()=>ne.user?.id&&Tt.mutate(ne.user.id),disabled:Tt.isPending,className:"rounded-full font-black","data-testid":"button-confirm-delete",children:Tt.isPending?"Eliminando...":"Eliminar"})]})]})}),e.jsx(T,{open:H.open,onOpenChange:t=>Je({open:t,order:t?H.order:null}),children:e.jsxs(L,{className:"w-full sm:max-w-sm bg-white dark:bg-zinc-900",children:[e.jsx(I,{children:e.jsx(F,{className:"text-xl font-black text-red-600",children:"Eliminar Pedido"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["¿Estás seguro de que deseas eliminar el pedido ",e.jsx("strong",{children:H.order?.application?.requestCode||H.order?.maintenanceApplication?.requestCode||H.order?.invoiceNumber}),"?"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Cliente: ",H.order?.user?.firstName," ",H.order?.user?.lastName]}),e.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Esta acción eliminará el pedido, la solicitud LLC asociada y todos los documentos relacionados."})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>Je({open:!1,order:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{variant:"destructive",onClick:()=>H.order?.id&&Ft.mutate(H.order.id),disabled:Ft.isPending,className:"w-full sm:w-auto rounded-full font-black","data-testid":"button-confirm-delete-order",children:Ft.isPending?"Eliminando...":"Eliminar Pedido"})]})]})}),e.jsx(T,{open:ee.open,onOpenChange:t=>Xe({open:t,order:t?ee.order:null}),children:e.jsxs(L,{className:"w-full sm:max-w-sm bg-white dark:bg-zinc-900",children:[e.jsx(I,{children:e.jsx(F,{className:"text-xl font-black text-primary",children:"Generar Factura"})}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pedido: ",e.jsx("strong",{children:ee.order?.application?.requestCode||ee.order?.maintenanceApplication?.requestCode||ee.order?.invoiceNumber})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Importe"}),e.jsx(o,{type:"number",step:"0.01",value:xe,onChange:t=>Lt(t.target.value),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base",placeholder:"739.00","data-testid":"input-invoice-amount"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Divisa"}),e.jsxs(D,{value:It,onValueChange:za,className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:[e.jsx(l,{value:"EUR",children:"EUR (€)"}),e.jsx(l,{value:"USD",children:"USD ($)"})]})]})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3 mt-6",children:[e.jsx(s,{variant:"outline",onClick:()=>Xe({open:!1,order:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full",disabled:!xe||isNaN(parseFloat(xe))||parseFloat(xe)<=0||xa,onClick:async()=>{ua(!0);try{const t=Math.round(parseFloat(xe)*100);if(t<=0){i({title:"Error",description:"El importe debe ser mayor que 0",variant:"destructive"});return}const a=await g("POST",`/api/admin/orders/${ee.order?.id}/generate-invoice`,{amount:t,currency:It});if(!a.ok){const m=await a.json().catch(()=>({}));throw new Error(m.message||"Error al generar factura")}i({title:"Factura generada",description:`Factura creada por ${xe} ${It}`}),h.invalidateQueries({queryKey:["/api/admin/orders"]}),h.invalidateQueries({queryKey:["/api/user/documents"]}),window.open(`/api/orders/${ee.order?.id}/invoice`,"_blank"),Xe({open:!1,order:null}),Lt("")}catch(t){i({title:"Error",description:t.message||"No se pudo generar la factura",variant:"destructive"})}finally{ua(!1)}},"data-testid":"button-confirm-generate-invoice",children:xa?e.jsx(V,{className:"w-4 h-4 animate-spin"}):"Generar Factura"})]})]})}),e.jsx(T,{open:ge.open,onOpenChange:t=>ze({open:t,user:t?ge.user:null}),children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black text-primary",children:"Solicitar Documentos"}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:"Solicita documentos al cliente"})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Tipo de documento"}),e.jsxs(D,{value:Ae,onValueChange:Jt,placeholder:"Seleccionar tipo...",className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:[e.jsx(l,{value:"passport",children:"Pasaporte / Documento de Identidad"}),e.jsx(l,{value:"address_proof",children:"Prueba de Domicilio"}),e.jsx(l,{value:"tax_id",children:"Identificación Fiscal (NIF/CIF)"}),e.jsx(l,{value:"other",children:"Otro Documento"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Mensaje"}),e.jsx(J,{value:Xt,onChange:t=>Yt(t.target.value),placeholder:"Mensaje para el cliente",rows:3,className:"w-full rounded-xl border-gray-200 focus:border-accent","data-testid":"input-doc-message"})]})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3 mt-6",children:[e.jsx(s,{variant:"outline",onClick:()=>ze({open:!1,user:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{onClick:()=>{if(ge.user?.id&&ge.user?.email){const a={passport:"Pasaporte / Documento de Identidad",address_proof:"Prueba de Domicilio",tax_id:"Identificación Fiscal (NIF/CIF)",other:"Documento Adicional"}[Ae]||Ae;me.mutate({userId:ge.user.id,title:`Solicitud de Documento: ${a}`,message:Xt||`Por favor, sube tu ${a} a tu panel de cliente.`,type:"action_required"}),ze({open:!1,user:null}),Jt(""),Yt("")}},disabled:!Ae||me.isPending,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-request-doc",children:me.isPending?e.jsx(V,{className:"w-4 h-4 animate-spin"}):"Solicitar Documento"})]})]})}),e.jsx(T,{open:ae.open,onOpenChange:t=>Le({open:t,user:t?ae.user:null}),children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black text-primary",children:"Crear Factura"}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:"Genera una factura para el cliente"})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground bg-gray-50 dark:bg-zinc-800 p-3 rounded-xl",children:["Cliente: ",e.jsxs("strong",{children:[ae.user?.firstName," ",ae.user?.lastName]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Concepto"}),e.jsx(o,{value:dt,onChange:t=>ta(t.target.value),placeholder:"Ej: Servicio de consultoría",className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-invoice-concept"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Importe"}),e.jsx(o,{type:"number",value:lt,onChange:t=>aa(t.target.value),placeholder:"739",className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-invoice-amount"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Moneda"}),e.jsxs(D,{value:sa,onValueChange:ra,className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-invoice-currency",children:[e.jsx(l,{value:"EUR",children:"EUR"}),e.jsx(l,{value:"USD",children:"USD"})]})]})]})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3 mt-6",children:[e.jsx(s,{variant:"outline",onClick:()=>Le({open:!1,user:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{onClick:()=>ae.user?.id&&$t.mutate({userId:ae.user.id,concept:dt,amount:Math.round(parseFloat(lt)*100),currency:sa}),disabled:!dt||!lt||$t.isPending,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-create-invoice",children:$t.isPending?"Creando...":"Crear Factura"})]})]})})]}),e.jsx(T,{open:Ba,onOpenChange:ct,children:e.jsxs(L,{className:"w-full sm:max-w-sm bg-white dark:bg-zinc-900",children:[e.jsx(I,{children:e.jsx(F,{className:"text-xl font-black text-red-600",children:"Eliminar Mi Cuenta"})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"¿Estás seguro de que deseas eliminar tu cuenta permanentemente?"}),e.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Esta acción no se puede deshacer. Todos tus datos serán eliminados."})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>ct(!1),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{variant:"destructive",onClick:()=>Ut.mutate(),disabled:Ut.isPending,className:"rounded-full font-black","data-testid":"button-confirm-delete-account",children:Ut.isPending?"Eliminando...":"Eliminar Mi Cuenta"})]})]})}),e.jsx(T,{open:ie.open,onOpenChange:t=>{t||Oe({open:!1,file:null})},children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsx(I,{children:e.jsx(F,{className:"text-lg sm:text-xl font-black text-primary",children:"Subir Documento"})}),e.jsxs("div",{className:"space-y-4 pt-2",children:[ie.file&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-zinc-800 rounded-lg flex items-center gap-3",children:[e.jsx(pe,{className:"w-7 h-7 sm:w-8 sm:h-8 text-accent shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-xs sm:text-sm truncate",children:ie.file.name}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[(ie.file.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-xs sm:text-sm font-black text-primary mb-2 block",children:"Tipo de documento"}),e.jsxs(D,{value:be,onValueChange:na,className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-upload-doc-type",children:[e.jsx(l,{value:"passport",children:"Pasaporte / Documento de Identidad"}),e.jsx(l,{value:"address_proof",children:"Prueba de Domicilio"}),e.jsx(l,{value:"tax_id",children:"Identificación Fiscal (NIF/CIF)"}),e.jsx(l,{value:"other",children:"Otro Documento"})]})]}),be==="other"&&e.jsxs("div",{children:[e.jsx(n,{className:"text-xs sm:text-sm font-black text-primary mb-2 block",children:"Descripción del documento"}),e.jsx(J,{value:Ue,onChange:t=>ia(t.target.value),placeholder:"Describe el tipo de documento que estás subiendo...",className:"min-h-[80px] rounded-xl border-gray-200 focus:border-accent text-base",style:{fontSize:"16px"},"data-testid":"input-upload-notes"})]})]}),e.jsxs($,{className:"mt-6 flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>Oe({open:!1,file:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{onClick:async()=>{if(!ie.file)return;const t=new FormData;t.append("file",ie.file),t.append("documentType",be),be==="other"&&Ue&&t.append("notes",Ue);try{const a=await fetch("/api/user/documents/upload",{method:"POST",body:t,credentials:"include"});if(a.ok)i({title:"Documento subido",description:"Tu documento ha sido enviado correctamente."}),h.invalidateQueries({queryKey:["/api/user/documents"]}),Oe({open:!1,file:null});else{const m=await a.json();i({title:"Error",description:m.message||"No se pudo subir el documento",variant:"destructive"})}}catch{i({title:"Error",description:"Error de conexión",variant:"destructive"})}},disabled:be==="other"&&!Ue.trim(),className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-confirm-upload",children:"Subir Documento"})]})]})}),e.jsx(T,{open:Ga,onOpenChange:Ie,children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black text-primary",children:"Crear Nuevo Cliente"}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:"Completa los datos del nuevo cliente"})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Nombre"}),e.jsx(o,{value:B.firstName,onChange:t=>se(a=>({...a,firstName:t.target.value})),placeholder:"Nombre",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-create-user-firstname"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Apellidos"}),e.jsx(o,{value:B.lastName,onChange:t=>se(a=>({...a,lastName:t.target.value})),placeholder:"Apellidos",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-create-user-lastname"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Email"}),e.jsx(o,{type:"email",value:B.email,onChange:t=>se(a=>({...a,email:t.target.value})),placeholder:"email@ejemplo.com",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-create-user-email"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Teléfono"}),e.jsx(o,{value:B.phone,onChange:t=>se(a=>({...a,phone:t.target.value})),placeholder:"+34 600 000 000",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-create-user-phone"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Contraseña"}),e.jsx(o,{type:"password",value:B.password,onChange:t=>se(a=>({...a,password:t.target.value})),placeholder:"Mínimo 8 caracteres",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-create-user-password"})]})]}),e.jsxs($,{className:"mt-6 flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>Ie(!1),className:"w-full sm:w-auto rounded-full font-black","data-testid":"button-cancel-create-user",children:"Cancelar"}),e.jsx(s,{onClick:()=>qt.mutate(B),disabled:qt.isPending||!B.email||!B.password,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-confirm-create-user",children:qt.isPending?e.jsx(V,{className:"w-4 h-4 animate-spin"}):"Crear Cliente"})]})]})}),e.jsx(T,{open:Ha,onOpenChange:Fe,children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black text-primary",children:"Crear Nuevo Pedido"}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:"Configura el pedido para el cliente"})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Cliente"}),e.jsx(D,{value:re.userId,onValueChange:t=>$e(a=>({...a,userId:t})),placeholder:"Seleccionar cliente...",className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-order-user",children:ka?.map(t=>e.jsxs(l,{value:t.id,children:[t.firstName," ",t.lastName," (",t.email,")"]},t.id))})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Estado (LLC)"}),e.jsxs(D,{value:re.state,onValueChange:t=>$e(a=>({...a,state:t})),placeholder:"Seleccionar estado",className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-order-state",children:[e.jsx(l,{value:"New Mexico",children:"New Mexico - 739€"}),e.jsx(l,{value:"Wyoming",children:"Wyoming - 899€"}),e.jsx(l,{value:"Delaware",children:"Delaware - 1199€"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Importe (€)"}),e.jsx(o,{type:"number",value:re.amount,onChange:t=>$e(a=>({...a,amount:t.target.value})),placeholder:"739",className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-order-amount"})]})]}),e.jsxs($,{className:"mt-6 flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>Fe(!1),className:"w-full sm:w-auto rounded-full font-black","data-testid":"button-cancel-create-order",children:"Cancelar"}),e.jsx(s,{onClick:()=>Ot.mutate(re),disabled:Ot.isPending||!re.userId||!re.amount,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-confirm-create-order",children:Ot.isPending?e.jsx(V,{className:"w-4 h-4 animate-spin"}):"Crear Pedido"})]})]})}),e.jsx(T,{open:W.open,onOpenChange:t=>fe({open:t,code:t?W.code:null}),children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black text-primary",children:W.code?"Editar Código de Descuento":"Nuevo Código de Descuento"}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:W.code?"Modifica los datos del código":"Configura un nuevo código de descuento"})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Código"}),e.jsx(o,{value:y.code,onChange:t=>_(a=>({...a,code:t.target.value.toUpperCase()})),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base uppercase",disabled:!!W.code,"data-testid":"input-discount-code"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Tipo"}),e.jsxs(D,{value:y.discountType,onValueChange:t=>_(a=>({...a,discountType:t})),className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800","data-testid":"select-discount-type",children:[e.jsx(l,{value:"percentage",children:"Porcentaje (%)"}),e.jsx(l,{value:"fixed",children:"Fijo (centimos)"})]})]}),e.jsxs("div",{children:[e.jsxs(n,{className:"text-sm font-black text-primary mb-2 block",children:["Valor ",y.discountType==="percentage"?"(%)":"(centimos)"]}),e.jsx(o,{type:"number",value:y.discountValue,onChange:t=>_(a=>({...a,discountValue:t.target.value})),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-discount-value"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Pedido min. (EUR)"}),e.jsx(o,{type:"number",value:y.minOrderAmount,onChange:t=>_(a=>({...a,minOrderAmount:t.target.value})),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-discount-min-amount"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Usos max."}),e.jsx(o,{type:"number",value:y.maxUses,onChange:t=>_(a=>({...a,maxUses:t.target.value})),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-discount-max-uses"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Válido desde"}),e.jsx(o,{type:"date",value:y.validFrom,onChange:t=>_(a=>({...a,validFrom:t.target.value})),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-discount-valid-from"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary mb-2 block",children:"Válido hasta"}),e.jsx(o,{type:"date",value:y.validUntil,onChange:t=>_(a=>({...a,validUntil:t.target.value})),className:"rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base","data-testid":"input-discount-valid-until"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ka,{checked:y.isActive,onCheckedChange:t=>_(a=>({...a,isActive:t})),"data-testid":"switch-discount-active"}),e.jsx(n,{className:"text-sm font-semibold",children:"Código activo"})]})]}),e.jsxs($,{className:"mt-6 flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>fe({open:!1,code:null}),className:"w-full sm:w-auto rounded-full font-black","data-testid":"button-cancel-discount",children:"Cancelar"}),e.jsx(s,{onClick:async()=>{try{const t={code:y.code,discountType:y.discountType,discountValue:parseInt(y.discountValue),minOrderAmount:y.minOrderAmount?parseInt(y.minOrderAmount)*100:null,maxUses:y.maxUses?parseInt(y.maxUses):null,validFrom:y.validFrom||null,validUntil:y.validUntil||null,isActive:y.isActive};W.code?(await g("PATCH",`/api/admin/discount-codes/${W.code.id}`,t),i({title:"Código actualizado"})):(await g("POST","/api/admin/discount-codes",t),i({title:"Código creado"})),Sa(),fe({open:!1,code:null})}catch(t){i({title:"Error",description:t.message||"No se pudo guardar el código",variant:"destructive"})}},disabled:!y.code||!y.discountValue,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-save-discount",children:W.code?"Guardar Cambios":"Crear Código"})]})]})}),e.jsx(T,{open:Wa,onOpenChange:t=>{yt(t),t||wt("")},children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black",children:"Verifica tu correo electrónico"}),e.jsx(Q,{children:"Te hemos enviado un código de verificación para confirmar tu email"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary block mb-2",children:"Código de verificación"}),e.jsx(o,{value:Ne,onChange:t=>wt(t.target.value.replace(/\D/g,"")),className:"rounded-full text-center text-2xl font-black border-gray-200 focus:border-accent tracking-[0.5em]",maxLength:6,inputMode:"numeric",autoComplete:"one-time-code","data-testid":"input-email-verification-code"})]}),e.jsx(s,{onClick:async()=>{if(!Ne||Ne.length<6){i({title:"Introduce el código de 6 dígitos",variant:"destructive"});return}fa(!0);try{(await(await g("POST","/api/auth/verify-email",{code:Ne})).json()).success&&(await h.refetchQueries({queryKey:["/api/auth/user"]}),i({title:"Email verificado correctamente"}),yt(!1),wt(""))}catch(t){i({title:"Código incorrecto",description:t.message||"Inténtalo de nuevo o solicita un nuevo código",variant:"destructive"})}finally{fa(!1)}},disabled:ba||Ne.length<6,size:"lg",className:"w-full bg-accent text-primary font-black rounded-full","data-testid":"button-verify-email-code",children:ba?e.jsx(V,{className:"animate-spin"}):"Verificar mi email"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"¿No has recibido el código?"}),e.jsx(s,{variant:"link",onClick:async()=>{Na(!0);try{await g("POST","/api/auth/resend-verification"),i({title:"Código enviado",description:"Revisa tu email"})}catch{i({title:"Error",description:"No se pudo enviar el código",variant:"destructive"})}finally{Na(!1)}},disabled:ja,className:"text-accent p-0 h-auto","data-testid":"button-resend-verification-code",children:ja?"Enviando...":"Reenviar código"})]})]})]})}),e.jsx(T,{open:de.open,onOpenChange:t=>{Re({open:t,user:t?de.user:null}),t||(ft(""),jt(""),Nt(""))},children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black",children:"Enviar Link de Pago"}),e.jsxs(Q,{children:["Envía un enlace de pago a ",de.user?.firstName," ",de.user?.lastName]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary block mb-2",children:"Link de pago (URL)"}),e.jsx(o,{value:Ve,onChange:t=>ft(t.target.value),placeholder:"https://...",className:"rounded-full border-gray-200 focus:border-accent","data-testid":"input-payment-link-url"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary block mb-2",children:"Importe"}),e.jsx(o,{value:je,onChange:t=>jt(t.target.value),placeholder:"Ej: 739€",className:"rounded-full border-gray-200 focus:border-accent","data-testid":"input-payment-link-amount"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary block mb-2",children:"Mensaje (opcional)"}),e.jsx(J,{value:ca,onChange:t=>Nt(t.target.value),placeholder:"Mensaje adicional para el cliente...",className:"rounded-xl border-gray-200 focus:border-accent resize-none",rows:3,"data-testid":"input-payment-link-message"})]})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>Re({open:!1,user:null}),className:"w-full sm:w-auto rounded-full",children:"Cancelar"}),e.jsx(s,{onClick:async()=>{if(!Ve||!je){i({title:"Completa todos los campos requeridos",variant:"destructive"});return}ma(!0);try{await g("POST","/api/admin/send-payment-link",{userId:de.user?.id,paymentLink:Ve,amount:je,message:ca||`Por favor, completa el pago de ${je} a través del siguiente enlace.`}),i({title:"Link de pago enviado",description:`Se ha enviado el link a ${de.user?.email}`}),Re({open:!1,user:null}),ft(""),jt(""),Nt("")}catch(t){i({title:"Error",description:t.message||"No se pudo enviar el link",variant:"destructive"})}finally{ma(!1)}},disabled:oa||!Ve||!je,className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-send-payment-link",children:oa?e.jsx(V,{className:"animate-spin"}):"Enviar Link de Pago"})]})]})}),e.jsx(T,{open:Z.open,onOpenChange:t=>{Ke({open:t,order:t?Z.order:null}),t||(_e(null),vt("articles_of_organization"))},children:e.jsxs(L,{className:"w-full sm:max-w-md bg-white dark:bg-zinc-900",children:[e.jsxs(I,{children:[e.jsx(F,{className:"text-xl font-black text-primary",children:"Subir Documento para Cliente"}),e.jsxs(Q,{children:["Pedido: ",Z.order?.application?.requestCode||Z.order?.maintenanceApplication?.requestCode||Z.order?.invoiceNumber]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary block mb-2",children:"Tipo de Documento"}),e.jsxs(D,{value:pa,onValueChange:vt,className:"w-full rounded-full h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800",children:[e.jsx(l,{value:"articles_of_organization",children:"Artículos de Organización"}),e.jsx(l,{value:"certificate_of_formation",children:"Certificado de Formación"}),e.jsx(l,{value:"boir",children:"BOIR"}),e.jsx(l,{value:"ein_document",children:"Documento EIN"}),e.jsx(l,{value:"operating_agreement",children:"Acuerdo Operativo"}),e.jsx(l,{value:"invoice",children:"Factura"}),e.jsx(l,{value:"other",children:"Otro Documento"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-black text-primary block mb-2",children:"Archivo"}),e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx("input",{type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:t=>{const a=t.target.files?.[0];a&&_e(a)}}),e.jsx("div",{className:`p-4 border-2 border-dashed rounded-xl text-center ${le?"border-accent bg-accent/5":"border-gray-200 dark:border-zinc-700"}`,children:le?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-accent"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[200px]",children:le.name})]}):e.jsxs("div",{className:"text-muted-foreground text-sm",children:[e.jsx(Qt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"Haz clic para seleccionar archivo"]})})]})]})]}),e.jsxs($,{className:"flex-col sm:flex-row gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>Ke({open:!1,order:null}),className:"w-full sm:w-auto rounded-full font-black",children:"Cancelar"}),e.jsx(s,{disabled:!le||ha,onClick:async()=>{if(!(!le||!Z.order)){ga(!0);try{const t=new FormData;t.append("file",le),t.append("orderId",Z.order.id),t.append("documentType",pa);const a=await fetch("/api/admin/documents/upload",{method:"POST",body:t,credentials:"include"});if(a.ok)i({title:"Documento subido",description:"El documento ha sido añadido al expediente del cliente."}),h.invalidateQueries({queryKey:["/api/admin/documents"]}),h.invalidateQueries({queryKey:["/api/user/documents"]}),Ke({open:!1,order:null}),_e(null);else{const m=await a.json();i({title:"Error",description:m.message||"No se pudo subir el documento",variant:"destructive"})}}catch{i({title:"Error",description:"Error de conexión",variant:"destructive"})}finally{ga(!1)}}},className:"w-full sm:w-auto bg-accent text-primary font-black rounded-full","data-testid":"button-admin-upload-doc",children:ha?e.jsx(V,{className:"animate-spin"}):"Subir Documento"})]})]})}),e.jsx(Ma,{})]})}export{Qs as default};
