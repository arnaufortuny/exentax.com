import{a as i,j as e,N as le,U as B,P as ye,y as W,B as H,G as ve,O as we,V as Ce,W as ke,t as D,i as ie,Q as Ee,E as Ae,F as Se,H as De}from"./react-vendor-0u4i6o3R.js";import{u as Pe}from"./vendor-CcWLwBcD.js";import{a as Le,t as Ve}from"./forms-soYwKzaw.js";import{u as Te,N as Fe,F as Ie,a as k}from"./index-CLIhc-sl.js";import{u as Me,S as Oe,F as Ue,e as v,f as d,g as x,i as m,j as h,B as n,h as y,I as w,m as qe,n as ze,o as Re,p as $e,q as Q,k as Be,l as F}from"./ui-components-C65bcPfg.js";import{u as We}from"./use-form-draft-BwdBgsUC.js";import{o as He,b as Y,s as u}from"./validation-D376FIhw.js";import"./tanstack-BGyfl4P4.js";import"./i18n-CerrjaX-.js";import"./radix-ui-CJuqdRty.js";const Qe=12,Ye=He({creationSource:u().min(1,"Este campo es obligatorio"),ownerFullName:u().min(1,"Este campo es obligatorio"),ownerPhone:u().min(1,"Este campo es obligatorio"),ownerEmail:u().email("Email inválido"),companyName:u().min(1,"Este campo es obligatorio"),ein:u().min(1,"Este campo es obligatorio"),state:u().min(1,"Este campo es obligatorio"),businessActivity:u().min(1,"Este campo es obligatorio"),expectedServices:u().min(1,"Este campo es obligatorio"),wantsDissolve:u().min(1,"Este campo es obligatorio"),password:u().min(8,"Mínimo 8 caracteres").optional(),confirmPassword:u().optional(),paymentMethod:u().optional(),discountCode:u().optional(),authorizedManagement:Y().refine(o=>o===!0,"Debes autorizar"),termsConsent:Y().refine(o=>o===!0,"Debes aceptar"),dataProcessingConsent:Y().refine(o=>o===!0,"Debes aceptar")}).refine(o=>!o.password||o.password===o.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]});function dt(){const{user:o,isAuthenticated:E,refetch:ce}=Te(),[,G]=Pe(),[r,C]=i.useState(0),[Ge,Ke]=i.useState(null),[_e,K]=i.useState(""),{toast:c}=Me(),[A,I]=i.useState(""),[oe,M]=i.useState(!1),[P,O]=i.useState(!1),[U,_]=i.useState(!1),[q,J]=i.useState(!1),[b,L]=i.useState(null),[X,Z]=i.useState(!1),S=new URLSearchParams(window.location.search).get("state")||"New Mexico",a=Le({resolver:Ve(Ye),defaultValues:{creationSource:"",ownerFullName:"",ownerPhone:"",ownerEmail:"",companyName:"",ein:"",state:S,businessActivity:"",expectedServices:"",wantsDissolve:"No",password:"",confirmPassword:"",paymentMethod:"transfer",discountCode:"",authorizedManagement:!1,termsConsent:!1,dataProcessingConsent:!1}}),ee=i.useRef(r);r>ee.current,i.useEffect(()=>{ee.current=r},[r]);const de={creationSource:"",ownerFullName:"",ownerPhone:"",ownerEmail:"",companyName:"",ein:"",state:S,businessActivity:"",expectedServices:"",wantsDissolve:"No",authorizedManagement:!1,termsConsent:!1,dataProcessingConsent:!1},{clearDraft:te}=We({form:a,storageKey:"maintenance-application-draft",debounceMs:1e3,defaultValues:de});i.useEffect(()=>{if(E&&o){const t=`${o.firstName||""} ${o.lastName||""}`.trim(),s=o.email||"",l=o.phone||"",p=o.businessActivity||"";a.reset({...a.getValues(),ownerFullName:t,ownerEmail:s,ownerPhone:l,businessActivity:p});const N=[{step:0,value:""},{step:1,value:t},{step:2,value:l},{step:3,value:s},{step:4,value:""}];for(const j of N)if(!j.value){C(j.step);return}C(4)}},[E,o,a]);const[Xe,ae]=i.useState(!1),[se,me]=i.useState(""),[re,ne]=i.useState(!1),[V,z]=i.useState(!1),[R,xe]=i.useState(!1),pe=async t=>{ne(!0);try{const l=await(await k("POST","/api/auth/check-email",{email:t})).json();return ae(l.exists),me(l.firstName||""),l.exists}catch{return!1}finally{ne(!1)}},ue=a.watch("state"),T={"New Mexico":53900,Wyoming:69900,Delaware:89900}[ue]||53900,he=async t=>{if(!t.trim()){L(null);return}Z(!0);try{const l=await(await k("POST","/api/discount-codes/validate",{code:t.trim(),orderAmount:T})).json();L(l),l.valid?c({title:"Código aplicado",description:`Descuento de ${(l.discountAmount/100).toFixed(2)}€`}):c({title:"Código inválido",description:l.message,variant:"destructive"})}catch{L({valid:!1,discountAmount:0,message:"Error al validar"})}finally{Z(!1)}},be=a.watch("ownerEmail");i.useEffect(()=>{M(!1),O(!1),I("")},[be]);const fe=async()=>{const t=a.getValues("ownerEmail");if(!t){c({title:"Ingresa tu email primero",variant:"destructive"});return}_(!0);try{const s=await k("POST","/api/register/send-otp",{email:t});if(s.ok)M(!0),c({title:"Código enviado",description:"Revisa tu bandeja de entrada"});else{const l=await s.json();c({title:"Error",description:l.message,variant:"destructive"})}}catch{c({title:"Error al enviar el código",variant:"destructive"})}finally{_(!1)}},ge=async()=>{const t=a.getValues("ownerEmail");if(!A||A.length!==6){c({title:"Ingresa el código de 6 dígitos",variant:"destructive"});return}J(!0);try{const s=await k("POST","/api/register/verify-otp",{email:t,otp:A});if(s.ok)O(!0),c({title:"Email verificado",description:"Ahora crea tu contraseña"});else{const l=await s.json();c({title:"Error",description:l.message,variant:"destructive"})}}catch{c({title:"Código inválido o expirado",variant:"destructive"})}finally{J(!1)}},je=async()=>{const t=a.getValues("ownerEmail"),s=a.getValues("password");if(!s||s.length<1){c({title:"Introduce tu contraseña",variant:"destructive"});return}try{const l=await k("POST","/api/login",{email:t,password:s});if(!l.ok){const p=await l.json();c({title:p.message||"Contraseña incorrecta",variant:"destructive"});return}await ce(),O(!0),c({title:"Sesión iniciada correctamente"}),C(4)}catch{c({title:"Error al iniciar sesión",variant:"destructive"})}},f=async()=>{const s={0:["creationSource"],1:["ownerFullName"],2:["ownerPhone"],3:["ownerEmail"],4:["companyName"],5:["ein"],6:["state"],7:["businessActivity"],8:["expectedServices"],9:["wantsDissolve"]}[r];if(!(s&&!await a.trigger(s))){if(r===3&&!E){const l=a.getValues("ownerEmail");if(await pe(l)){C(20);return}}if(r===9){C(E||P?11:10);return}C(l=>l+1)}},g=()=>{r>0&&C(t=>t-1)},Ne=async t=>{if(!V){z(!0);try{const s=S.includes("Wyoming")?2:S.includes("Delaware")?3:1,l=t.state||S;if(E){const p={productId:s,state:l};b?.valid&&t.discountCode&&(p.discountCode=t.discountCode,p.discountAmount=b.discountAmount);const N=await k("POST","/api/maintenance/orders",p);if(!N.ok){const $=await N.json();throw new Error($.message||"Error al crear pedido")}const j=await N.json();await k("PUT",`/api/maintenance/${j.application.id}`,{...t,status:"submitted"}),K(j.application.requestCode||""),c({title:"Solicitud enviada correctamente"}),te(),G(`/contacto?success=true&type=maintenance&orderId=${encodeURIComponent(j.application.requestCode||"")}`)}else{if(!t.password||t.password.length<8){c({title:"La contraseña debe tener al menos 8 caracteres",variant:"destructive"}),z(!1);return}const p={productId:s,state:l,email:t.ownerEmail,password:t.password,ownerFullName:t.ownerFullName,paymentMethod:t.paymentMethod||"transfer"};b?.valid&&t.discountCode&&(p.discountCode=t.discountCode,p.discountAmount=b.discountAmount);const N=await k("POST","/api/maintenance/orders",p);if(!N.ok){const $=await N.json();throw new Error($.message||"Error al crear pedido")}const j=await N.json();await k("PUT",`/api/maintenance/${j.application.id}`,{...t,status:"submitted"}),K(j.application.requestCode||""),c({title:"Solicitud enviada y cuenta creada"}),te(),G(`/contacto?success=true&type=maintenance&orderId=${encodeURIComponent(j.application.requestCode||"")}`)}}catch(s){c({title:s.message||"Error al enviar",variant:"destructive"})}finally{z(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-background font-sans w-full",children:[e.jsx(Fe,{}),e.jsxs("main",{className:"pt-24 pb-16 max-w-4xl mx-auto px-5 sm:px-6 md:px-8",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-black mb-8 md:mb-12 text-primary leading-tight text-center",children:["Pack de ",e.jsx("span",{className:"text-accent",children:"Mantenimiento"})," LLC"]}),e.jsxs("div",{children:[e.jsx(Oe,{currentStep:r,totalSteps:Qe,className:"mb-6"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-primary  mb-2 leading-tight",children:"Solicitud de Mantenimiento"}),e.jsx(Ue,{...a,children:e.jsxs("form",{className:"space-y-6 md:space-y-8",onSubmit:a.handleSubmit(Ne),children:[r===0&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(le,{className:"w-6 h-6 text-[#6EDC8A]"})," 1️⃣ ¿Ya tienes una LLC creada?"]}),e.jsx(v,{children:"Para saber desde dónde partimos"}),e.jsx(d,{control:a.control,name:"creationSource",render:({field:t})=>e.jsxs(x,{className:"space-y-3",children:[e.jsx(m,{children:e.jsx("div",{className:"flex flex-col gap-3",children:["Sí","No (en ese caso, te orientamos primero)"].map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-full border border-border bg-white dark:bg-zinc-900 hover:border-accent cursor-pointer transition-all active:scale-[0.98]",children:[e.jsx("input",{type:"radio",...t,value:s,checked:t.value===s,className:"w-5 h-5 accent-[#6EDC8A]"}),e.jsx("span",{className:"font-black text-primary text-sm md:text-base",children:s})]},s))})}),e.jsx(h,{})]})}),e.jsx(n,{type:"button",onClick:f,className:"w-full bg-accent text-primary font-black h-11 md:h-12 rounded-full text-sm md:text-base shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all",children:"Siguiente"})]},"step-0"),r===1&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(B,{className:"w-6 h-6 text-[#6EDC8A]"})," 2️⃣ Nombre completo"]}),e.jsx(v,{children:"El de los documentos oficiales"}),e.jsx(d,{control:a.control,name:"ownerFullName",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-sm md:text-base font-black text-primary flex items-center gap-2",children:"Nombre completo:"}),e.jsx(m,{children:e.jsx(w,{...t,className:"rounded-full h-11 md:h-14 px-4 md:px-6 border-border focus:border-accent transition-all font-black text-primary placeholder:text-primary/30 text-lg"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===2&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(ye,{className:"w-6 h-6 text-[#6EDC8A]"})," 3️⃣ Teléfono de contacto"]}),e.jsx(v,{children:"Para avisos importantes y comunicación rápida"}),e.jsx(d,{control:a.control,name:"ownerPhone",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-sm md:text-base font-black text-primary flex items-center gap-2",children:"Teléfono:"}),e.jsx(m,{children:e.jsx(w,{...t,className:"rounded-full h-11 md:h-14 px-4 md:px-6 border-border focus:border-accent transition-all font-black text-primary placeholder:text-primary/30 text-lg"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===3&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(W,{className:"w-6 h-6 text-[#6EDC8A]"})," 4️⃣ Email"]}),e.jsx(v,{children:"Aquí recibirás recordatorios y documentación"}),e.jsx(d,{control:a.control,name:"ownerEmail",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-sm md:text-base font-black text-primary flex items-center gap-2",children:"Email:"}),e.jsx(m,{children:e.jsx(w,{...t,type:"email",inputMode:"email",className:"rounded-full h-11 md:h-14 px-4 md:px-6 border-border focus:border-accent transition-all font-black text-primary placeholder:text-primary/30 text-lg"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===4&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(le,{className:"w-6 h-6 text-[#6EDC8A]"})," 5️⃣ Nombre legal de la LLC"]}),e.jsx(v,{children:"Tal y como figura en los documentos oficiales"}),e.jsx(d,{control:a.control,name:"companyName",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-sm md:text-base font-black text-primary flex items-center gap-2",children:"Nombre de la LLC:"}),e.jsx(m,{children:e.jsx(w,{...t,className:"rounded-full h-11 md:h-14 px-4 md:px-6 border-border focus:border-accent transition-all font-black text-primary placeholder:text-primary/30 text-lg"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===5&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(H,{className:"w-6 h-6 text-[#6EDC8A]"})," 6️⃣ EIN"]}),e.jsx(v,{children:"El número fiscal de tu empresa en EE. UU."}),e.jsx(d,{control:a.control,name:"ein",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-sm md:text-base font-black text-primary flex items-center gap-2",children:"EIN:"}),e.jsx(m,{children:e.jsx(w,{...t,className:"rounded-full h-11 md:h-14 px-4 md:px-6 border-border focus:border-accent transition-all font-black text-primary placeholder:text-primary/30 text-lg"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===6&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(ve,{className:"w-6 h-6 text-accent"})," 7️⃣ Estado de constitución"]}),e.jsx(v,{children:"Cada estado tiene sus propios plazos"}),e.jsx(d,{control:a.control,name:"state",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-sm md:text-base font-black text-primary flex items-center gap-2",children:"Estado:"}),e.jsxs(qe,{onValueChange:t.onChange,value:t.value||"",children:[e.jsx(m,{children:e.jsx(ze,{className:"rounded-full h-11 md:h-14 px-4 md:px-6 border-border bg-white dark:bg-zinc-900 focus:ring-[#6EDC8A] font-black text-primary text-lg",children:e.jsx(Re,{placeholder:"Seleccionar estado"})})}),e.jsxs($e,{children:[e.jsx(Q,{value:"New Mexico",children:"New Mexico"}),e.jsx(Q,{value:"Wyoming",children:"Wyoming"}),e.jsx(Q,{value:"Delaware",children:"Delaware"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===7&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(we,{className:"w-6 h-6 text-[#6EDC8A]"})," 8️⃣ Actividad"]}),e.jsx(v,{children:"Tipo de negocio o producto"}),e.jsx(d,{control:a.control,name:"businessActivity",render:({field:t})=>e.jsxs(x,{children:[e.jsx(m,{children:e.jsx(Be,{...t,className:"rounded-[2rem] min-h-[120px] p-6 border-border focus:border-accent transition-all font-black text-primary placeholder:text-primary/30 text-lg"})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===8&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(Ce,{className:"w-6 h-6 text-[#6EDC8A]"})," 9️⃣ ¿Qué necesitas gestionar?"]}),e.jsx(v,{children:"Marca lo que aplique"}),e.jsx(d,{control:a.control,name:"expectedServices",render:({field:t})=>e.jsx(x,{className:"space-y-3",children:e.jsx(m,{children:e.jsx("div",{className:"flex flex-col gap-3",children:["Recordatorios y cumplimiento anual","Presentación de documentos obligatorios","Soporte durante el año","Revisión general de la situación de la LLC"].map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-[2rem] border border-border bg-white dark:bg-zinc-900 hover:border-accent cursor-pointer transition-all active:scale-[0.98]",children:[e.jsx(F,{checked:t.value?.split(", ").includes(s),onCheckedChange:l=>{const p=t.value?t.value.split(", "):[],N=l?[...p,s]:p.filter(j=>j!==s);t.onChange(N.join(", "))},className:"border-border data-[state=checked]:bg-accent data-[state=checked]:border-[#6EDC8A]"}),e.jsx("span",{className:"font-black text-sm text-primary",children:s})]},s))})})})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===9&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black  text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(ke,{className:"w-6 h-6 text-[#6EDC8A]"})," 1️⃣0️⃣ ¿Deseas disolver tu LLC?"]}),e.jsx(v,{children:"Si necesitas cerrar la empresa de forma correcta y ordenada"}),e.jsx(d,{control:a.control,name:"wantsDissolve",render:({field:t})=>e.jsxs(x,{className:"space-y-3",children:[e.jsx(m,{children:e.jsx("div",{className:"flex flex-col gap-3",children:["No","Sí, quiero disolver mi LLC","Quiero que me expliquéis primero el proceso"].map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-full border border-border bg-white dark:bg-zinc-900 hover:border-accent cursor-pointer transition-all active:scale-[0.98]",children:[e.jsx("input",{type:"radio",...t,value:s,checked:t.value===s,className:"w-5 h-5 accent-[#6EDC8A]"}),e.jsx("span",{className:"font-black text-primary text-sm md:text-base",children:s})]},s))})}),e.jsx(h,{})]})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base",children:"Siguiente"})]})]},"step-"+r),r===10&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(B,{className:"w-6 h-6 text-[#6EDC8A]"})," Crea tu cuenta"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Para gestionar tu pedido necesitas una cuenta. Primero verifica tu email."}),!E&&e.jsxs("div",{className:"space-y-6",children:[!P&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-5",children:[e.jsx("p",{className:"text-xs font-black text-primary tracking-widest mb-2",children:"TU EMAIL"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:a.getValues("ownerEmail")})]}),oe?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-center",children:[e.jsx(W,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-bold text-green-700",children:"Código enviado a tu email"}),e.jsx("p",{className:"text-xs text-green-600",children:"Revisa tu bandeja de entrada (y spam)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-primary tracking-widest block mb-2",children:"Código de verificación"}),e.jsx(w,{type:"text",value:A,onChange:t=>I(t.target.value.replace(/\D/g,"").slice(0,6)),className:"rounded-full p-6 border-border focus:border-accent text-center text-xl tracking-[0.5em] font-mono",maxLength:6,"data-testid":"input-otp-code"})]}),e.jsxs(n,{type:"button",onClick:ge,disabled:q||A.length!==6,className:"w-full bg-accent text-primary font-black rounded-full h-14 shadow-lg shadow-[#6EDC8A]/20 disabled:opacity-50","data-testid":"button-verify-otp",children:[q?e.jsx(D,{className:"w-5 h-5 animate-spin mr-2"}):e.jsx(H,{className:"w-5 h-5 mr-2"}),q?"Verificando...":"Verificar código"]}),e.jsx("button",{type:"button",onClick:()=>{M(!1),I("")},className:"text-xs text-[#6EDC8A] underline w-full text-center",children:"Reenviar código"})]}):e.jsxs(n,{type:"button",onClick:fe,disabled:U,className:"w-full bg-accent text-primary font-black rounded-full h-14 shadow-lg shadow-[#6EDC8A]/20","data-testid":"button-send-otp",children:[U?e.jsx(D,{className:"w-5 h-5 animate-spin mr-2"}):e.jsx(W,{className:"w-5 h-5 mr-2"}),U?"Enviando...":"Enviar código de verificación"]})]}),P&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-center mb-4",children:[e.jsx(ie,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-bold text-green-700",children:"Email verificado"})]}),e.jsx(d,{control:a.control,name:"password",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-xs font-black text-primary tracking-widest",children:"Contraseña"}),e.jsx(m,{children:e.jsx(w,{...t,type:"password",className:"rounded-full p-6 border-border focus:border-accent","data-testid":"input-password"})}),e.jsx(h,{})]})}),e.jsx(d,{control:a.control,name:"confirmPassword",render:({field:t})=>e.jsxs(x,{children:[e.jsx(y,{className:"text-xs font-black text-primary tracking-widest",children:"Confirmar Contraseña"}),e.jsx(m,{children:e.jsx(w,{...t,type:"password",className:"rounded-full p-6 border-border focus:border-accent","data-testid":"input-confirm-password"})}),e.jsx(h,{})]})})]})]}),E&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6 text-center",children:[e.jsx(ie,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-black text-green-700",children:"Ya tienes cuenta activa"}),e.jsx("p",{className:"text-xs text-green-600",children:"Continúa con el siguiente paso"})]}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,disabled:!E&&(!P||!a.getValues("password")||a.getValues("password").length<8||a.getValues("password")!==a.getValues("confirmPassword")),className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 disabled:opacity-50","data-testid":"button-next-step-10",children:"Siguiente"})]})]},"step-"+r),r===11&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(Ee,{className:"w-6 h-6 text-[#6EDC8A]"})," Método de Pago"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona cómo deseas realizar el pago del servicio de mantenimiento."}),e.jsxs("div",{className:"bg-accent text-primary p-6 rounded-[2rem] text-center mb-6",children:[e.jsx("p",{className:"text-[10px] font-black tracking-widest opacity-50 mb-1",children:"Total a pagar"}),e.jsx("p",{className:"text-3xl font-black",children:b?.valid?`${((T-b.discountAmount)/100).toFixed(2)} €`:`${(T/100).toFixed(2)} €`}),b?.valid&&e.jsxs("p",{className:"text-xs line-through opacity-60",children:[(T/100).toFixed(2)," €"]}),e.jsx("p",{className:"text-[10px] opacity-80",children:"Mantenimiento Anual"})]}),e.jsxs("div",{className:"space-y-3 p-5 rounded-2xl border-2 border-border bg-white dark:bg-zinc-900 mb-6",children:[e.jsx("label",{className:"font-black text-primary text-sm block",children:"Código de descuento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{control:a.control,name:"discountCode",render:({field:t})=>e.jsx(x,{className:"flex-1",children:e.jsx(m,{children:e.jsx(w,{...t,className:"rounded-full h-11 px-4 border-border focus:border-accent uppercase",onChange:s=>{t.onChange(s.target.value.toUpperCase()),L(null)},"data-testid":"input-discount-code"})})})}),e.jsx(n,{type:"button",variant:"outline",onClick:()=>he(a.getValues("discountCode")||""),disabled:X||!a.getValues("discountCode"),className:"rounded-full h-11 px-6 font-black border-border","data-testid":"button-validate-discount",children:X?e.jsx(D,{className:"w-4 h-4 animate-spin"}):"Aplicar"})]}),b&&e.jsx("div",{className:`text-sm p-3 rounded-xl ${b.valid?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:b.valid?`Descuento aplicado: -${(b.discountAmount/100).toFixed(2)}€`:b.message})]}),e.jsx(d,{control:a.control,name:"paymentMethod",render:({field:t})=>e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("label",{className:`flex items-start gap-4 p-5 rounded-2xl border-2 cursor-pointer transition-all ${t.value==="transfer"?"border-[#6EDC8A] bg-accent/5":"border-border bg-white dark:bg-zinc-900 hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",...t,value:"transfer",checked:t.value==="transfer",className:"w-5 h-5 accent-[#6EDC8A] mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-black text-primary text-sm block mb-2",children:"Transferencia Bancaria"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-xs space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Beneficiario:"})," ",e.jsx("span",{className:"font-bold",children:"Fortuny Consulting LLC"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Número de cuenta:"})," ",e.jsx("span",{className:"font-bold font-mono",children:"141432778929495"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Número de ruta:"})," ",e.jsx("span",{className:"font-bold font-mono",children:"121145433"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-60",children:"Banco:"})," ",e.jsx("span",{className:"font-bold",children:"Column N.A."})]}),e.jsx("p",{className:"opacity-60 text-[10px] pt-2",children:"1 Letterman Drive, Building A, Suite A4-700, San Francisco, CA 94129"}),e.jsx("p",{className:"pt-2 text-[#6EDC8A] font-bold",children:"Concepto: Tu número de pedido"})]})]})]}),e.jsxs("label",{className:`flex items-start gap-4 p-5 rounded-2xl border-2 cursor-pointer transition-all ${t.value==="link"?"border-[#6EDC8A] bg-accent/5":"border-border bg-white dark:bg-zinc-900 hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",...t,value:"link",checked:t.value==="link",className:"w-5 h-5 accent-[#6EDC8A] mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-black text-primary text-sm block mb-1",children:"Link de Pago"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recibirás un enlace de pago seguro por email para completar la transacción."})]})]})]})})}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border",children:"Atrás"}),e.jsx(n,{type:"button",onClick:f,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20",children:"Siguiente"})]})]},"step-"+r),r===12&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black text-primary border-b border-accent/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(H,{className:"w-6 h-6 text-accent"})," Último paso: Confirmación"]}),e.jsxs("div",{className:"bg-accent/5 p-5 rounded-2xl border border-accent/20 text-xs space-y-2 mb-4",children:[e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"Nombre:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("ownerFullName")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"Email:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("ownerEmail")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"LLC:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("companyName")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"opacity-50",children:"Pago:"})," ",e.jsx("span",{className:"font-black",children:a.getValues("paymentMethod")==="transfer"?"Transferencia Bancaria":"Link de Pago"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{control:a.control,name:"authorizedManagement",render:({field:t})=>e.jsxs(x,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 rounded-2xl bg-gray-50",children:[e.jsx(m,{children:e.jsx(F,{checked:t.value,onCheckedChange:t.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(y,{className:"text-xs md:text-sm font-medium",children:"Autorizo a Easy US LLC a gestionar administrativamente mi LLC ante los organismos competentes."}),e.jsx(h,{})]})]})}),e.jsx(d,{control:a.control,name:"dataProcessingConsent",render:({field:t})=>e.jsxs(x,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 rounded-2xl bg-gray-50",children:[e.jsx(m,{children:e.jsx(F,{checked:t.value,onCheckedChange:t.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(y,{className:"text-xs md:text-sm font-medium",children:"Acepto el tratamiento de mis datos personales según la política de privacidad."}),e.jsx(h,{})]})]})}),e.jsx(d,{control:a.control,name:"termsConsent",render:({field:t})=>e.jsxs(x,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 rounded-2xl bg-gray-50",children:[e.jsx(m,{children:e.jsx(F,{checked:t.value,onCheckedChange:t.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(y,{className:"text-xs md:text-sm font-medium",children:"He leído y acepto los Términos y Condiciones de Easy US LLC."}),e.jsx(h,{})]})]})})]}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:g,className:"flex-1 rounded-full h-10 md:h-12 font-black border-border active:scale-95 transition-all text-sm md:text-base",children:"Atrás"}),e.jsxs(n,{type:"submit",disabled:V,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all text-sm md:text-base disabled:opacity-50",children:[V?e.jsx(D,{className:"w-5 h-5 animate-spin mr-2"}):null,V?"Enviando...":"Enviar Solicitud"]})]})]},"step-"+r),r===20&&e.jsxs("div",{className:"space-y-6 text-left",children:[e.jsxs("h2",{className:"text-xl md:text-2xl font-black text-primary border-b border-[#6EDC8A]/20 pb-2 leading-tight flex items-center gap-2",children:[e.jsx(Ae,{className:"w-6 h-6 text-[#6EDC8A]"})," Inicia sesión"]}),e.jsxs("div",{className:"bg-accent/10 border border-[#6EDC8A]/30 rounded-2xl p-5 text-center",children:[e.jsx(B,{className:"w-8 h-8 text-[#6EDC8A] mx-auto mb-3"}),e.jsxs("p",{className:"text-sm font-black text-primary mb-1",children:["¡Hola",se?`, ${se}`:"","!"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ya tienes una cuenta con este email. Inicia sesión para continuar."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-5",children:[e.jsx("p",{className:"text-xs font-black text-primary tracking-widest mb-2",children:"TU EMAIL"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:a.getValues("ownerEmail")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-black text-primary tracking-widest block",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{type:R?"text":"password",value:a.getValues("password")||"",onChange:t=>a.setValue("password",t.target.value),className:"rounded-full p-6 pr-12 border-border focus:border-accent","data-testid":"input-login-password"}),e.jsx("button",{type:"button",onClick:()=>xe(!R),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:R?e.jsx(Se,{className:"w-5 h-5"}):e.jsx(De,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{ae(!1),C(3),a.setValue("ownerEmail","")},className:"flex-1 rounded-full h-10 md:h-12 font-black border-border",children:"Usar otro email"}),e.jsxs(n,{type:"button",onClick:je,disabled:re,className:"flex-1 bg-accent text-primary font-black rounded-full h-10 md:h-12 shadow-lg shadow-[#6EDC8A]/20","data-testid":"button-login-submit",children:[re?e.jsx(D,{className:"w-5 h-5 animate-spin mr-2"}):null,"Iniciar sesión"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/recuperar",className:"text-xs text-[#6EDC8A] hover:underline",children:"¿Olvidaste tu contraseña?"})})]},"step-"+r)]})})]})]})]}),e.jsx(Ie,{})]})}export{dt as default};
