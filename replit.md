# Easy US LLC - Project Overview

## Overview
Easy US LLC is a business formation service for Spanish-speaking entrepreneurs, specializing in LLC formation in New Mexico, Wyoming, and Delaware. The project offers comprehensive support including banking assistance, annual maintenance, and multilingual services, primarily in Spanish. Its core purpose is to provide a streamlined and user-friendly experience for international clients navigating the US business landscape, aiming for a significant market presence by simplifying complex legal and financial processes.

## User Preferences
I want to be communicated with in a clear and concise manner. I prefer explanations that are easy to understand, avoiding overly technical jargon. I appreciate an iterative development approach where I can provide feedback throughout the process. Please ask for my approval before implementing any significant changes to the codebase or design.

## System Architecture
The application is built with a modern UI/UX, featuring a consistent design system (Primary Green: #6EDC8A, Carbon Black: #0E1215, Off White: #F7F7F5, Soft Gray: #E6E9EC, Text Gray: #6B7280) and typography (Inter for titles, Sans-serif for body). UI animations are handled with Framer Motion.

**Technical Implementations:**
- **Client-side:** Developed with React, utilizing a modular structure for pages (Home, Servicios, FAQ, Contacto) and reusable layout components (Navbar, Footer, HeroSection, Newsletter). Client-side routing is managed by Wouter.
- **Server-side:** Powered by an Express.js backend with a comprehensive routes file (`server/routes.ts`) containing 84 endpoints organized by functionality: admin operations, user management, orders, LLC applications, maintenance, messaging, newsletter, authentication, and PDF generation.
- **Database:** Drizzle ORM defines the schema with Zod for type validation, incorporating key indexes for performance.
- **Email System:** Professional email templates are managed through three IONOS accounts for system notifications, support, and Trustpilot review requests. All emails are designed for consistency and branding. Client dashboard links use app.easyusllc.com subdomain.
- **Authentication:** Features robust OTP verification, session management, and secure password handling. Account creation is mandatory for orders, with automatic verification and a welcome email. Includes Google OAuth only (no Apple) with CSRF-protected redirect flow, modern multi-color Google icon, and automatic account creation for new OAuth users. Users can connect/disconnect Google from their profile.
- **Form Management:** Multi-step wizard patterns for LLC (/llc/formation), maintenance (/llc/maintenance), and contact (/contacto) forms, including auto-fill for authenticated users and auto-saving drafts to local storage. Address fields are standardized across all forms with separate fields: streetType (Calle, Avenida, etc.), address, city, province, postalCode, and country. When non-authenticated users create an account at the end of the LLC form, all their address and profile data is automatically copied to the new user account.
- **Admin Panel:** Integrated into the client dashboard for privileged users, offering full control over orders, users, and messages.
- **Performance Optimizations:** Includes Gzip compression, advanced cache headers, lazy loading (`loading="lazy"` on all non-LCP images), `content-visibility: auto` for images, non-blocking font loading, and route prefetching. PWA support is also implemented for an app-like experience. In-memory cache with 30s TTL for admin statistics endpoint reduces database load. Email queue system with retry logic (max 3 retries), queue size cap (100), and 1-hour TTL prevents memory growth and ensures delivery reliability. Dashboard uses useMemo for draftOrders, activeOrders, and menuItems to prevent re-renders. jsPDF loads dynamically only when generating PDFs (~397KB bundle reduction).
- **Client Tools:** Invoice Generator at `/tools/invoice` allows clients to create professional PDF invoices with their LLC data. Accessible from Dashboard > Herramientas tab.
- **Security:** Enhanced rate limiting, comprehensive security headers (HSTS, COOP, CORP, CSP), secure API endpoints with validation, HTML sanitization, and audit logging. A centralized security module manages these functions. Protected file serving: documents in /uploads are served through authenticated routes that verify ownership (userId or orderId) before serving files. Message replies restricted to message owner or admin. All order routes enforce userId ownership checks. Advanced fraud detection: IP tracking per user, login counting with periodic OTP verification (every 3 logins or on IP change), automatic account review for suspicious activity (7+ orders in 24h or 4+ orders in 1h - more permissive), IP-based order blocking (7+ orders from same IP in 24h triggers temporary block), and users with organization documents skip security OTP. Account states: "active" (normal), "pending" (under review/needs email verification - can login/upload docs only), "deactivated" (blocked entirely), "vip" (special status). Profile changes to sensitive fields (idNumber, idType, address, streetType, city, province, postalCode, country, phone, birthDate) require OTP verification and send admin email alerts with detailed change log.
- **Internationalization (i18n):** Full bilingual support (Spanish/English) via react-i18next. Translation files in `client/src/locales/`. Language toggle in navbar with automatic detection.
- **Dark Mode:** Complete dark/light theme system with ThemeProvider hook (`client/src/hooks/use-theme.tsx`). Theme persisted in localStorage. CSS variables defined in `index.css` for seamless switching. Optimized dark mode palette using softer gray-blue tones (hsl(220 15% 10%)) for better eye comfort. All components use semantic color tokens (bg-background, bg-card, bg-muted, text-foreground, border-border) ensuring proper adaptation in both modes without breaking light mode design. Theme toggle uses white background with text abbreviations (ES/EN) and Check icon for selected state.
- **PDF Generation:** Modern single-page design with real bank details (Column Bank NA, Fortuny Consulting LLC, Account: 141432778929495, Routing: 121145433, SWIFT: CLNOUS66MER). Invoice includes admin-set payment links for pending orders. Receipt shows LLC details only when available (no EIN for new formations). All PDFs use hola@easyusllc.com as contact.
- **Testing:** Automated test suite with Vitest (22+ tests). Run with `npm run test`. Tests cover validation, i18n, theme, and PDF generation.
- **SEO Optimization:** Maximum SEO with targeted keywords (tu LLC, Limited Liability Company, fiscalidad, optimización impuestos, tax). Structured data (JSON-LD) with 10+ schemas: Organization, Service, FAQPage (9 questions ES/EN), LocalBusiness, BreadcrumbList, WebSite with SearchAction, Product with AggregateRating, HowTo (4-step formation guide), ProfessionalService with areaServed (5 countries), ItemList for packages, and SpeakableSpecification. Server-side SEO headers: X-Robots-Tag (index/noindex per page type), canonical Link headers, optimized Cache-Control for SEO files. Enhanced robots.txt with bot-specific rules (Googlebot, Bingbot, Yandex, DuckDuckBot, social media bots) and blocked bad bots (AhrefsBot, SemrushBot, MJ12bot). Dual sitemaps: sitemap.xml with hreflang and image extensions, sitemap-images.xml for image SEO. Meta tags optimized with bilingual descriptions and competitive pricing keywords.
- **Responsiveness:** Fully responsive design across all components, optimized for mobile devices.
- **Unified ID System:** Utilizes unique 8-digit numeric or alphanumeric IDs for clients, orders (e.g., NM-12345678), tickets, documents, invoices, and payments, managed by a centralized ID generator.
- **Validation Messages:** Standardized Spanish messages for all input validations.

**Feature Specifications:**
- **Order & Account System:** Mandatory account creation for LLC and maintenance orders. Users can start forms without an account and create one at the end. If email OTP is not verified before account creation, account is created in "pending" status with action required in dashboard. Users can verify email later from their dashboard via `/api/user/send-verification-otp` and `/api/user/verify-email` endpoints. Welcome emails sent upon verification. Flexible payment options (bank transfer or payment link). Existing user detection prompts for login to continue orders.
- **Pricing (February 2026):** Formation: New Mexico 739€, Wyoming 899€, Delaware 1399€. Maintenance: New Mexico 539€, Wyoming 699€, Delaware 999€. All prices include state fees and first year services.
- **OTP Verification System:** Email OTP verification is used for account creation (optional but creates pending account if skipped), password resets, profile changes (sensitive fields), and email verification. 6-digit codes valid for 10 minutes, state reset on email changes. New endpoints: `/api/user/profile/send-otp` for profile change OTP, `/api/user/send-verification-otp` and `/api/user/verify-email` for pending account activation.
- **Messaging System:** Automatically links messages from authenticated users, sends email notifications to users and admins, supports threaded replies, and integrates message history into the user dashboard.
- **Admin Features:** Includes payment link management (admin sets URL per order via PATCH /api/admin/orders/:id/payment-link), full CRUD operations for users and orders, document request management, invoice generation with payment status tracking (pending/paid/overdue/cancelled), and payment due dates.
- **Compliance Calendar System:** Automatic calculation of IRS deadlines (1120/5472 on April 15 following year), Annual Reports for Delaware and Wyoming (12 months from formation), and Registered Agent renewals (12 months). Hourly reminder service sends notifications 60 days before deadlines. Responsive calendar UI with mobile-optimized grid layout.
- **Progress Widget:** Visual 5-step progress tracker for LLC and Maintenance applications. Supports both LLC formation (Pedido Recibido → Pago Confirmado → En Tramitación → Presentado → LLC Activa) and Maintenance packages (Solicitud Recibida → Pago Confirmado → En Proceso → Presentado → Completado). Fully responsive with mobile and desktop optimized layouts. Component at `client/src/components/llc-progress-widget.tsx`.
- **Abandoned Application Recovery:** Automatic tracking and recovery system for incomplete LLC and maintenance applications. Applications inactive for 24+ hours are marked as abandoned. Email reminders are sent every 12 hours (max 3 reminders) urging users to complete their applications. Applications are auto-deleted after 48 hours if not completed. Dashboard displays a prominent banner with countdown timer for pending applications. Service runs hourly via `server/lib/abandoned-service.ts`.

## External Dependencies
- **Drizzle ORM:** For database interaction.
- **Zod:** For data validation.
- **Express.js:** Backend framework.
- **Framer Motion:** For UI animations.
- **shadcn/ui:** For UI components and design system. All dropdown selectors use native HTML `<select>` elements via `NativeSelect` component (`client/src/components/ui/native-select.tsx`) for maximum compatibility and reliability across all browsers and devices.
- **TanStack Query:** For client-side data fetching and caching.
- **wouter:** For client-side routing.
- **Mercury / Relay:** For banking assistance integrations.
- **Stripe:** For payment processing portal integration.
- **Google Fonts:** For typography (Inter).